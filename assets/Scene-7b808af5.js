import{T as yl,a as ci,b as la,R as zi,E as Lr,Q as br,P as vt,V as se,O as Ht,S as bs,c as ee,M as nn,d as rn,e as xl,f as El,L as wl,g as Vt,F as ua,C as Ne,h as Tl,i as Sl,D as Al,j as cn,k as Lt,l as yr,I as Rl,m as fa,n as _l,o as Cl,B as Ut,p as Pl,q as pn,r as da,s as xr,t as Ol,u as Fn,v as Ml,w as ha,x as ln,y as $l,z as ji,A as Dl,G as Yn,H as Il,J as kl,K as Nl,N as Ll,U as mr,W as Bl,X as Fl,Y as pa,Z as zl,_ as jl,$ as Yt,a0 as Hl,a1 as Ul,a2 as Gl,a3 as Vl,a4 as Wl,a5 as Kl,a6 as ma,a7 as Yl,a8 as Er,a9 as Xl,aa as ys,ab as ql,ac as Zl,ad as Ql,ae as Jl,af as ga,ag as d,ah as li,ai as Xn,aj as eu,ak as xs,al as Wr,am as ge,an as Hi,ao as va,ap as y,aq as tu,ar as ba,as as nu,at as Je,au as ru,av as re,aw as Xt,ax as Ke,ay as iu,az as su,aA as ou,aB as au,aC as it,aD as ya,aE as xa,aF as bn,aG as Z,aH as cu,aI as lu,aJ as Es,aK as or,aL as Qt,aM as yn,aN as ui,aO as uu,aP as fu,aQ as ws,aR as du,aS as hu,aT as pu,aU as mu,aV as Ui,aW as gu,aX as vu,aY as bu,aZ as yu}from"./index-1eb9205c.js";let Dn;function xu(){var e;if(Dn!==void 0)return Dn;try{let t;const n=document.createElement("canvas");return Dn=!!(window.WebGL2RenderingContext&&(t=n.getContext("webgl2"))),t&&((e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext()),Dn}catch{return Dn=!1}}function Ts(e,t){if(t===yl)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===ci||t===la){let n=e.getIndex();if(n===null){const o=[],a=e.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)o.push(c);e.setIndex(o),n=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}const r=n.count-2,i=[];if(n)if(t===ci)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const Eu=parseInt(zi.replace(/\D+/g,""));var wu=Object.defineProperty,Tu=(e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t,n)=>(Tu(e,typeof t!="symbol"?t+"":t,n),n);const ar=new xl,Ss=new El,Su=Math.cos(70*(Math.PI/180)),As=(e,t)=>(e%t+t)%t;let Au=class extends Lr{constructor(t,n){super(),G(this,"object"),G(this,"domElement"),G(this,"enabled",!0),G(this,"target",new se),G(this,"minDistance",0),G(this,"maxDistance",1/0),G(this,"minZoom",0),G(this,"maxZoom",1/0),G(this,"minPolarAngle",0),G(this,"maxPolarAngle",Math.PI),G(this,"minAzimuthAngle",-1/0),G(this,"maxAzimuthAngle",1/0),G(this,"enableDamping",!1),G(this,"dampingFactor",.05),G(this,"enableZoom",!0),G(this,"zoomSpeed",1),G(this,"enableRotate",!0),G(this,"rotateSpeed",1),G(this,"enablePan",!0),G(this,"panSpeed",1),G(this,"screenSpacePanning",!0),G(this,"keyPanSpeed",7),G(this,"zoomToCursor",!1),G(this,"autoRotate",!1),G(this,"autoRotateSpeed",2),G(this,"reverseOrbit",!1),G(this,"reverseHorizontalOrbit",!1),G(this,"reverseVerticalOrbit",!1),G(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),G(this,"mouseButtons",{LEFT:nn.ROTATE,MIDDLE:nn.DOLLY,RIGHT:nn.PAN}),G(this,"touches",{ONE:rn.ROTATE,TWO:rn.DOLLY_PAN}),G(this,"target0"),G(this,"position0"),G(this,"zoom0"),G(this,"_domElementKeyEvents",null),G(this,"getPolarAngle"),G(this,"getAzimuthalAngle"),G(this,"setPolarAngle"),G(this,"setAzimuthalAngle"),G(this,"getDistance"),G(this,"listenToKeyEvents"),G(this,"stopListenToKeyEvents"),G(this,"saveState"),G(this,"reset"),G(this,"update"),G(this,"connect"),G(this,"dispose"),this.object=t,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=w=>{let $=As(w,2*Math.PI),j=u.phi;j<0&&(j+=2*Math.PI),$<0&&($+=2*Math.PI);let q=Math.abs($-j);2*Math.PI-q<q&&($<j?$+=2*Math.PI:j+=2*Math.PI),f.phi=$-j,r.update()},this.setAzimuthalAngle=w=>{let $=As(w,2*Math.PI),j=u.theta;j<0&&(j+=2*Math.PI),$<0&&($+=2*Math.PI);let q=Math.abs($-j);2*Math.PI-q<q&&($<j?$+=2*Math.PI:j+=2*Math.PI),f.theta=$-j,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=w=>{w.addEventListener("keydown",ut),this._domElementKeyEvents=w},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ut),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),c=a.NONE},this.update=(()=>{const w=new se,$=new se(0,1,0),j=new br().setFromUnitVectors(t.up,$),q=j.clone().invert(),ye=new se,ft=new br,_t=2*Math.PI;return function(){const vs=r.object.position;j.setFromUnitVectors(t.up,$),q.copy(j).invert(),w.copy(vs).sub(r.target),w.applyQuaternion(j),u.setFromVector3(w),r.autoRotate&&c===a.NONE&&L(O()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let dt=r.minAzimuthAngle,ht=r.maxAzimuthAngle;isFinite(dt)&&isFinite(ht)&&(dt<-Math.PI?dt+=_t:dt>Math.PI&&(dt-=_t),ht<-Math.PI?ht+=_t:ht>Math.PI&&(ht-=_t),dt<=ht?u.theta=Math.max(dt,Math.min(ht,u.theta)):u.theta=u.theta>(dt+ht)/2?Math.max(dt,u.theta):Math.min(ht,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(p,r.dampingFactor):r.target.add(p),r.zoomToCursor&&M||r.object.isOrthographicCamera?u.radius=_e(u.radius):u.radius=_e(u.radius*h),w.setFromSpherical(u),w.applyQuaternion(q),vs.copy(r.target).add(w),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,p.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),p.set(0,0,0));let On=!1;if(r.zoomToCursor&&M){let Mn=null;if(r.object instanceof vt&&r.object.isPerspectiveCamera){const $n=w.length();Mn=_e($n*h);const sr=$n-Mn;r.object.position.addScaledVector(_,sr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const $n=new se(P.x,P.y,0);$n.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),On=!0;const sr=new se(P.x,P.y,0);sr.unproject(r.object),r.object.position.sub(sr).add($n),r.object.updateMatrixWorld(),Mn=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Mn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Mn).add(r.object.position):(ar.origin.copy(r.object.position),ar.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(ar.direction))<Su?t.lookAt(r.target):(Ss.setFromNormalAndCoplanarPoint(r.object.up,r.target),ar.intersectPlane(Ss,r.target))))}else r.object instanceof Ht&&r.object.isOrthographicCamera&&(On=h!==1,On&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,M=!1,On||ye.distanceToSquared(r.object.position)>l||8*(1-ft.dot(r.object.quaternion))>l?(r.dispatchEvent(i),ye.copy(r.object.position),ft.copy(r.object.quaternion),On=!1,!0):!1}})(),this.connect=w=>{w===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=w,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",en),r.domElement.addEventListener("pointerdown",Ge),r.domElement.addEventListener("pointercancel",U),r.domElement.addEventListener("wheel",le)},this.dispose=()=>{var w,$,j,q,ye,ft;(w=r.domElement)==null||w.removeEventListener("contextmenu",en),($=r.domElement)==null||$.removeEventListener("pointerdown",Ge),(j=r.domElement)==null||j.removeEventListener("pointercancel",U),(q=r.domElement)==null||q.removeEventListener("wheel",le),(ye=r.domElement)==null||ye.ownerDocument.removeEventListener("pointermove",Bt),(ft=r.domElement)==null||ft.ownerDocument.removeEventListener("pointerup",I),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ut)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const l=1e-6,u=new bs,f=new bs;let h=1;const p=new se,m=new ee,g=new ee,b=new ee,v=new ee,x=new ee,E=new ee,T=new ee,A=new ee,S=new ee,_=new se,P=new ee;let M=!1;const R=[],C={};function O(){return 2*Math.PI/60/60*r.autoRotateSpeed}function N(){return Math.pow(.95,r.zoomSpeed)}function L(w){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=w:f.theta-=w}function D(w){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=w:f.phi-=w}const H=(()=>{const w=new se;return function(j,q){w.setFromMatrixColumn(q,0),w.multiplyScalar(-j),p.add(w)}})(),B=(()=>{const w=new se;return function(j,q){r.screenSpacePanning===!0?w.setFromMatrixColumn(q,1):(w.setFromMatrixColumn(q,0),w.crossVectors(r.object.up,w)),w.multiplyScalar(j),p.add(w)}})(),K=(()=>{const w=new se;return function(j,q){const ye=r.domElement;if(ye&&r.object instanceof vt&&r.object.isPerspectiveCamera){const ft=r.object.position;w.copy(ft).sub(r.target);let _t=w.length();_t*=Math.tan(r.object.fov/2*Math.PI/180),H(2*j*_t/ye.clientHeight,r.object.matrix),B(2*q*_t/ye.clientHeight,r.object.matrix)}else ye&&r.object instanceof Ht&&r.object.isOrthographicCamera?(H(j*(r.object.right-r.object.left)/r.object.zoom/ye.clientWidth,r.object.matrix),B(q*(r.object.top-r.object.bottom)/r.object.zoom/ye.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Q(w){r.object instanceof vt&&r.object.isPerspectiveCamera||r.object instanceof Ht&&r.object.isOrthographicCamera?h/=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ve(w){r.object instanceof vt&&r.object.isPerspectiveCamera||r.object instanceof Ht&&r.object.isOrthographicCamera?h*=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function de(w){if(!r.zoomToCursor||!r.domElement)return;M=!0;const $=r.domElement.getBoundingClientRect(),j=w.clientX-$.left,q=w.clientY-$.top,ye=$.width,ft=$.height;P.x=j/ye*2-1,P.y=-(q/ft)*2+1,_.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function _e(w){return Math.max(r.minDistance,Math.min(r.maxDistance,w))}function Ee(w){m.set(w.clientX,w.clientY)}function Ze(w){de(w),T.set(w.clientX,w.clientY)}function Ce(w){v.set(w.clientX,w.clientY)}function Se(w){g.set(w.clientX,w.clientY),b.subVectors(g,m).multiplyScalar(r.rotateSpeed);const $=r.domElement;$&&(L(2*Math.PI*b.x/$.clientHeight),D(2*Math.PI*b.y/$.clientHeight)),m.copy(g),r.update()}function Qe(w){A.set(w.clientX,w.clientY),S.subVectors(A,T),S.y>0?Q(N()):S.y<0&&ve(N()),T.copy(A),r.update()}function we(w){x.set(w.clientX,w.clientY),E.subVectors(x,v).multiplyScalar(r.panSpeed),K(E.x,E.y),v.copy(x),r.update()}function He(w){de(w),w.deltaY<0?ve(N()):w.deltaY>0&&Q(N()),r.update()}function me(w){let $=!1;switch(w.code){case r.keys.UP:K(0,r.keyPanSpeed),$=!0;break;case r.keys.BOTTOM:K(0,-r.keyPanSpeed),$=!0;break;case r.keys.LEFT:K(r.keyPanSpeed,0),$=!0;break;case r.keys.RIGHT:K(-r.keyPanSpeed,0),$=!0;break}$&&(w.preventDefault(),r.update())}function Y(){if(R.length==1)m.set(R[0].pageX,R[0].pageY);else{const w=.5*(R[0].pageX+R[1].pageX),$=.5*(R[0].pageY+R[1].pageY);m.set(w,$)}}function Pe(){if(R.length==1)v.set(R[0].pageX,R[0].pageY);else{const w=.5*(R[0].pageX+R[1].pageX),$=.5*(R[0].pageY+R[1].pageY);v.set(w,$)}}function he(){const w=R[0].pageX-R[1].pageX,$=R[0].pageY-R[1].pageY,j=Math.sqrt(w*w+$*$);T.set(0,j)}function Be(){r.enableZoom&&he(),r.enablePan&&Pe()}function Te(){r.enableZoom&&he(),r.enableRotate&&Y()}function Ue(w){if(R.length==1)g.set(w.pageX,w.pageY);else{const j=zt(w),q=.5*(w.pageX+j.x),ye=.5*(w.pageY+j.y);g.set(q,ye)}b.subVectors(g,m).multiplyScalar(r.rotateSpeed);const $=r.domElement;$&&(L(2*Math.PI*b.x/$.clientHeight),D(2*Math.PI*b.y/$.clientHeight)),m.copy(g)}function Ie(w){if(R.length==1)x.set(w.pageX,w.pageY);else{const $=zt(w),j=.5*(w.pageX+$.x),q=.5*(w.pageY+$.y);x.set(j,q)}E.subVectors(x,v).multiplyScalar(r.panSpeed),K(E.x,E.y),v.copy(x)}function at(w){const $=zt(w),j=w.pageX-$.x,q=w.pageY-$.y,ye=Math.sqrt(j*j+q*q);A.set(0,ye),S.set(0,Math.pow(A.y/T.y,r.zoomSpeed)),Q(S.y),T.copy(A)}function ct(w){r.enableZoom&&at(w),r.enablePan&&Ie(w)}function lt(w){r.enableZoom&&at(w),r.enableRotate&&Ue(w)}function Ge(w){var $,j;r.enabled!==!1&&(R.length===0&&(($=r.domElement)==null||$.ownerDocument.addEventListener("pointermove",Bt),(j=r.domElement)==null||j.ownerDocument.addEventListener("pointerup",I)),Pn(w),w.pointerType==="touch"?Rt(w):pe(w))}function Bt(w){r.enabled!==!1&&(w.pointerType==="touch"?Cn(w):be(w))}function I(w){var $,j,q;Ft(w),R.length===0&&(($=r.domElement)==null||$.releasePointerCapture(w.pointerId),(j=r.domElement)==null||j.ownerDocument.removeEventListener("pointermove",Bt),(q=r.domElement)==null||q.ownerDocument.removeEventListener("pointerup",I)),r.dispatchEvent(o),c=a.NONE}function U(w){Ft(w)}function pe(w){let $;switch(w.button){case 0:$=r.mouseButtons.LEFT;break;case 1:$=r.mouseButtons.MIDDLE;break;case 2:$=r.mouseButtons.RIGHT;break;default:$=-1}switch($){case nn.DOLLY:if(r.enableZoom===!1)return;Ze(w),c=a.DOLLY;break;case nn.ROTATE:if(w.ctrlKey||w.metaKey||w.shiftKey){if(r.enablePan===!1)return;Ce(w),c=a.PAN}else{if(r.enableRotate===!1)return;Ee(w),c=a.ROTATE}break;case nn.PAN:if(w.ctrlKey||w.metaKey||w.shiftKey){if(r.enableRotate===!1)return;Ee(w),c=a.ROTATE}else{if(r.enablePan===!1)return;Ce(w),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function be(w){if(r.enabled!==!1)switch(c){case a.ROTATE:if(r.enableRotate===!1)return;Se(w);break;case a.DOLLY:if(r.enableZoom===!1)return;Qe(w);break;case a.PAN:if(r.enablePan===!1)return;we(w);break}}function le(w){r.enabled===!1||r.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(w.preventDefault(),r.dispatchEvent(s),He(w),r.dispatchEvent(o))}function ut(w){r.enabled===!1||r.enablePan===!1||me(w)}function Rt(w){switch(tn(w),R.length){case 1:switch(r.touches.ONE){case rn.ROTATE:if(r.enableRotate===!1)return;Y(),c=a.TOUCH_ROTATE;break;case rn.PAN:if(r.enablePan===!1)return;Pe(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(r.touches.TWO){case rn.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Be(),c=a.TOUCH_DOLLY_PAN;break;case rn.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&r.dispatchEvent(s)}function Cn(w){switch(tn(w),c){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ue(w),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ie(w),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ct(w),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;lt(w),r.update();break;default:c=a.NONE}}function en(w){r.enabled!==!1&&w.preventDefault()}function Pn(w){R.push(w)}function Ft(w){delete C[w.pointerId];for(let $=0;$<R.length;$++)if(R[$].pointerId==w.pointerId){R.splice($,1);return}}function tn(w){let $=C[w.pointerId];$===void 0&&($=new ee,C[w.pointerId]=$),$.set(w.pageX,w.pageY)}function zt(w){const $=w.pointerId===R[0].pointerId?R[1]:R[0];return C[$.pointerId]}n!==void 0&&this.connect(n),this.update()}};class Ru extends wl{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Mu(n)}),this.register(function(n){return new Fu(n)}),this.register(function(n){return new zu(n)}),this.register(function(n){return new ju(n)}),this.register(function(n){return new Du(n)}),this.register(function(n){return new Iu(n)}),this.register(function(n){return new ku(n)}),this.register(function(n){return new Nu(n)}),this.register(function(n){return new Ou(n)}),this.register(function(n){return new Lu(n)}),this.register(function(n){return new $u(n)}),this.register(function(n){return new Bu(n)}),this.register(function(n){return new Cu(n)}),this.register(function(n){return new Hu(n)}),this.register(function(n){return new Uu(n)})}load(t,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Vt.extractUrlBase(t),this.manager.itemStart(t);const a=function(l){i?i(l):console.error(l),s.manager.itemError(t),s.manager.itemEnd(t)},c=new ua(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(l){try{s.parse(l,o,function(u){n(u),s.manager.itemEnd(t)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,r,i){let s;const o={},a={};if(typeof t=="string")s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(Vt.decodeText(new Uint8Array(t.slice(0,4)))===Ea){try{o[W.KHR_BINARY_GLTF]=new Gu(t)}catch(u){i&&i(u);return}s=JSON.parse(o[W.KHR_BINARY_GLTF].content)}else s=JSON.parse(Vt.decodeText(new Uint8Array(t)));else s=t;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new rf(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const u=this.pluginCallbacks[l](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let l=0;l<s.extensionsUsed.length;++l){const u=s.extensionsUsed[l],f=s.extensionsRequired||[];switch(u){case W.KHR_MATERIALS_UNLIT:o[u]=new Pu;break;case W.KHR_DRACO_MESH_COMPRESSION:o[u]=new Vu(s,this.dracoLoader);break;case W.KHR_TEXTURE_TRANSFORM:o[u]=new Wu;break;case W.KHR_MESH_QUANTIZATION:o[u]=new Ku;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(t,n){const r=this;return new Promise(function(i,s){r.parse(t,n,i,s)})}}function _u(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const W={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Cu{constructor(t){this.parser=t,this.name=W.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const n=this.parser,r="light:"+t;let i=n.cache.get(r);if(i)return i;const s=n.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let l;const u=new Ne(16777215);c.color!==void 0&&u.fromArray(c.color);const f=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new Al(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Sl(u),l.distance=f;break;case"spot":l=new Tl(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,$t(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=n.createUniqueName(c.name||"light_"+t),i=Promise.resolve(l),n.cache.add(r,i),i}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,r=this.parser,s=r.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return r._getNodeRef(n.cache,a,c)})}}class Pu{constructor(){this.name=W.KHR_MATERIALS_UNLIT}getMaterialType(){return cn}extendParams(t,n,r){const i=[];t.color=new Ne(1,1,1),t.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(t,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class Ou{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class Mu{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new ee(a,a)}return Promise.all(s)}}class $u{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Du{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_SHEEN}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Ne(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Iu{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class ku{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_VOLUME}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new Ne(a[0],a[1],a[2]),Promise.all(s)}}class Nu{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_IOR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Lu{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_SPECULAR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new Ne(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class Bu{constructor(t){this.parser=t,this.name=W.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Lt}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Fu{constructor(t){this.parser=t,this.name=W.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,s.source,o)}}class zu{constructor(t){this.parser=t,this.name=W.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,i=r.json,s=i.textures[t];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let c=r.textureLoader;if(a.uri){const l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return r.loadTextureImage(t,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class ju{constructor(t){this.parser=t,this.name=W.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,i=r.json,s=i.textures[t];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let c=r.textureLoader;if(a.uri){const l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return r.loadTextureImage(t,o.source,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Hu{constructor(t){this.name=W.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,r=n.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const c=i.byteOffset||0,l=i.byteLength||0,u=i.count,f=i.byteStride,h=new Uint8Array(a,c,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,i.mode,i.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(p),u,f,h,i.mode,i.filter),p})})}else return null}}class Uu{constructor(t){this.name=W.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,r=n.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const l of i.primitives)if(l.mode!==Ve.TRIANGLES&&l.mode!==Ve.TRIANGLE_STRIP&&l.mode!==Ve.TRIANGLE_FAN&&l.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(l=>{const u=l.pop(),f=u.isGroup?u.children:[u],h=l[0].count,p=[];for(const m of f){const g=new yr,b=new se,v=new br,x=new se(1,1,1),E=new Rl(m.geometry,m.material,h);for(let T=0;T<h;T++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,T),c.ROTATION&&v.fromBufferAttribute(c.ROTATION,T),c.SCALE&&x.fromBufferAttribute(c.SCALE,T),E.setMatrixAt(T,g.compose(b,v,x));for(const T in c)T!=="TRANSLATION"&&T!=="ROTATION"&&T!=="SCALE"&&m.geometry.setAttribute(T,c[T]);fa.prototype.copy.call(E,m),this.parser.assignFinalMaterial(E),p.push(E)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const Ea="glTF",In=12,Rs={JSON:1313821514,BIN:5130562};class Gu{constructor(t){this.name=W.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,In);if(this.header={magic:Vt.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Ea)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-In,i=new DataView(t,In);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Rs.JSON){const c=new Uint8Array(t,In+s,o);this.content=Vt.decodeText(c)}else if(a===Rs.BIN){const c=In+s;this.body=t.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Vu{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=W.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const r=this.json,i=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=fi[u]||u.toLowerCase();a[f]=o[u]}for(const u in t.attributes){const f=fi[u]||u.toLowerCase();if(o[u]!==void 0){const h=r.accessors[t.attributes[u]],p=fn[h.componentType];l[f]=p.name,c[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f){i.decodeDracoFile(u,function(h){for(const p in h.attributes){const m=h.attributes[p],g=c[p];g!==void 0&&(m.normalized=g)}f(h)},a,l)})})}}class Wu{constructor(){this.name=W.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class Ku{constructor(){this.name=W.KHR_MESH_QUANTIZATION}}class wa extends Jl{constructor(t,n,r,i){super(t,n,r,i)}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=t*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(t,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,u=i-n,f=(r-n)/u,h=f*f,p=h*f,m=t*l,g=m-l,b=-2*p+3*h,v=p-h,x=1-b,E=v-h+f;for(let T=0;T!==a;T++){const A=o[g+T+a],S=o[g+T+c]*u,_=o[m+T+a],P=o[m+T]*u;s[T]=x*A+E*S+b*_+v*P}return s}}const Yu=new br;class Xu extends wa{interpolate_(t,n,r,i){const s=super.interpolate_(t,n,r,i);return Yu.fromArray(s).normalize().toArray(s),s}}const Ve={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},fn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_s={9728:Yt,9729:pn,9984:Hl,9985:Ul,9986:Gl,9987:da},Cs={33071:Vl,33648:Wl,10497:xr},Kr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fi={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Eu>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ct={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},qu={CUBICSPLINE:void 0,LINEAR:pa,STEP:Kl},Yr={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Zu(e){return e.DefaultMaterial===void 0&&(e.DefaultMaterial=new ha({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ma})),e.DefaultMaterial}function jt(e,t,n){for(const r in n.extensions)e[r]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function $t(e,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Qu(e,t,n){let r=!1,i=!1,s=!1;for(let l=0,u=t.length;l<u;l++){const f=t[l];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const o=[],a=[],c=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];if(r){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):e.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):e.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):e.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],h=l[2];return r&&(e.morphAttributes.position=u),i&&(e.morphAttributes.normal=f),s&&(e.morphAttributes.color=h),e.morphTargetsRelative=!0,e})}function Ju(e,t){if(e.updateMorphTargets(),t.weights!==void 0)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)e.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ef(e){let t;const n=e.extensions&&e.extensions[W.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Xr(n.attributes):t=e.indices+":"+Xr(e.attributes)+":"+e.mode,e.targets!==void 0)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+Xr(e.targets[r]);return t}function Xr(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function di(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function tf(e){return e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0?"image/jpeg":e.search(/\.webp($|\?)/i)>0||e.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const nf=new yr;class rf{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new _u,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new _l(this.options.manager):this.textureLoader=new Cl(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ua(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};jt(s,a,i),$t(a,i),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){t(a)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,c=o.length;a<c;a++)t[o[a]].isBone=!0}for(let i=0,s=t.length;i<s;i++){const o=t[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,r){if(t.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const c=this.associations.get(o);c!=null&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(r,i),i.name+="_instance_"+t.uses[n]++,i}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=t(n[r]);if(i)return i}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=t(n[i]);s&&r.push(s)}return r}getDependency(t,n){const r=t+":"+n;let i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,n)}),!i)throw new Error("Unknown type: "+t);break}this.cache.add(r,i)}return i}getDependencies(t){let n=this.cache.get(t);if(!n){const r=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(t,o)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[W.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Vt.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(t){const n=this,r=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0){const o=Kr[i.type],a=fn[i.componentType],c=i.normalized===!0,l=new a(i.count*o);return Promise.resolve(new Ut(l,o,c))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=Kr[i.type],l=fn[i.componentType],u=l.BYTES_PER_ELEMENT,f=u*c,h=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,m=i.normalized===!0;let g,b;if(p&&p!==f){const v=Math.floor(h/p),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let E=n.cache.get(x);E||(g=new l(a,v*p,i.count*p/u),E=new Pl(g,p/u),n.cache.add(x,E)),b=new Yl(E,c,h%p/u,m)}else a===null?g=new l(i.count*c):g=new l(a,h,i.count*c),b=new Ut(g,c,m);if(i.sparse!==void 0){const v=Kr.SCALAR,x=fn[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,T=i.sparse.values.byteOffset||0,A=new x(o[1],E,i.sparse.count*v),S=new l(o[2],T,i.sparse.count*c);a!==null&&(b=new Ut(b.array.slice(),b.itemSize,b.normalized));for(let _=0,P=A.length;_<P;_++){const M=A[_];if(b.setX(M,S[_*c]),c>=2&&b.setY(M,S[_*c+1]),c>=3&&b.setZ(M,S[_*c+2]),c>=4&&b.setW(M,S[_*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(t){const n=this.json,r=this.options,s=n.textures[t].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const c=r.manager.getHandler(o.uri);c!==null&&(a=c)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,n,r){const i=this,s=this.json,o=s.textures[t],a=s.images[n],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=_s[h.magFilter]||pn,u.minFilter=_s[h.minFilter]||da,u.wrapS=Cs[h.wrapS]||xr,u.wrapT=Cs[h.wrapT]||xr,i.associations.set(u,{textures:t}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(t,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(f=>f.clone());const o=i.images[t],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(o.bufferView!==void 0)c=r.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const h=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(h,p){let m=h;n.isImageBitmapLoader===!0&&(m=function(g){const b=new Er(g);b.needsUpdate=!0,h(b)}),n.load(Vt.resolveURL(f,s.path),m,void 0,p)})}).then(function(f){return l===!0&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||tf(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[t]=u,u}assignTexture(t,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[W.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[W.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[W.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),t[n]=o,o})}assignFinalMaterial(t){const n=t.geometry;let r=t.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new Ol,Fn.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(a,c)),r=c}else if(t.isLine){const a="LineBasicMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new Ml,Fn.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(a,c)),r=c}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=r.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(r))),r=c}t.material=r}getMaterialType(){return ha}loadMaterial(t){const n=this,r=this.json,i=this.extensions,s=r.materials[t];let o;const a={},c=s.extensions||{},l=[];if(c[W.KHR_MATERIALS_UNLIT]){const f=i[W.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Ne(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}f.baseColorTexture!==void 0&&l.push(n.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}s.doubleSided===!0&&(a.side=ln);const u=s.alphaMode||Yr.OPAQUE;if(u===Yr.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Yr.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==cn&&(l.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ee(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==cn&&(l.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==cn&&(a.emissive=new Ne().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==cn&&l.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(l).then(function(){const f=new o(a);return s.name&&(f.name=s.name),$t(f,s),n.associations.set(f,{materials:t}),s.extensions&&jt(i,f,s),f})}createUniqueName(t){const n=$l.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[W.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(c){return Ps(c,a,n)})}const o=[];for(let a=0,c=t.length;a<c;a++){const l=t[a],u=ef(l),f=i[u];if(f)o.push(f.promise);else{let h;l.extensions&&l.extensions[W.KHR_DRACO_MESH_COMPRESSION]?h=s(l):h=Ps(new ji,l,n),i[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const n=this,r=this.json,i=this.extensions,s=r.meshes[t],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=o[c].material===void 0?Zu(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let p=0,m=u.length;p<m;p++){const g=u[p],b=o[p];let v;const x=l[p];if(b.mode===Ve.TRIANGLES||b.mode===Ve.TRIANGLE_STRIP||b.mode===Ve.TRIANGLE_FAN||b.mode===void 0)v=s.isSkinnedMesh===!0?new Dl(g,x):new Yn(g,x),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),b.mode===Ve.TRIANGLE_STRIP?v.geometry=Ts(v.geometry,la):b.mode===Ve.TRIANGLE_FAN&&(v.geometry=Ts(v.geometry,ci));else if(b.mode===Ve.LINES)v=new Il(g,x);else if(b.mode===Ve.LINE_STRIP)v=new kl(g,x);else if(b.mode===Ve.LINE_LOOP)v=new Nl(g,x);else if(b.mode===Ve.POINTS)v=new Ll(g,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(v.geometry.morphAttributes).length>0&&Ju(v,s),v.name=n.createUniqueName(s.name||"mesh_"+t),$t(v,s),b.extensions&&jt(i,v,b),n.assignFinalMaterial(v),f.push(v)}for(let p=0,m=f.length;p<m;p++)n.associations.set(f[p],{meshes:t,primitives:p});if(f.length===1)return s.extensions&&jt(i,f[0],s),f[0];const h=new mr;s.extensions&&jt(i,h,s),n.associations.set(h,{meshes:t});for(let p=0,m=f.length;p<m;p++)h.add(f[p]);return h})}loadCamera(t){let n;const r=this.json.cameras[t],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new vt(Bl.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Ht(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),$t(n,r),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const f=o[l];if(f){a.push(f);const h=new yr;s!==null&&h.fromArray(s.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new Fl(a,c)})}loadAnimation(t){const r=this.json.animations[t],i=r.name?r.name:"animation_"+t,s=[],o=[],a=[],c=[],l=[];for(let u=0,f=r.channels.length;u<f;u++){const h=r.channels[u],p=r.samplers[h.sampler],m=h.target,g=m.node,b=r.parameters!==void 0?r.parameters[p.input]:p.input,v=r.parameters!==void 0?r.parameters[p.output]:p.output;m.node!==void 0&&(s.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",b)),a.push(this.getDependency("accessor",v)),c.push(p),l.push(m))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l)]).then(function(u){const f=u[0],h=u[1],p=u[2],m=u[3],g=u[4],b=[];for(let v=0,x=f.length;v<x;v++){const E=f[v],T=h[v],A=p[v],S=m[v],_=g[v];if(E===void 0)continue;E.updateMatrix();let P;switch(Ct[_.path]){case Ct.weights:P=ql;break;case Ct.rotation:P=ys;break;case Ct.position:case Ct.scale:default:P=Xl;break}const M=E.name?E.name:E.uuid,R=S.interpolation!==void 0?qu[S.interpolation]:pa,C=[];Ct[_.path]===Ct.weights?E.traverse(function(N){N.morphTargetInfluences&&C.push(N.name?N.name:N.uuid)}):C.push(M);let O=A.array;if(A.normalized){const N=di(O.constructor),L=new Float32Array(O.length);for(let D=0,H=O.length;D<H;D++)L[D]=O[D]*N;O=L}for(let N=0,L=C.length;N<L;N++){const D=new P(C[N]+"."+Ct[_.path],T.array,O,R);S.interpolation==="CUBICSPLINE"&&(D.createInterpolant=function(B){const K=this instanceof ys?Xu:wa;return new K(this.times,this.values,this.getValueSize()/3,B)},D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),b.push(D)}}return new zl(i,void 0,b)})}createNodeMesh(t){const n=this.json,r=this,i=n.nodes[t];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=i.weights.length;c<l;c++)a.morphTargetInfluences[c]=i.weights[c]}),o})}loadNode(t){const n=this.json,r=this,i=n.nodes[t],s=r._loadNodeShallow(t),o=[],a=i.children||[];for(let l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));const c=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){const u=l[0],f=l[1],h=l[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,nf)});for(let p=0,m=f.length;p<m;p++)u.add(f[p]);return u})}_loadNodeShallow(t){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const s=n.nodes[t],o=s.name?i.createUniqueName(s.name):"",a=[],c=i._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(t)});return c&&a.push(c),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(l){return i._getNodeRef(i.cameraCache,s.camera,l)})),i._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(t)}).forEach(function(l){a.push(l)}),this.nodeCache[t]=Promise.all(a).then(function(l){let u;if(s.isBone===!0?u=new jl:l.length>1?u=new mr:l.length===1?u=l[0]:u=new fa,u!==l[0])for(let f=0,h=l.length;f<h;f++)u.add(l[f]);if(s.name&&(u.userData.name=s.name,u.name=o),$t(u,s),s.extensions&&jt(r,u,s),s.matrix!==void 0){const f=new yr;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=t,u}),this.nodeCache[t]}loadScene(t){const n=this.extensions,r=this.json.scenes[t],i=this,s=new mr;r.name&&(s.name=i.createUniqueName(r.name)),$t(s,r),r.extensions&&jt(n,s,r);const o=r.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(i.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,f=c.length;u<f;u++)s.add(c[u]);const l=u=>{const f=new Map;for(const[h,p]of i.associations)(h instanceof Fn||h instanceof Er)&&f.set(h,p);return u.traverse(h=>{const p=i.associations.get(h);p!=null&&f.set(h,p)}),f};return i.associations=l(s),s})}}function sf(e,t,n){const r=t.attributes,i=new Zl;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(i.set(new se(c[0],c[1],c[2]),new se(l[0],l[1],l[2])),a.normalized){const u=di(fn[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=t.targets;if(s!==void 0){const a=new se,c=new se;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],p=h.min,m=h.max;if(p!==void 0&&m!==void 0){if(c.setX(Math.max(Math.abs(p[0]),Math.abs(m[0]))),c.setY(Math.max(Math.abs(p[1]),Math.abs(m[1]))),c.setZ(Math.max(Math.abs(p[2]),Math.abs(m[2]))),h.normalized){const g=di(fn[h.componentType]);c.multiplyScalar(g)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}e.boundingBox=i;const o=new Ql;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=o}function Ps(e,t,n){const r=t.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(c){e.setAttribute(a,c)})}for(const o in r){const a=fi[o]||o.toLowerCase();a in e.attributes||i.push(s(r[o],a))}if(t.indices!==void 0&&!e.index){const o=n.getDependency("accessor",t.indices).then(function(a){e.setIndex(a)});i.push(o)}return $t(e,t),sf(e,t,n),Promise.all(i).then(function(){return t.targets!==void 0?Qu(e,t.targets,n):e})}var of=Object.defineProperty,af=(e,t,n)=>t in e?of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t,n)=>(af(e,typeof t!="symbol"?t+"":t,n),n);const ue={Handedness:{NONE:"none",LEFT:"left",RIGHT:"right"},ComponentState:{DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"},ComponentProperty:{BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"},ComponentType:{TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"},ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:{TRANSFORM:"transform",VISIBILITY:"visibility"}};async function Ta(e){const t=await fetch(e);if(t.ok)return t.json();throw new Error(t.statusText)}async function cf(e){if(!e)throw new Error("No basePath supplied");return await Ta(`${e}/profilesList.json`)}async function lf(e,t,n=null,r=!0){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No basePath supplied");const i=await cf(t);let s;if(e.profiles.some(c=>{const l=i[c];return l&&(s={profileId:c,profilePath:`${t}/${l.path}`,deprecated:!!l.deprecated}),!!s}),!s){if(!n)throw new Error("No matching profile name found");const c=i[n];if(!c)throw new Error(`No matching profile name found and default profile "${n}" missing.`);s={profileId:n,profilePath:`${t}/${c.path}`,deprecated:!!c.deprecated}}const o=await Ta(s.profilePath);let a;if(r){let c;if(e.handedness==="any"?c=o.layouts[Object.keys(o.layouts)[0]]:c=o.layouts[e.handedness],!c)throw new Error(`No matching handedness, ${e.handedness}, in profile ${s.profileId}`);c.assetPath&&(a=s.profilePath.replace("profile.json",c.assetPath))}return{profile:o,assetPath:a}}const uf={xAxis:0,yAxis:0,button:0,state:ue.ComponentState.DEFAULT};function ff(e=0,t=0){let n=e,r=t;if(Math.sqrt(e*e+t*t)>1){const o=Math.atan2(t,e);n=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:n*.5+.5,normalizedYAxis:r*.5+.5}}class df{constructor(t){ae(this,"value"),ae(this,"componentProperty"),ae(this,"states"),ae(this,"valueNodeName"),ae(this,"valueNodeProperty"),ae(this,"minNodeName"),ae(this,"maxNodeName"),ae(this,"valueNode"),ae(this,"minNode"),ae(this,"maxNode"),this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===ue.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(uf)}updateFromComponent({xAxis:t,yAxis:n,button:r,state:i}){const{normalizedXAxis:s,normalizedYAxis:o}=ff(t,n);switch(this.componentProperty){case ue.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?s:.5;break;case ue.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?o:.5;break;case ue.ComponentProperty.BUTTON:this.value=this.states.includes(i)&&r?r:0;break;case ue.ComponentProperty.STATE:this.valueNodeProperty===ue.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class hf{constructor(t,n){if(ae(this,"id"),ae(this,"values"),ae(this,"type"),ae(this,"gamepadIndices"),ae(this,"rootNodeName"),ae(this,"visualResponses"),ae(this,"touchPointNodeName"),ae(this,"touchPointNode"),!t||!n||!n.visualResponses||!n.gamepadIndices||Object.keys(n.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=t,this.type=n.type,this.rootNodeName=n.rootNodeName,this.touchPointNodeName=n.touchPointNodeName,this.visualResponses={},Object.keys(n.visualResponses).forEach(r=>{const i=new df(n.visualResponses[r]);this.visualResponses[r]=i}),this.gamepadIndices=Object.assign({},n.gamepadIndices),this.values={state:ue.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(t){if(this.values.state=ue.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&t.buttons.length>this.gamepadIndices.button){const n=t.buttons[this.gamepadIndices.button];this.values.button=n.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,n.pressed||this.values.button===1?this.values.state=ue.ComponentState.PRESSED:(n.touched||this.values.button>ue.ButtonTouchThreshold)&&(this.values.state=ue.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&t.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=t.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===ue.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>ue.AxisTouchThreshold&&(this.values.state=ue.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&t.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=t.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===ue.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>ue.AxisTouchThreshold&&(this.values.state=ue.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(n=>{n.updateFromComponent(this.values)})}}class pf{constructor(t,n,r){if(ae(this,"xrInputSource"),ae(this,"assetUrl"),ae(this,"layoutDescription"),ae(this,"id"),ae(this,"components"),!t)throw new Error("No xrInputSource supplied");if(!n)throw new Error("No profile supplied");if(!n.layouts[t.handedness])throw new Error("No layout for "+t.handedness+" handedness");this.xrInputSource=t,this.assetUrl=r,this.id=n.profileId,this.layoutDescription=n.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(i=>{const s=this.layoutDescription.components[i];this.components[i]=new hf(i,s)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const t=[];return Object.values(this.components).forEach(n=>{t.push(n.data)}),t}updateFromGamepad(){Object.values(this.components).forEach(t=>{t.updateFromGamepad(this.xrInputSource.gamepad)})}}const mf="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",gf="generic-trigger";class vf{constructor(t=null,n=mf){this.gltfLoader=t??new Ru,this.path=n,this._assetCache={}}initializeControllerModel(t,n){return n.targetRayMode!=="tracked-pointer"||!n.gamepad?Promise.resolve():lf(n,this.path,gf).then(({profile:r,assetPath:i})=>{if(!i)throw new Error("no asset path");const s=new pf(n,r,i);t.connectMotionController(s);const o=s.assetUrl,a=this._assetCache[o];if(a){const c=a.scene.clone();t.connectModel(c)}else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(o,c=>{if(!t.motionController){console.warn("motionController gone while gltf load, bailing...");return}this._assetCache[o]=c;const l=c.scene.clone();t.connectModel(l)},void 0,()=>{throw new Error(`Asset ${o} missing or malformed.`)})}}).catch(r=>{console.warn(r)})}}const Os=e=>"envMap"in e,Ms=(e,t)=>{e.envMap=t,e.needsUpdate=!0},Sa=(e,t)=>{t instanceof Yn&&(Array.isArray(t.material)?t.material.forEach(n=>Os(n)?Ms(n,e):void 0):Os(t.material)&&Ms(t.material,e))},$s=e=>"envMapIntensity"in e,Ds=(e,t)=>{e.envMapIntensity=t,e.needsUpdate=!0},hi=(e,t)=>{t instanceof Yn&&(Array.isArray(t.material)?t.material.forEach(n=>$s(n)?Ds(n,e):void 0):$s(t.material)&&Ds(t.material,e))};function bf(e,t){Object.values(e.components).forEach(n=>{const{type:r,touchPointNodeName:i,visualResponses:s}=n;if(r===ue.ComponentType.TOUCHPAD&&i)if(n.touchPointNode=t.getObjectByName(i),n.touchPointNode){const o=new ga(.001),a=new cn({color:255}),c=new Yn(o,a);n.touchPointNode.add(c)}else console.warn(`Could not find touch dot, ${n.touchPointNodeName}, in touchpad component ${n.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:c,maxNodeName:l,valueNodeProperty:u}=o;if(u===ue.VisualResponseProperty.TRANSFORM&&c&&l){if(o.minNode=t.getObjectByName(c),o.maxNode=t.getObjectByName(l),!o.minNode){console.warn(`Could not find ${c} in the model`);return}if(!o.maxNode){console.warn(`Could not find ${l} in the model`);return}}o.valueNode=t.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})}function yf(e,t){bf(e.motionController,t),(e.envMap||e.envMapIntensity!=null)&&t.traverse(n=>{e.envMap&&Sa(e.envMap,n),e.envMapIntensity!=null&&hi(e.envMapIntensity,n)}),e.add(t)}class xf extends mr{constructor(){super(),this.motionController=null,this.envMap=null,this.envMapIntensity=1,this.scene=null}setEnvironmentMap(t,n=1){var r;return this.envMap===t&&this.envMapIntensity===n?this:(this.envMap=t,this.envMapIntensity=n,(r=this.scene)==null||r.traverse(i=>{Sa(t,i),hi(n,i)}),this)}setEnvironmentMapIntensity(t){var n;return this.envMapIntensity===t?this:(this.envMapIntensity=t,(n=this.scene)==null||n.traverse(r=>hi(t,r)),this)}connectModel(t){if(!this.motionController){console.warn("scene tried to add, but no motion controller");return}this.scene=t,yf(this,t),this.dispatchEvent({type:"modelconnected",data:t})}connectMotionController(t){this.motionController=t,this.dispatchEvent({type:"motionconnected",data:t})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(n=>{Object.values(n.visualResponses).forEach(r=>{const{valueNode:i,minNode:s,maxNode:o,value:a,valueNodeProperty:c}=r;i&&(c===ue.VisualResponseProperty.VISIBILITY&&typeof a=="boolean"?i.visible=a:c===ue.VisualResponseProperty.TRANSFORM&&s&&o&&typeof a=="number"&&(i.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),i.position.lerpVectors(s.position,o.position,a)))})}))}disconnect(){this.dispatchEvent({type:"motiondisconnected",data:this.motionController}),this.dispatchEvent({type:"modeldisconnected",data:this.scene}),this.motionController=null,this.scene&&this.remove(this.scene),this.scene=null}dispose(){this.disconnect()}}const Ef=d.forwardRef(function({target:t,hideOnBlur:n=!1,...r},i){const s=li(c=>c.hoverState),o=d.useRef(null),a=d.useMemo(()=>new ji().setFromPoints([new se(0,0,0),new se(0,0,-1)]),[]);return d.useImperativeHandle(i,()=>o.current),Xn(()=>{if(!t.inputSource)return;let c=1;const l=s[t.inputSource.handedness].values().next().value;l&&t.inputSource.handedness!=="none"?(c=l.distance,n&&(o.current.visible=!1)):n&&(o.current.visible=!0);const u=-.01;o.current.scale.z=c+u}),d.createElement("line",{ref:o,geometry:a,"material-opacity":.8,"material-transparent":!0,...r})}),wf=new vf,Tf=({target:e,envMap:t,envMapIntensity:n})=>{const r=d.useRef(null),i=Wr(c=>{t!=null&&c.setEnvironmentMap(t)}),s=Wr(c=>c.setEnvironmentMap(null)),o=Wr(c=>{n!=null&&c.setEnvironmentMapIntensity(n)}),a=d.useCallback(c=>{var l,u,f;if(r.current=c,c){if(e.xrControllerModel=c,(l=e.inputSource)!=null&&l.hand)return;i.current(c),o.current(c),e.inputSource?wf.initializeControllerModel(c,e.inputSource):console.warn("no input source on XRController when handleControllerModel")}else{if((u=e.inputSource)!=null&&u.hand)return;(f=e.xrControllerModel)==null||f.disconnect(),e.xrControllerModel=null}},[e,o,i]);return d.useLayoutEffect(()=>{r.current&&(t?i.current(r.current):s.current(r.current))},[t,i,s]),d.useLayoutEffect(()=>{r.current&&o.current(r.current)},[n,o]),d.createElement("xRControllerModel",{ref:a})};function Sf({rayMaterial:e={},hideRaysOnBlur:t=!1,envMap:n,envMapIntensity:r}){const i=li(a=>a.controllers),s=li(a=>a.isHandTracking),o=d.useMemo(()=>Object.entries(e).reduce((a,[c,l])=>({...a,[`material-${c}`]:l}),{}),[JSON.stringify(e)]);return d.useMemo(()=>eu({XRControllerModel:xf}),[]),d.createElement(d.Fragment,null,i.map((a,c)=>d.createElement(d.Fragment,{key:c},xs(d.createElement(Tf,{target:a,envMap:n,envMapIntensity:r}),a.grip),xs(d.createElement(Ef,{visible:!s,hideOnBlur:t,target:a,...o}),a.controller))))}function Af(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Aa(...e){return t=>e.forEach(n=>Af(n,t))}function xn(...e){return d.useCallback(Aa(...e),e)}const Ra=d.forwardRef((e,t)=>{const{children:n,...r}=e,i=d.Children.toArray(n),s=i.find(Rf);if(s){const o=s.props.children,a=i.map(c=>c===s?d.Children.count(o)>1?d.Children.only(null):d.isValidElement(o)?o.props.children:null:c);return d.createElement(pi,ge({},r,{ref:t}),d.isValidElement(o)?d.cloneElement(o,void 0,a):null)}return d.createElement(pi,ge({},r,{ref:t}),n)});Ra.displayName="Slot";const pi=d.forwardRef((e,t)=>{const{children:n,...r}=e;return d.isValidElement(n)?d.cloneElement(n,{..._f(r,n.props),ref:t?Aa(t,n.ref):n.ref}):d.Children.count(n)>1?d.Children.only(null):null});pi.displayName="SlotClone";const _a=({children:e})=>d.createElement(d.Fragment,null,e);function Rf(e){return d.isValidElement(e)&&e.type===_a}function _f(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const Cf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jt=Cf.reduce((e,t)=>{const n=d.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Ra:t;return d.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),d.createElement(a,ge({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Pf(e,t){e&&Hi.flushSync(()=>e.dispatchEvent(t))}const Of=d.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?va.createPortal(d.createElement(Jt.div,ge({},i,{ref:t})),r):null}),Mf=Of;var Is=Object.prototype.hasOwnProperty;function Un(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Un(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Is.call(e,n)&&++r&&!Is.call(t,n)||!(n in t)||!Un(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function qn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var Br=function(t,n,r,i){this.name=t,this.fn=n,this.args=r,this.modifiers=i};Br.prototype._test=function(t){var n=this.fn;try{dn(this.modifiers.slice(),n,this)(t)}catch{n=function(){return!1}}try{return dn(this.modifiers.slice(),n,this)(t)}catch{return!1}};Br.prototype._check=function(t){try{dn(this.modifiers.slice(),this.fn,this)(t)}catch{if(dn(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!dn(this.modifiers.slice(),this.fn,this)(t))throw null};Br.prototype._testAsync=function(t){var n=this;return new Promise(function(r,i){Pa(n.modifiers.slice(),n.fn,n)(t).then(function(s){s?r(t):i(null)}).catch(function(s){return i(s)})})};function Ca(e,t){return t===void 0&&(t="simple"),typeof e=="object"?e[t]:e}function dn(e,t,n){if(e.length){var r=e.shift(),i=dn(e,t,n);return r.perform(i,n)}else return Ca(t)}function Pa(e,t,n){if(e.length){var r=e.shift(),i=Pa(e,t,n);return r.performAsync(i,n)}else return function(s){return Promise.resolve(Ca(t,"async")(s))}}var $f=function(t,n,r){this.name=t,this.perform=n,this.performAsync=r},Gi=function(e){function t(n,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=s}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),st=function(t,n){t===void 0&&(t=[]),n===void 0&&(n=[]),this.chain=t,this.nextRuleModifiers=n};st.prototype._applyRule=function(t,n){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new Br(n,t.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};st.prototype._applyModifier=function(t,n){return this.nextRuleModifiers.push(new $f(n,t.simple,t.async)),this};st.prototype._clone=function(){return new st(this.chain.slice(),this.nextRuleModifiers.slice())};st.prototype.test=function(t){return this.chain.every(function(n){return n._test(t)})};st.prototype.testAll=function(t){var n=[];return this.chain.forEach(function(r){try{r._check(t)}catch(i){n.push(new Gi(r,t,i))}}),n};st.prototype.check=function(t){this.chain.forEach(function(n){try{n._check(t)}catch(r){throw new Gi(n,t,r)}})};st.prototype.testAsync=function(t){var n=this;return new Promise(function(r,i){Oa(t,n.chain.slice(),r,i)})};function Oa(e,t,n,r){if(t.length){var i=t.shift();i._testAsync(e).then(function(){Oa(e,t,n,r)},function(s){r(new Gi(i,e,s))})}else n(e)}var ks=function(e,t){return t&&typeof e=="string"&&e.trim().length===0?!0:e==null};function Df(e,t){return t===void 0&&(t=!1),{simple:function(n){return ks(n,t)||e.check(n)===void 0},async:function(n){return ks(n,t)||e.testAsync(n)}}}function Le(){return typeof Proxy<"u"?Ma(new st):mi(new st)}var Gn={};Le.extend=function(e){Object.assign(Gn,e)};Le.clearCustomRules=function(){Gn={}};function Ma(e){return new Proxy(e,{get:function(n,r){if(r in n)return n[r];var i=Ma(e._clone());if(r in wr)return i._applyModifier(wr[r],r);if(r in Gn)return i._applyRule(Gn[r],r);if(r in gi)return i._applyRule(gi[r],r)}})}function mi(e){var t=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=mi(s._clone()),u=l._applyRule(i[o],o).apply(void 0,a);return u}}),s},n=t(gi,e),r=t(Gn,n);return Object.keys(wr).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=mi(r._clone());return s._applyModifier(wr[i],i)}})}),r}var wr={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(e){return function(t){return cr(t).some(function(n){try{return e(n)}catch{return!1}})}},async:function(e){return function(t){return Promise.all(cr(t).map(function(n){try{return e(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(e){return function(t){return t!==!1&&cr(t).every(e)}},async:function(e){return function(t){return Promise.all(cr(t).map(e)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(e,t){return function(n){return Ns(t)&&n&&typeof n=="object"?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then(function(r){return Ns(t)&&n&&typeof n=="object"?Object.keys(t.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function Ns(e){return e&&e.name==="schema"&&e.args.length>0&&typeof e.args[0]=="object"}function cr(e){return typeof e=="string"?e.split(""):e}var gi={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return e===void 0&&(e=!0),function(t){return typeof t=="number"&&(e||isFinite(t))}},integer:function(){return function(e){var t=Number.isInteger||If;return t(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return sn("string")},boolean:function(){return sn("boolean")},undefined:function(){return sn("undefined")},null:function(){return sn("null")},array:function(){return sn("array")},object:function(){return sn("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return typeof e=="boolean"||e===e.toLowerCase()&&e.trim()!==""}},uppercase:function(){return function(e){return e===e.toUpperCase()&&e.trim()!==""}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return e.length===0}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return kf(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(n){return e.some(function(r){return r.test(n)})}},optional:Df};function sn(e){return function(t){return Array.isArray(t)&&e==="array"||t===null&&e==="null"||typeof t===e}}function If(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function kf(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach(function(r){var i=e[r];try{i.check((t||{})[r])}catch(s){s.target=r,n.push(s)}}),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map(function(i){var s=e[i];return s.testAsync((t||{})[i]).catch(function(o){o.target=i,n.push(o)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var J="colors",Oe="sizes",k="space",Nf={gap:k,gridGap:k,columnGap:k,gridColumnGap:k,rowGap:k,gridRowGap:k,inset:k,insetBlock:k,insetBlockEnd:k,insetBlockStart:k,insetInline:k,insetInlineEnd:k,insetInlineStart:k,margin:k,marginTop:k,marginRight:k,marginBottom:k,marginLeft:k,marginBlock:k,marginBlockEnd:k,marginBlockStart:k,marginInline:k,marginInlineEnd:k,marginInlineStart:k,padding:k,paddingTop:k,paddingRight:k,paddingBottom:k,paddingLeft:k,paddingBlock:k,paddingBlockEnd:k,paddingBlockStart:k,paddingInline:k,paddingInlineEnd:k,paddingInlineStart:k,top:k,right:k,bottom:k,left:k,scrollMargin:k,scrollMarginTop:k,scrollMarginRight:k,scrollMarginBottom:k,scrollMarginLeft:k,scrollMarginX:k,scrollMarginY:k,scrollMarginBlock:k,scrollMarginBlockEnd:k,scrollMarginBlockStart:k,scrollMarginInline:k,scrollMarginInlineEnd:k,scrollMarginInlineStart:k,scrollPadding:k,scrollPaddingTop:k,scrollPaddingRight:k,scrollPaddingBottom:k,scrollPaddingLeft:k,scrollPaddingX:k,scrollPaddingY:k,scrollPaddingBlock:k,scrollPaddingBlockEnd:k,scrollPaddingBlockStart:k,scrollPaddingInline:k,scrollPaddingInlineEnd:k,scrollPaddingInlineStart:k,fontSize:"fontSizes",background:J,backgroundColor:J,backgroundImage:J,borderImage:J,border:J,borderBlock:J,borderBlockEnd:J,borderBlockStart:J,borderBottom:J,borderBottomColor:J,borderColor:J,borderInline:J,borderInlineEnd:J,borderInlineStart:J,borderLeft:J,borderLeftColor:J,borderRight:J,borderRightColor:J,borderTop:J,borderTopColor:J,caretColor:J,color:J,columnRuleColor:J,fill:J,outline:J,outlineColor:J,stroke:J,textDecorationColor:J,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Oe,minBlockSize:Oe,maxBlockSize:Oe,inlineSize:Oe,minInlineSize:Oe,maxInlineSize:Oe,width:Oe,minWidth:Oe,maxWidth:Oe,height:Oe,minHeight:Oe,maxHeight:Oe,flexBasis:Oe,gridTemplateColumns:Oe,gridTemplateRows:Oe,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Lf=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,En=()=>{const e=Object.create(null);return(t,n,...r)=>{const i=(s=>JSON.stringify(s,Lf))(t);return i in e?e[i]:e[i]=n(t,...r)}},Wt=Symbol.for("sxs.internal"),Vi=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),Ls=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:Bf}=Object.prototype,vi=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ff=/\s+(?![^()]*\))/,on=e=>t=>e(...typeof t=="string"?String(t).split(Ff):[t]),Bs={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:on((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:on((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:on((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:on((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:on((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:on((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},qr=/([\d.]+)([^]*)/,zf=(e,t)=>e.length?e.reduce((n,r)=>(n.push(...t.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):t,jf=(e,t)=>e in Hf&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${vi(e)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${vi(e)}:${r}fit-content`)+s):String(t),Hf={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},xt=e=>e?e+"-":"",$a=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?xt(t)+(a.includes("$")?"":xt(n))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),Uf=/\s*,\s*(?![^()]*\))/,Gf=Object.prototype.toString,un=(e,t,n,r,i)=>{let s,o,a;const c=(l,u,f)=>{let h,p;const m=g=>{for(h in g){const x=h.charCodeAt(0)===64,E=x&&Array.isArray(g[h])?g[h]:[g[h]];for(p of E){const T=/[A-Z]/.test(v=h)?v:v.replace(/-[^]/g,S=>S[1].toUpperCase()),A=typeof p=="object"&&p&&p.toString===Gf&&(!r.utils[T]||!u.length);if(T in r.utils&&!A){const S=r.utils[T];if(S!==o){o=S,m(S(p)),o=null;continue}}else if(T in Bs){const S=Bs[T];if(S!==a){a=S,m(S(p)),a=null;continue}}if(x&&(b=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(S,_,P,M,R,C)=>{const O=qr.test(_),N=.0625*(O?-1:1),[L,D]=O?[M,_]:[_,M];return"("+(P[0]==="="?"":P[0]===">"===O?"max-":"min-")+L+":"+(P[0]!=="="&&P.length===1?D.replace(qr,(H,B,K)=>Number(B)+N*(P===">"?1:-1)+K):D)+(R?") and ("+(R[0]===">"?"min-":"max-")+L+":"+(R.length===1?C.replace(qr,(H,B,K)=>Number(B)+N*(R===">"?-1:1)+K):C):"")+")"})),A){const S=x?f.concat(h):[...f],_=x?[...u]:zf(u,h.split(Uf));s!==void 0&&i(Fs(...s)),s=void 0,c(p,_,S)}else s===void 0&&(s=[[],u,f]),h=x||h.charCodeAt(0)!==36?h:`--${xt(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=A?p:typeof p=="number"?p&&T in Vf?String(p)+"px":String(p):$a(jf(T,p??""),r.prefix,r.themeMap[T]),s[0].push(`${x?`${h} `:`${vi(h)}:`}${p}`)}}var b,v};m(l),s!==void 0&&i(Fs(...s)),s=void 0};c(e,t,n)},Fs=(e,t,n)=>`${n.map(r=>`${r}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,Vf={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},zs=e=>String.fromCharCode(e+(e>25?39:97)),Kt=e=>(t=>{let n,r="";for(n=Math.abs(t);n>52;n=n/52|0)r=zs(n%52)+r;return zs(n%52)+r})(((t,n)=>{let r=n.length;for(;r;)t=33*t^n.charCodeAt(--r);return t})(5381,JSON.stringify(e))>>>0),Bn=["themed","global","styled","onevar","resonevar","allvar","inline"],Wf=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},Kf=e=>{let t;const n=()=>{const{cssRules:i}=t.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let c="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(c=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const l in t.rules)if(t.rules[l].group===s)return`--sxs{--sxs:${[...t.rules[l].cache].join(" ")}}${a}`;return s.cssRules.length?`${c}${a}`:""}return a}).join("")},r=()=>{if(t){const{rules:a,sheet:c}=t;if(!c.deleteRule){for(;Object(Object(c.cssRules)[0]).type===3;)c.cssRules.splice(0,1);c.cssRules=[]}for(const l in a)delete a[l]}const i=Object(e).styleSheets||[];for(const a of i)if(Wf(a)){for(let c=0,l=a.cssRules;l[c];++c){const u=Object(l[c]);if(u.type!==1)continue;const f=Object(l[c+1]);if(f.type!==4)continue;++c;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),m=Bn[p[0]];m&&(t||(t={sheet:a,reset:r,rules:{},toString:n}),t.rules[m]={group:f,index:c,cache:new Set(p)})}if(t)break}if(!t){const a=(c,l)=>({type:l,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return c==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:c}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:s,rules:o}=t;for(let a=Bn.length-1;a>=0;--a){const c=Bn[a];if(!o[c]){const l=Bn[a+1],u=o[l]?o[l].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[c]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}Yf(o[c])}};return r(),t},Yf=e=>{const t=e.group;let n=t.cssRules.length;e.apply=r=>{try{t.insertRule(r,n),++n}catch{}}},kn=Symbol(),Xf=En(),js=(e,t)=>Xf(e,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[Wt]){r.type==null&&(r.type=i[Wt].type);for(const s of i[Wt].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(qf(i,e));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Zf(e,r,t)}),qf=({variants:e,compoundVariants:t,defaultVariants:n,...r},i)=>{const s=`${xt(i.prefix)}c-${Kt(r)}`,o=[],a=[],c=Object.create(null),l=[];for(const h in n)c[h]=String(n[h]);if(typeof e=="object"&&e)for(const h in e){u=c,f=h,Bf.call(u,f)||(c[h]="undefined");const p=e[h];for(const m in p){const g={[h]:String(m)};String(m)==="undefined"&&l.push(h);const b=p[m],v=[g,b,!Ls(b)];o.push(v)}}var u,f;if(typeof t=="object"&&t)for(const h of t){let{css:p,...m}=h;p=typeof p=="object"&&p||{};for(const b in m)m[b]=String(m[b]);const g=[m,p,!Ls(p)];a.push(g)}return[s,r,o,a,c,l]},Zf=(e,t,n)=>{const[r,i,s,o]=Qf(t.composers),a=typeof t.type=="function"||t.type.$$typeof?(f=>{function h(){for(let p=0;p<h[kn].length;p++){const[m,g]=h[kn][p];f.rules[m].apply(g)}return h[kn]=[],null}return h[kn]=[],h.rules={},Bn.forEach(p=>h.rules[p]={apply:m=>h[kn].push([p,m])}),h})(n):null,c=(a||n).rules,l=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||Jf;const{css:h,...p}=f,m={};for(const v in s)if(delete p[v],v in f){let x=f[v];typeof x=="object"&&x?m[v]={"@initial":s[v],...x}:(x=String(x),m[v]=x!=="undefined"||o.has(v)?x:s[v])}else m[v]=s[v];const g=new Set([...i]);for(const[v,x,E,T]of t.composers){n.rules.styled.cache.has(v)||(n.rules.styled.cache.add(v),un(x,[`.${v}`],[],e,_=>{c.styled.apply(_)}));const A=Hs(E,m,e.media),S=Hs(T,m,e.media,!0);for(const _ of A)if(_!==void 0)for(const[P,M,R]of _){const C=`${v}-${Kt(M)}-${P}`;g.add(C);const O=(R?n.rules.resonevar:n.rules.onevar).cache,N=R?c.resonevar:c.onevar;O.has(C)||(O.add(C),un(M,[`.${C}`],[],e,L=>{N.apply(L)}))}for(const _ of S)if(_!==void 0)for(const[P,M]of _){const R=`${v}-${Kt(M)}-${P}`;g.add(R),n.rules.allvar.cache.has(R)||(n.rules.allvar.cache.add(R),un(M,[`.${R}`],[],e,C=>{c.allvar.apply(C)}))}}if(typeof h=="object"&&h){const v=`${r}-i${Kt(h)}-css`;g.add(v),n.rules.inline.cache.has(v)||(n.rules.inline.cache.add(v),un(h,[`.${v}`],[],e,x=>{c.inline.apply(x)}))}for(const v of String(f.className||"").trim().split(/\s+/))v&&g.add(v);const b=p.className=[...g].join(" ");return{type:t.type,className:b,selector:l,props:p,toString:()=>b,deferredInjector:a}};return Vi(u,{className:r,selector:l,[Wt]:t,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},Qf=e=>{let t="";const n=[],r={},i=[];for(const[s,,,,o,a]of e){t===""&&(t=s),n.push(s),i.push(...a);for(const c in o){const l=o[c];(r[c]===void 0||l!=="undefined"||a.includes(l))&&(r[c]=l)}}return[t,n,r,new Set(i)]},Hs=(e,t,n,r)=>{const i=[];e:for(let[s,o,a]of e){if(a)continue;let c,l=0,u=!1;for(c in s){const f=s[c];let h=t[c];if(h!==f){if(typeof h!="object"||!h)continue e;{let p,m,g=0;for(const b in h){if(f===String(h[b])){if(b!=="@initial"){const v=b.slice(1);(m=m||[]).push(v in n?n[v]:b.replace(/^@media ?/,"")),u=!0}l+=g,p=!0}++g}if(m&&m.length&&(o={["@media "+m.join(", ")]:o}),!p)continue e}}}(i[l]=i[l]||[]).push([r?"cv":`${c}-${s[c]}`,o,u])}return i},Jf={},ed=En(),td=(e,t)=>ed(e,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let s=Kt(i);if(!t.rules.global.cache.has(s)){if(t.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,t.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}un(i,[],[],e,o=>{t.rules.global.apply(o)})}}return""};return Vi(r,{toString:r})}),nd=En(),rd=(e,t)=>nd(e,()=>n=>{const r=`${xt(e.prefix)}k-${Kt(n)}`,i=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);const s=[];un(n,[],[],e,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;t.rules.global.apply(o)}return r};return Vi(i,{get name(){return i()},toString:i})}),id=class{constructor(e,t,n,r){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+xt(this.prefix)+xt(this.scale)+this.token}toString(){return this.computedValue}},sd=En(),od=(e,t)=>sd(e,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${xt(e.prefix)}t-${Kt(r)}`}`,s={},o=[];for(const c in r){s[c]={};for(const l in r[c]){const u=`--${xt(e.prefix)}${c}-${l}`,f=$a(String(r[c][l]),e.prefix,c);s[c][l]=new id(l,f,c,e.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const c=`${r===e.theme?":root,":""}.${n}{${o.join(";")}}`;t.rules.themed.apply(c)}return n};return{...s,get className(){return a()},selector:i,toString:a}}),ad=En(),cd=En(),ld=e=>{const t=(n=>{let r=!1;const i=ad(n,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},c=typeof s.root=="object"?s.root||null:globalThis.document||null,l=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:l,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...Nf},utils:typeof s.utils=="object"&&s.utils||{}},f=Kf(c),h={css:js(u,f),globalCss:td(u,f),keyframes:rd(u,f),createTheme:od(u,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(l)),h});return r||i.reset(),i})(e);return t.styled=(({config:n,sheet:r})=>cd(n,()=>{const i=js(n,r);return(...s)=>{const o=i(...s),a=o[Wt].type,c=y.forwardRef((l,u)=>{const f=l&&l.as||a,{props:h,deferredInjector:p}=o(l);return delete h.as,h.ref=u,p?y.createElement(y.Fragment,null,y.createElement(f,h),y.createElement(p,null)):y.createElement(f,h)});return c.className=o.className,c.displayName=`Styled.${a.displayName||a.name||a}`,c.selector=o.selector,c.toString=()=>o.selector,c[Wt]=o[Wt],c}}))(t),t};function ud(e,t,n){return Math.max(t,Math.min(e,n))}const Ae={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Us(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function Gs(e,t,n,r=.15){return r===0?ud(e,t,n):e<t?-Us(t-e,n-t,r)+t:e>n?+Us(e-n,n-t,r)+n:e}function fd(e,[t,n],[r,i]){const[[s,o],[a,c]]=e;return[Gs(t,s,o,r),Gs(n,a,c,i)]}function dd(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hd(e){var t=dd(e,"string");return typeof t=="symbol"?t:String(t)}function ke(e,t,n){return t=hd(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vs(Object(n),!0).forEach(function(r){ke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Da={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ws(e){return e?e[0].toUpperCase()+e.slice(1):""}const pd=["enter","leave"];function md(e=!1,t){return e&&!pd.includes(t)}function gd(e,t="",n=!1){const r=Da[e],i=r&&r[t]||t;return"on"+Ws(e)+Ws(i)+(md(n,i)?"Capture":"")}const vd=["gotpointercapture","lostpointercapture"];function bd(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=vd.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function yd(e,t=""){const n=Da[e],r=n&&n[t]||t;return e+r}function Fr(e){return"touches"in e}function Ia(e){return Fr(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function xd(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function Ed(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function ka(e){return Fr(e)?Ed(e)[0]:e}function wd(e){return xd(e).map(t=>t.identifier)}function Zr(e){const t=ka(e);return Fr(e)?t.identifier:t.pointerId}function Ks(e){const t=ka(e);return[t.clientX,t.clientY]}function Td(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return t}function Tr(e,...t){return typeof e=="function"?e(...t):e}function Sd(){}function Ad(...e){return e.length===0?Sd:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function Ys(e,t){return Object.assign({},t,e||{})}const Rd=32;class _d{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:i}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Tr(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Td(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const S=n._delta.map(Math.abs);Ae.addTo(n._distance,S)}this.axisIntent&&this.axisIntent(t);const[o,a]=n._movement,[c,l]=r.threshold,{_step:u,values:f}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=c&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=l&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=c&&Math.sign(o)*c),u[1]===!1&&(u[1]=Math.abs(a)>=l&&Math.sign(a)*l)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[S,_]=f;h[0]=u[0]!==!1?S-u[0]:0,h[1]=u[1]!==!1?_-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const p=n.offset,m=n._active&&!n._blocked||n.active;m&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Tr(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[g,b]=n.offset,[[v,x],[E,T]]=n._bounds;n.overflow=[g<v?-1:g>x?1:0,b<E?-1:b>T?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const A=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=fd(n._bounds,n.offset,A),n.delta=Ae.sub(n.offset,p),this.computeMovement(),m&&(!n.last||s>Rd)){n.delta=Ae.sub(n.offset,p);const S=n.delta.map(Math.abs);Ae.addTo(n.distance,S),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[S[0]/s,S[1]/s],n.timeDelta=s)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const i=this.handler(ce(ce(ce({},n),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Cd([e,t],n){const r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class Pd extends _d{constructor(...t){super(...t),ke(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ae.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ae.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Ia(t)]:r.axisThreshold;n.axis=Cd(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Od=e=>e,Xs=.15,Na={enabled(e=!0){return e},eventOptions(e,t,n){return ce(ce({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Xs,Xs];case!1:return[0,0];default:return Ae.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return Ae.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||Od},threshold(e){return Ae.toVector(e,0)}},Md=0,Zn=ce(ce({},Na),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=Md){return e},bounds(e={}){if(typeof e=="function")return s=>Zn.bounds(e(s));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),qs={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class $d extends Pd{constructor(...t){super(...t),ke(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Zn.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=Zr(t),r._pointerActive=!0,this.computeValues(Ks(t)),this.computeInitial(),n.preventScrollAxis&&Ia(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=Zr(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=Ks(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=Ae.sub(s,n._values),this.computeValues(s)),Ae.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=Zr(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,c]=n._delta,[l,u]=n._movement,[f,h]=r.swipe.velocity,[p,m]=r.swipe.distance,g=r.swipe.duration;if(n.elapsedTime<g){const b=Math.abs(a/n.timeDelta),v=Math.abs(c/n.timeDelta);b>f&&Math.abs(l)>p&&(n.swipe[0]=Math.sign(a)),v>h&&Math.abs(u)>m&&(n.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Dd(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=qs[t.key];if(n){const r=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Ae.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in qs&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Dd(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Qn=typeof window<"u"&&window.document&&window.document.createElement;function La(){return Qn&&"ontouchstart"in window}function Id(){return La()||Qn&&window.navigator.maxTouchPoints>1}function kd(){return Qn&&"onpointerdown"in window}function Nd(){return Qn&&"exitPointerLock"in window.document}function Ld(){try{return"constructor"in GestureEvent}catch{return!1}}const We={isBrowser:Qn,gesture:Ld(),touch:La(),touchscreen:Id(),pointer:kd(),pointerLock:Nd()},Bd=250,Fd=180,zd=.5,jd=50,Hd=250,Ud=10,Zs={mouse:0,touch:0,pen:8},Gd=ce(ce({},Zn),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&We.pointerLock,We.touch&&n?"touch":this.pointerLock?"mouse":We.pointer&&!i?"pointer":We.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?Bd:void 0,!(!We.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Ae.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:e=zd,distance:t=jd,duration:n=Hd}={}){return{velocity:this.transform(Ae.toVector(e)),distance:this.transform(Ae.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return Fd;case!1:return 0;default:return e}},axisThreshold(e){return e?ce(ce({},Zs),e):Zs},keyboardDisplacement(e=Ud){return e}});ce(ce({},Na),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!We.touch&&We.gesture)return"gesture";if(We.touch&&r)return"touch";if(We.touchscreen){if(We.pointer)return"pointer";if(We.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=Ys(Tr(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=Ys(Tr(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",Ae.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});ce(ce({},Zn),{},{mouseOnly:(e=!0)=>e});ce(ce({},Zn),{},{mouseOnly:(e=!0)=>e});const Ba=new Map,bi=new Map;function Vd(e){Ba.set(e.key,e.engine),bi.set(e.key,e.resolver)}const Wd={key:"drag",engine:$d,resolver:Gd};function Kd(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Yd(e,t){if(e==null)return{};var n=Kd(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const Xd={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=We.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},qd=["target","eventOptions","window","enabled","transform"];function gr(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=gr(e[r],i);break;case"boolean":i&&(n[r]=e[r]);break}return n}function Zd(e,t,n={}){const r=e,{target:i,eventOptions:s,window:o,enabled:a,transform:c}=r,l=Yd(r,qd);if(n.shared=gr({target:i,eventOptions:s,window:o,enabled:a,transform:c},Xd),t){const u=bi.get(t);n[t]=gr(ce({shared:n.shared},l),u)}else for(const u in l){const f=bi.get(u);f&&(n[u]=gr(ce({shared:n.shared},l[u]),f))}return n}class Fa{constructor(t,n){ke(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,i,s){const o=this._listeners,a=yd(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=ce(ce({},c),s);t.addEventListener(a,i,l);const u=()=>{t.removeEventListener(a,i,l),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class Qd{constructor(){ke(this,"_timeouts",new Map)}add(t,n,r=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...i))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Jd{constructor(t){ke(this,"gestures",new Set),ke(this,"_targetEventStore",new Fa(this)),ke(this,"gestureEventStores",{}),ke(this,"gestureTimeoutStores",{}),ke(this,"handlers",{}),ke(this,"config",{}),ke(this,"pointerIds",new Set),ke(this,"touchIds",new Set),ke(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),eh(this,t)}setEventIds(t){if(Fr(t))return this.touchIds=new Set(wd(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=Zd(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],c=Qs(r,a.eventOptions,!!i);if(a.enabled){const l=Ba.get(o);new l(this,t,o).bind(c)}}const s=Qs(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](ce(ce({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const s in r)r[s]=Ad(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:c}=bd(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:c})}}}}function an(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Fa(e,t),e.gestureTimeoutStores[t]=new Qd}function eh(e,t){t.drag&&an(e,"drag"),t.wheel&&an(e,"wheel"),t.scroll&&an(e,"scroll"),t.move&&an(e,"move"),t.pinch&&an(e,"pinch"),t.hover&&an(e,"hover")}const Qs=(e,t,n)=>(r,i,s,o={},a=!1)=>{var c,l;const u=(c=o.capture)!==null&&c!==void 0?c:t.capture,f=(l=o.passive)!==null&&l!==void 0?l:t.passive;let h=a?r:gd(r,i,u);n&&f&&(h+="Passive"),e[h]=e[h]||[],e[h].push(s)};function th(e,t={},n,r){const i=y.useMemo(()=>new Jd(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),y.useEffect(i.effect.bind(i)),y.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function nh(e,t){return Vd(Wd),th({drag:e},t||{},"drag")}function mt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function za(e,t=[]){let n=[];function r(s,o){const a=d.createContext(o),c=n.length;n=[...n,o];function l(f){const{scope:h,children:p,...m}=f,g=(h==null?void 0:h[e][c])||a,b=d.useMemo(()=>m,Object.values(m));return d.createElement(g.Provider,{value:b},p)}function u(f,h){const p=(h==null?void 0:h[e][c])||a,m=d.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,u]}const i=()=>{const s=n.map(o=>d.createContext(o));return function(a){const c=(a==null?void 0:a[e])||s;return d.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[r,rh(i,...t)]}function rh(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:l})=>{const f=c(s)[`__scope${l}`];return{...a,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function wn(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function ih(e,t=globalThis==null?void 0:globalThis.document){const n=wn(e);d.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const yi="dismissableLayer.update",sh="dismissableLayer.pointerDownOutside",oh="dismissableLayer.focusOutside";let Js;const ah=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ch=d.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:c,...l}=e,u=d.useContext(ah),[f,h]=d.useState(null),p=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,m]=d.useState({}),g=xn(t,P=>h(P)),b=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(v),E=f?b.indexOf(f):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,A=E>=x,S=lh(P=>{const M=P.target,R=[...u.branches].some(C=>C.contains(M));!A||R||(s==null||s(P),a==null||a(P),P.defaultPrevented||c==null||c())},p),_=uh(P=>{const M=P.target;[...u.branches].some(C=>C.contains(M))||(o==null||o(P),a==null||a(P),P.defaultPrevented||c==null||c())},p);return ih(P=>{E===u.layers.size-1&&(i==null||i(P),!P.defaultPrevented&&c&&(P.preventDefault(),c()))},p),d.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Js=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),eo(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Js)}},[f,p,r,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),eo())},[f,u]),d.useEffect(()=>{const P=()=>m({});return document.addEventListener(yi,P),()=>document.removeEventListener(yi,P)},[]),d.createElement(Jt.div,ge({},l,{ref:g,style:{pointerEvents:T?A?"auto":"none":void 0,...e.style},onFocusCapture:mt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:mt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:mt(e.onPointerDownCapture,S.onPointerDownCapture)}))});function lh(e,t=globalThis==null?void 0:globalThis.document){const n=wn(e),r=d.useRef(!1),i=d.useRef(()=>{});return d.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){ja(sh,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function uh(e,t=globalThis==null?void 0:globalThis.document){const n=wn(e),r=d.useRef(!1);return d.useEffect(()=>{const i=s=>{s.target&&!r.current&&ja(oh,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function eo(){const e=new CustomEvent(yi);document.dispatchEvent(e)}function ja(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Pf(i,s):i.dispatchEvent(s)}const mn=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},fh=tu["useId".toString()]||(()=>{});let dh=0;function hh(e){const[t,n]=d.useState(fh());return mn(()=>{e||n(r=>r??String(dh++))},[e]),e||(t?`radix-${t}`:"")}const ph=["top","right","bottom","left"],Dt=Math.min,Fe=Math.max,Sr=Math.round,lr=Math.floor,It=e=>({x:e,y:e}),mh={left:"right",right:"left",bottom:"top",top:"bottom"},gh={start:"end",end:"start"};function xi(e,t,n){return Fe(e,Dt(t,n))}function Et(e,t){return typeof e=="function"?e(t):e}function wt(e){return e.split("-")[0]}function Tn(e){return e.split("-")[1]}function Wi(e){return e==="x"?"y":"x"}function Ki(e){return e==="y"?"height":"width"}function Sn(e){return["top","bottom"].includes(wt(e))?"y":"x"}function Yi(e){return Wi(Sn(e))}function vh(e,t,n){n===void 0&&(n=!1);const r=Tn(e),i=Yi(e),s=Ki(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Ar(o)),[o,Ar(o)]}function bh(e){const t=Ar(e);return[Ei(e),t,Ei(t)]}function Ei(e){return e.replace(/start|end/g,t=>gh[t])}function yh(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function xh(e,t,n,r){const i=Tn(e);let s=yh(wt(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Ei)))),s}function Ar(e){return e.replace(/left|right|bottom|top/g,t=>mh[t])}function Eh(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ha(e){return typeof e!="number"?Eh(e):{top:e,right:e,bottom:e,left:e}}function Rr(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function to(e,t,n){let{reference:r,floating:i}=e;const s=Sn(t),o=Yi(t),a=Ki(o),c=wt(t),l=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(c){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Tn(t)){case"start":p[o]-=h*(n&&l?-1:1);break;case"end":p[o]+=h*(n&&l?-1:1);break}return p}const wh=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=to(l,r,c),h=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:b,fn:v}=a[g],{x,y:E,data:T,reset:A}=await v({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=x??u,f=E??f,p={...p,[b]:{...p[b],...T}},A&&m<=50&&(m++,typeof A=="object"&&(A.placement&&(h=A.placement),A.rects&&(l=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:u,y:f}=to(l,h,c)),g=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:p}};async function Vn(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Et(t,e),m=Ha(p),b=a[h?f==="floating"?"reference":"floating":f],v=Rr(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),x=f==="floating"?{...o.floating,x:r,y:i}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},A=Rr(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:E,strategy:c}):x);return{top:(v.top-A.top+m.top)/T.y,bottom:(A.bottom-v.bottom+m.bottom)/T.y,left:(v.left-A.left+m.left)/T.x,right:(A.right-v.right+m.right)/T.x}}const Th=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=Et(e,t)||{};if(l==null)return{};const f=Ha(u),h={x:n,y:r},p=Yi(i),m=Ki(p),g=await o.getDimensions(l),b=p==="y",v=b?"top":"left",x=b?"bottom":"right",E=b?"clientHeight":"clientWidth",T=s.reference[m]+s.reference[p]-h[p]-s.floating[m],A=h[p]-s.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let _=S?S[E]:0;(!_||!await(o.isElement==null?void 0:o.isElement(S)))&&(_=a.floating[E]||s.floating[m]);const P=T/2-A/2,M=_/2-g[m]/2-1,R=Dt(f[v],M),C=Dt(f[x],M),O=R,N=_-g[m]-C,L=_/2-g[m]/2+P,D=xi(O,L,N),H=!c.arrow&&Tn(i)!=null&&L!==D&&s.reference[m]/2-(L<O?R:C)-g[m]/2<0,B=H?L<O?L-O:L-N:0;return{[p]:h[p]+B,data:{[p]:D,centerOffset:L-D-B,...H&&{alignmentOffset:B}},reset:H}}}),Sh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=Et(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=wt(i),x=wt(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),T=h||(x||!g?[Ar(a)]:bh(a));!h&&m!=="none"&&T.push(...xh(a,g,m,E));const A=[a,...T],S=await Vn(t,b),_=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&_.push(S[v]),f){const O=vh(i,o,E);_.push(S[O[0]],S[O[1]])}if(P=[...P,{placement:i,overflows:_}],!_.every(O=>O<=0)){var M,R;const O=(((M=s.flip)==null?void 0:M.index)||0)+1,N=A[O];if(N)return{data:{index:O,overflows:P},reset:{placement:N}};let L=(R=P.filter(D=>D.overflows[0]<=0).sort((D,H)=>D.overflows[1]-H.overflows[1])[0])==null?void 0:R.placement;if(!L)switch(p){case"bestFit":{var C;const D=(C=P.map(H=>[H.placement,H.overflows.filter(B=>B>0).reduce((B,K)=>B+K,0)]).sort((H,B)=>H[1]-B[1])[0])==null?void 0:C[0];D&&(L=D);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function no(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ro(e){return ph.some(t=>e[t]>=0)}const Ah=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Et(e,t);switch(r){case"referenceHidden":{const s=await Vn(t,{...i,elementContext:"reference"}),o=no(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ro(o)}}}case"escaped":{const s=await Vn(t,{...i,altBoundary:!0}),o=no(s,n.floating);return{data:{escapedOffsets:o,escaped:ro(o)}}}default:return{}}}}};async function Rh(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=wt(n),a=Tn(n),c=Sn(n)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,f=Et(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),c?{x:p*u,y:h*l}:{x:h*l,y:p*u}}const _h=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,c=await Rh(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Ch=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:v,y:x}=b;return{x:v,y:x}}},...c}=Et(e,t),l={x:n,y:r},u=await Vn(t,c),f=Sn(wt(i)),h=Wi(f);let p=l[h],m=l[f];if(s){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+u[b],E=p-u[v];p=xi(x,p,E)}if(o){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=m+u[b],E=m-u[v];m=xi(x,m,E)}const g=a.fn({...t,[h]:p,[f]:m});return{...g,data:{x:g.x-n,y:g.y-r}}}}},Ph=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Et(e,t),u={x:n,y:r},f=Sn(i),h=Wi(f);let p=u[h],m=u[f];const g=Et(a,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const E=h==="y"?"height":"width",T=s.reference[h]-s.floating[E]+b.mainAxis,A=s.reference[h]+s.reference[E]-b.mainAxis;p<T?p=T:p>A&&(p=A)}if(l){var v,x;const E=h==="y"?"width":"height",T=["top","left"].includes(wt(i)),A=s.reference[f]-s.floating[E]+(T&&((v=o.offset)==null?void 0:v[f])||0)+(T?0:b.crossAxis),S=s.reference[f]+s.reference[E]+(T?0:((x=o.offset)==null?void 0:x[f])||0)-(T?b.crossAxis:0);m<A?m=A:m>S&&(m=S)}return{[h]:p,[f]:m}}}},Oh=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Et(e,t),c=await Vn(t,a),l=wt(n),u=Tn(n),f=Sn(n)==="y",{width:h,height:p}=r.floating;let m,g;l==="top"||l==="bottom"?(m=l,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=l,m=u==="end"?"top":"bottom");const b=p-c[m],v=h-c[g],x=!t.middlewareData.shift;let E=b,T=v;if(f){const S=h-c.left-c.right;T=u||x?Dt(v,S):S}else{const S=p-c.top-c.bottom;E=u||x?Dt(b,S):S}if(x&&!u){const S=Fe(c.left,0),_=Fe(c.right,0),P=Fe(c.top,0),M=Fe(c.bottom,0);f?T=h-2*(S!==0||_!==0?S+_:Fe(c.left,c.right)):E=p-2*(P!==0||M!==0?P+M:Fe(c.top,c.bottom))}await o({...t,availableWidth:T,availableHeight:E});const A=await i.getDimensions(s.floating);return h!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function kt(e){return Ua(e)?(e.nodeName||"").toLowerCase():"#document"}function ze(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function St(e){var t;return(t=(Ua(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ua(e){return e instanceof Node||e instanceof ze(e).Node}function Tt(e){return e instanceof Element||e instanceof ze(e).Element}function ot(e){return e instanceof HTMLElement||e instanceof ze(e).HTMLElement}function io(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ze(e).ShadowRoot}function Jn(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Xe(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Mh(e){return["table","td","th"].includes(kt(e))}function Xi(e){const t=qi(),n=Xe(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function $h(e){let t=gn(e);for(;ot(t)&&!zr(t);){if(Xi(t))return t;t=gn(t)}return null}function qi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zr(e){return["html","body","#document"].includes(kt(e))}function Xe(e){return ze(e).getComputedStyle(e)}function jr(e){return Tt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function gn(e){if(kt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||io(e)&&e.host||St(e);return io(t)?t.host:t}function Ga(e){const t=gn(e);return zr(t)?e.ownerDocument?e.ownerDocument.body:e.body:ot(t)&&Jn(t)?t:Ga(t)}function Wn(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Ga(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ze(i);return s?t.concat(o,o.visualViewport||[],Jn(i)?i:[],o.frameElement&&n?Wn(o.frameElement):[]):t.concat(i,Wn(i,[],n))}function Va(e){const t=Xe(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ot(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=Sr(n)!==s||Sr(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Zi(e){return Tt(e)?e:e.contextElement}function hn(e){const t=Zi(e);if(!ot(t))return It(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Va(t);let o=(s?Sr(n.width):n.width)/r,a=(s?Sr(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Dh=It(0);function Wa(e){const t=ze(e);return!qi()||!t.visualViewport?Dh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ih(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ze(e)?!1:t}function qt(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Zi(e);let o=It(1);t&&(r?Tt(r)&&(o=hn(r)):o=hn(e));const a=Ih(s,n,r)?Wa(s):It(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const h=ze(s),p=r&&Tt(r)?ze(r):r;let m=h,g=m.frameElement;for(;g&&r&&p!==m;){const b=hn(g),v=g.getBoundingClientRect(),x=Xe(g),E=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*b.x,T=v.top+(g.clientTop+parseFloat(x.paddingTop))*b.y;c*=b.x,l*=b.y,u*=b.x,f*=b.y,c+=E,l+=T,m=ze(g),g=m.frameElement}}return Rr({width:u,height:f,x:c,y:l})}const kh=[":popover-open",":modal"];function Ka(e){return kh.some(t=>{try{return e.matches(t)}catch{return!1}})}function Nh(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=St(r),a=t?Ka(t.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=It(1);const u=It(0),f=ot(r);if((f||!f&&!s)&&((kt(r)!=="body"||Jn(o))&&(c=jr(r)),ot(r))){const h=qt(r);l=hn(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function Lh(e){return Array.from(e.getClientRects())}function Ya(e){return qt(St(e)).left+jr(e).scrollLeft}function Bh(e){const t=St(e),n=jr(e),r=e.ownerDocument.body,i=Fe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Fe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ya(e);const a=-n.scrollTop;return Xe(r).direction==="rtl"&&(o+=Fe(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Fh(e,t){const n=ze(e),r=St(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=qi();(!l||l&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function zh(e,t){const n=qt(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ot(e)?hn(e):It(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function so(e,t,n){let r;if(t==="viewport")r=Fh(e,n);else if(t==="document")r=Bh(St(e));else if(Tt(t))r=zh(t,n);else{const i=Wa(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Rr(r)}function Xa(e,t){const n=gn(e);return n===t||!Tt(n)||zr(n)?!1:Xe(n).position==="fixed"||Xa(n,t)}function jh(e,t){const n=t.get(e);if(n)return n;let r=Wn(e,[],!1).filter(a=>Tt(a)&&kt(a)!=="body"),i=null;const s=Xe(e).position==="fixed";let o=s?gn(e):e;for(;Tt(o)&&!zr(o);){const a=Xe(o),c=Xi(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Jn(o)&&!c&&Xa(e,o))?r=r.filter(u=>u!==o):i=a,o=gn(o)}return t.set(e,r),r}function Hh(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?jh(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const f=so(t,u,i);return l.top=Fe(f.top,l.top),l.right=Dt(f.right,l.right),l.bottom=Dt(f.bottom,l.bottom),l.left=Fe(f.left,l.left),l},so(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Uh(e){const{width:t,height:n}=Va(e);return{width:t,height:n}}function Gh(e,t,n){const r=ot(t),i=St(t),s=n==="fixed",o=qt(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=It(0);if(r||!r&&!s)if((kt(t)!=="body"||Jn(i))&&(a=jr(t)),r){const f=qt(t,!0,s,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=Ya(i));const l=o.left+a.scrollLeft-c.x,u=o.top+a.scrollTop-c.y;return{x:l,y:u,width:o.width,height:o.height}}function oo(e,t){return!ot(e)||Xe(e).position==="fixed"?null:t?t(e):e.offsetParent}function qa(e,t){const n=ze(e);if(!ot(e)||Ka(e))return n;let r=oo(e,t);for(;r&&Mh(r)&&Xe(r).position==="static";)r=oo(r,t);return r&&(kt(r)==="html"||kt(r)==="body"&&Xe(r).position==="static"&&!Xi(r))?n:r||$h(e)||n}const Vh=async function(e){const t=this.getOffsetParent||qa,n=this.getDimensions;return{reference:Gh(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function Wh(e){return Xe(e).direction==="rtl"}const Kh={convertOffsetParentRelativeRectToViewportRelativeRect:Nh,getDocumentElement:St,getClippingRect:Hh,getOffsetParent:qa,getElementRects:Vh,getClientRects:Lh,getDimensions:Uh,getScale:hn,isElement:Tt,isRTL:Wh};function Yh(e,t){let n=null,r;const i=St(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const{left:l,top:u,width:f,height:h}=e.getBoundingClientRect();if(a||t(),!f||!h)return;const p=lr(u),m=lr(i.clientWidth-(l+f)),g=lr(i.clientHeight-(u+h)),b=lr(l),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-b+"px",threshold:Fe(0,Dt(1,c))||1};let E=!0;function T(A){const S=A[0].intersectionRatio;if(S!==c){if(!E)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},100)}E=!1}try{n=new IntersectionObserver(T,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,x)}n.observe(e)}return o(!0),s}function Xh(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Zi(e),u=i||s?[...l?Wn(l):[],...Wn(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=l&&a?Yh(l,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let m,g=c?qt(e):null;c&&b();function b(){const v=qt(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(b)}return n(),()=>{var v;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const qh=Ch,Zh=Sh,Qh=Oh,Jh=Ah,ao=Th,ep=Ph,tp=(e,t,n)=>{const r=new Map,i={platform:Kh,...n},s={...i.platform,_c:r};return wh(e,t,{...i,platform:s})},np=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ao({element:r.current,padding:i}).fn(n):{}:r?ao({element:r,padding:i}).fn(n):{}}}};var vr=typeof document<"u"?d.useLayoutEffect:d.useEffect;function _r(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!_r(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!_r(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Za(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function co(e,t){const n=Za(e);return Math.round(t*n)/n}function lo(e){const t=d.useRef(e);return vr(()=>{t.current=e}),t}function rp(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,f]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=d.useState(r);_r(h,r)||p(r);const[m,g]=d.useState(null),[b,v]=d.useState(null),x=d.useCallback(B=>{B!==S.current&&(S.current=B,g(B))},[]),E=d.useCallback(B=>{B!==_.current&&(_.current=B,v(B))},[]),T=s||m,A=o||b,S=d.useRef(null),_=d.useRef(null),P=d.useRef(u),M=c!=null,R=lo(c),C=lo(i),O=d.useCallback(()=>{if(!S.current||!_.current)return;const B={placement:t,strategy:n,middleware:h};C.current&&(B.platform=C.current),tp(S.current,_.current,B).then(K=>{const Q={...K,isPositioned:!0};N.current&&!_r(P.current,Q)&&(P.current=Q,Hi.flushSync(()=>{f(Q)}))})},[h,t,n,C]);vr(()=>{l===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const N=d.useRef(!1);vr(()=>(N.current=!0,()=>{N.current=!1}),[]),vr(()=>{if(T&&(S.current=T),A&&(_.current=A),T&&A){if(R.current)return R.current(T,A,O);O()}},[T,A,O,R,M]);const L=d.useMemo(()=>({reference:S,floating:_,setReference:x,setFloating:E}),[x,E]),D=d.useMemo(()=>({reference:T,floating:A}),[T,A]),H=d.useMemo(()=>{const B={position:n,left:0,top:0};if(!D.floating)return B;const K=co(D.floating,u.x),Q=co(D.floating,u.y);return a?{...B,transform:"translate("+K+"px, "+Q+"px)",...Za(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:Q}},[n,a,D.floating,u.x,u.y]);return d.useMemo(()=>({...u,update:O,refs:L,elements:D,floatingStyles:H}),[u,O,L,D,H])}const ip=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return d.createElement(Jt.svg,ge({},s,{ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:d.createElement("polygon",{points:"0,0 30,0 15,10"}))}),sp=ip;function op(e){const[t,n]=d.useState(void 0);return mn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,l=Array.isArray(c)?c[0]:c;o=l.inlineSize,a=l.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const Qa="Popper",[Ja,ec]=za(Qa),[ap,tc]=Ja(Qa),cp=e=>{const{__scopePopper:t,children:n}=e,[r,i]=d.useState(null);return d.createElement(ap,{scope:t,anchor:r,onAnchorChange:i},n)},lp="PopperAnchor",up=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=tc(lp,n),o=d.useRef(null),a=xn(t,o);return d.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:d.createElement(Jt.div,ge({},i,{ref:a}))}),nc="PopperContent",[fp,dp]=Ja(nc),hp=d.forwardRef((e,t)=>{var n,r,i,s,o,a,c,l;const{__scopePopper:u,side:f="bottom",sideOffset:h=0,align:p="center",alignOffset:m=0,arrowPadding:g=0,avoidCollisions:b=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:E="partial",hideWhenDetached:T=!1,updatePositionStrategy:A="optimized",onPlaced:S,..._}=e,P=tc(nc,u),[M,R]=d.useState(null),C=xn(t,Te=>R(Te)),[O,N]=d.useState(null),L=op(O),D=(n=L==null?void 0:L.width)!==null&&n!==void 0?n:0,H=(r=L==null?void 0:L.height)!==null&&r!==void 0?r:0,B=f+(p!=="center"?"-"+p:""),K=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Q=Array.isArray(v)?v:[v],ve=Q.length>0,de={padding:K,boundary:Q.filter(vp),altBoundary:ve},{refs:_e,floatingStyles:Ee,placement:Ze,isPositioned:Ce,middlewareData:Se}=rp({strategy:"fixed",placement:B,whileElementsMounted:(...Te)=>Xh(...Te,{animationFrame:A==="always"}),elements:{reference:P.anchor},middleware:[_h({mainAxis:h+H,alignmentAxis:m}),b&&qh({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?ep():void 0,...de}),b&&Zh({...de}),Qh({...de,apply:({elements:Te,rects:Ue,availableWidth:Ie,availableHeight:at})=>{const{width:ct,height:lt}=Ue.reference,Ge=Te.floating.style;Ge.setProperty("--radix-popper-available-width",`${Ie}px`),Ge.setProperty("--radix-popper-available-height",`${at}px`),Ge.setProperty("--radix-popper-anchor-width",`${ct}px`),Ge.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),O&&np({element:O,padding:g}),bp({arrowWidth:D,arrowHeight:H}),T&&Jh({strategy:"referenceHidden",...de})]}),[Qe,we]=rc(Ze),He=wn(S);mn(()=>{Ce&&(He==null||He())},[Ce,He]);const me=(i=Se.arrow)===null||i===void 0?void 0:i.x,Y=(s=Se.arrow)===null||s===void 0?void 0:s.y,Pe=((o=Se.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[he,Be]=d.useState();return mn(()=>{M&&Be(window.getComputedStyle(M).zIndex)},[M]),d.createElement("div",{ref:_e.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:Ce?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(a=Se.transformOrigin)===null||a===void 0?void 0:a.x,(c=Se.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},d.createElement(fp,{scope:u,placedSide:Qe,onArrowChange:N,arrowX:me,arrowY:Y,shouldHideArrow:Pe},d.createElement(Jt.div,ge({"data-side":Qe,"data-align":we},_,{ref:C,style:{..._.style,animation:Ce?void 0:"none",opacity:(l=Se.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}}))))}),pp="PopperArrow",mp={top:"bottom",right:"left",bottom:"top",left:"right"},gp=d.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=dp(pp,r),o=mp[s.placedSide];return d.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},d.createElement(sp,ge({},i,{ref:n,style:{...i.style,display:"block"}})))});function vp(e){return e!==null}const bp=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,o;const{placement:a,rects:c,middlewareData:l}=t,f=((n=l.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=f?0:e.arrowWidth,p=f?0:e.arrowHeight,[m,g]=rc(a),b={start:"0%",center:"50%",end:"100%"}[g],v=((r=(i=l.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,x=((s=(o=l.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+p/2;let E="",T="";return m==="bottom"?(E=f?b:`${v}px`,T=`${-p}px`):m==="top"?(E=f?b:`${v}px`,T=`${c.floating.height+p}px`):m==="right"?(E=`${-p}px`,T=f?b:`${x}px`):m==="left"&&(E=`${c.floating.width+p}px`,T=f?b:`${x}px`),{data:{x:E,y:T}}}});function rc(e){const[t,n="center"]=e.split("-");return[t,n]}const yp=cp,xp=up,Ep=hp,wp=gp;function Tp(e,t){return d.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const ic=e=>{const{present:t,children:n}=e,r=Sp(t),i=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),s=xn(r.ref,i.ref);return typeof n=="function"||r.isPresent?d.cloneElement(i,{ref:s}):null};ic.displayName="Presence";function Sp(e){const[t,n]=d.useState(),r=d.useRef({}),i=d.useRef(e),s=d.useRef("none"),o=e?"mounted":"unmounted",[a,c]=Tp(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const l=ur(r.current);s.current=a==="mounted"?l:"none"},[a]),mn(()=>{const l=r.current,u=i.current;if(u!==e){const h=s.current,p=ur(l);e?c("MOUNT"):p==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),mn(()=>{if(t){const l=f=>{const p=ur(r.current).includes(f.animationName);f.target===t&&p&&Hi.flushSync(()=>c("ANIMATION_END"))},u=f=>{f.target===t&&(s.current=ur(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:d.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function ur(e){return(e==null?void 0:e.animationName)||"none"}function Ap({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=Rp({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=wn(n),c=d.useCallback(l=>{if(s){const f=typeof l=="function"?l(e):l;f!==e&&a(f)}else i(l)},[s,e,i,a]);return[o,c]}function Rp({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,i=d.useRef(r),s=wn(t);return d.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const _p=d.forwardRef((e,t)=>d.createElement(Jt.span,ge({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),Cp=_p,[Hr,eE]=za("Tooltip",[ec]),Ur=ec(),Pp="TooltipProvider",wi="tooltip.open",[tE,Qi]=Hr(Pp),Ji="Tooltip",[Op,Gr]=Hr(Ji),Mp=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=e,c=Qi(Ji,e.__scopeTooltip),l=Ur(t),[u,f]=d.useState(null),h=hh(),p=d.useRef(0),m=o??c.disableHoverableContent,g=a??c.delayDuration,b=d.useRef(!1),[v=!1,x]=Ap({prop:r,defaultProp:i,onChange:_=>{_?(c.onOpen(),document.dispatchEvent(new CustomEvent(wi))):c.onClose(),s==null||s(_)}}),E=d.useMemo(()=>v?b.current?"delayed-open":"instant-open":"closed",[v]),T=d.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,x(!0)},[x]),A=d.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),S=d.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,x(!0)},g)},[g,x]);return d.useEffect(()=>()=>window.clearTimeout(p.current),[]),d.createElement(yp,l,d.createElement(Op,{scope:t,contentId:h,open:v,stateAttribute:E,trigger:u,onTriggerChange:f,onTriggerEnter:d.useCallback(()=>{c.isOpenDelayed?S():T()},[c.isOpenDelayed,S,T]),onTriggerLeave:d.useCallback(()=>{m?A():window.clearTimeout(p.current)},[A,m]),onOpen:T,onClose:A,disableHoverableContent:m},n))},uo="TooltipTrigger",$p=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Gr(uo,n),s=Qi(uo,n),o=Ur(n),a=d.useRef(null),c=xn(t,a,i.onTriggerChange),l=d.useRef(!1),u=d.useRef(!1),f=d.useCallback(()=>l.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),d.createElement(xp,ge({asChild:!0},o),d.createElement(Jt.button,ge({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:c,onPointerMove:mt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:mt(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:mt(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:mt(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:mt(e.onBlur,i.onClose),onClick:mt(e.onClick,i.onClose)})))}),Dp="TooltipPortal",[nE,Ip]=Hr(Dp,{forceMount:void 0}),Kn="TooltipContent",kp=d.forwardRef((e,t)=>{const n=Ip(Kn,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,o=Gr(Kn,e.__scopeTooltip);return d.createElement(ic,{present:r||o.open},o.disableHoverableContent?d.createElement(sc,ge({side:i},s,{ref:t})):d.createElement(Np,ge({side:i},s,{ref:t})))}),Np=d.forwardRef((e,t)=>{const n=Gr(Kn,e.__scopeTooltip),r=Qi(Kn,e.__scopeTooltip),i=d.useRef(null),s=xn(t,i),[o,a]=d.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:f}=r,h=d.useCallback(()=>{a(null),f(!1)},[f]),p=d.useCallback((m,g)=>{const b=m.currentTarget,v={x:m.clientX,y:m.clientY},x=jp(v,b.getBoundingClientRect()),E=Hp(v,x),T=Up(g.getBoundingClientRect()),A=Vp([...E,...T]);a(A),f(!0)},[f]);return d.useEffect(()=>()=>h(),[h]),d.useEffect(()=>{if(c&&u){const m=b=>p(b,u),g=b=>p(b,c);return c.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[c,u,p,h]),d.useEffect(()=>{if(o){const m=g=>{const b=g.target,v={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(b))||(u==null?void 0:u.contains(b)),E=!Gp(v,o);x?h():E&&(h(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,u,o,l,h]),d.createElement(sc,ge({},e,{ref:s}))}),[Lp,Bp]=Hr(Ji,{isInside:!1}),sc=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=e,c=Gr(Kn,n),l=Ur(n),{onClose:u}=c;return d.useEffect(()=>(document.addEventListener(wi,u),()=>document.removeEventListener(wi,u)),[u]),d.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),d.createElement(ch,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},d.createElement(Ep,ge({"data-state":c.stateAttribute},l,a,{ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),d.createElement(_a,null,r),d.createElement(Lp,{scope:n,isInside:!0},d.createElement(Cp,{id:c.contentId,role:"tooltip"},i||r))))}),Fp="TooltipArrow",zp=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Ur(n);return Bp(Fp,n).isInside?null:d.createElement(wp,ge({},i,r,{ref:t}))});function jp(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Hp(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Up(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Gp(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s].x,c=t[s].y,l=t[o].x,u=t[o].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(i=!i)}return i}function Vp(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Wp(t)}function Wp(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}const Kp=Mp,Yp=$p,Xp=kp,qp=zp;function Zp(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function te(e,t){if(e==null)return{};var n=Zp(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}let oe;(function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"})(oe||(oe={}));const Qp={[oe.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[oe.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[oe.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[oe.DUPLICATE_KEYS]:(e,t,n)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[oe.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[oe.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[oe.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[oe.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[oe.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[oe.INPUT_TYPE_OVERRIDE]:(e,t,n)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${n}\`.`],[oe.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function oc(e,t,...n){const[r,...i]=Qp[t](...n);console[e]("LEVA: "+r,...i)}const gt=oc.bind(null,"warn"),Jp=oc.bind(null,"log"),em=["value"],tm=["schema"],nm=["value"],ac=[],Zt={};function fo(e){let{value:t}=e,n=te(e,em);for(let r of ac){const i=r(t,n);if(i)return i}}function At(e,t){let{schema:n}=t,r=te(t,tm);if(e in Zt){gt(oe.ALREADY_REGISTERED_TYPE,e);return}ac.push((i,s)=>n(i,s)&&e),Zt[e]=r}function Qr(e,t,n,r){const{normalize:i}=Zt[e];if(i)return i(t,n,r);if(typeof t!="object"||!("value"in t))return{value:t};const{value:s}=t,o=te(t,nm);return{value:s,settings:o}}function rm(e,t,n,r,i,s){const{sanitize:o}=Zt[e];return o?o(t,n,r,i,s):t}function ho(e,t,n){const{format:r}=Zt[e];return r?r(t,n):t}function im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?po(Object(n),!0).forEach(function(r){im(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Nt=(e,t,n)=>e>n?n:e<t?t:e,sm=e=>{if(e===""||typeof e=="number")return e;try{const t=Mt(e);if(!isNaN(t))return t}catch{}return parseFloat(e)},om=Math.log(10);function mo(e){let t=Math.abs(+String(e).replace(".",""));if(t===0)return .01;for(;t!==0&&t%10===0;)t/=10;const n=Math.floor(Math.log(t)/om)+1,r=Math.floor(Math.log10(Math.abs(e))),i=Math.pow(10,r-n);return Math.max(i,.001)}const Cr=(e,t,n)=>n===t?0:(Nt(e,t,n)-t)/(n-t),Pr=(e,t,n)=>e*(n-t)+t,am=()=>"_"+Math.random().toString(36).substr(2,9),go=/\(([0-9+\-*/^ .]+)\)/,vo=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,bo=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,yo=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,xo=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Eo=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Mt(e){if(isNaN(Number(e)))if(go.test(e)){const t=e.replace(go,(n,r)=>String(Mt(r)));return Mt(t)}else if(vo.test(e)){const t=e.replace(vo,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return Mt(t)}else if(bo.test(e)){const t=e.replace(bo,(n,r,i)=>String(Number(r)*Number(i)));return Mt(t)}else if(yo.test(e)){const t=e.replace(yo,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Mt(t)}else if(xo.test(e)){const t=e.replace(xo,(n,r,i)=>String(Number(r)+Number(i)));return Mt(t)}else if(Eo.test(e)){const t=e.replace(Eo,(n,r,i)=>String(Number(r)-Number(i)));return Mt(t)}else return Number(e);return Number(e)}function cm(e,t){return t.reduce((n,r)=>(e&&e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}function lm(e,t){const n=z({},e);return t.forEach(r=>r in e&&delete n[r]),n}function um(e,t){return e.reduce((n,r,i)=>Object.assign(n,{[t[i]]:r}),{})}function cc(e){return Object.prototype.toString.call(e)==="[object Object]"}const fm=e=>cc(e)&&Object.keys(e).length===0;let et;(function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"})(et||(et={}));let tt;(function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"})(tt||(tt={}));const dm=["type","__customInput"],hm=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],pm=["type"];function lc(e,t,n={},r){var i,s;if(typeof e!="object"||Array.isArray(e))return{type:r,input:e,options:z({key:t,label:t,optional:!1,disabled:!1,order:0},n)};if("__customInput"in e){const{type:A,__customInput:S}=e,_=te(e,dm);return lc(S,t,_,A)}const{render:o,label:a,optional:c,order:l=0,disabled:u,hint:f,onChange:h,onEditStart:p,onEditEnd:m,transient:g}=e,b=te(e,hm),v=z({render:o,key:t,label:a??t,hint:f,transient:g??!!h,onEditStart:p,onEditEnd:m,disabled:u,optional:c,order:l},n);let{type:x}=b,E=te(b,pm);if(x=r??x,x in et)return{type:x,input:E,options:v};let T;return r&&cc(E)&&"value"in E?T=E.value:T=fm(E)?void 0:E,{type:x,input:T,options:z(z({},v),{},{onChange:h,optional:(i=v.optional)!==null&&i!==void 0?i:!1,disabled:(s=v.disabled)!==null&&s!==void 0?s:!1})}}function mm(e,t,n,r){const i=lc(e,t),{type:s,input:o,options:a}=i;if(s)return s in et?i:{type:s,input:Qr(s,o,n,r),options:a};let c=fo(o);return c?{type:c,input:Qr(c,o,n,r),options:a}:(c=fo({value:o}),c?{type:c,input:Qr(c,{value:o},n,r),options:a}:!1)}function wo(e,t,n,r,i){const{value:s,type:o,settings:a}=e;e.value=uc({type:o,value:s,settings:a},t,n,r),e.fromPanel=i}const gm=function(t,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+t,this.previousValue=n,this.error=r};function uc({type:e,value:t,settings:n},r,i,s){const o=e!=="SELECT"&&typeof r=="function"?r(t):r;let a;try{a=rm(e,o,n,t,i,s)}catch(c){throw new gm(`The value \`${r}\` did not result in a correct value.`,t,c)}return Un(a,t)?t:a}const fc=(e,t,n=!1)=>{let r=0;return function(){const i=arguments,s=n&&!r,o=()=>e.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,t),s&&o()}},dc=e=>e.shiftKey?5:e.altKey?1/5:1;function vm(e,t){const n=console.error;console.error=()=>{},va.render(e,t),console.error=n}const bm=["value"],ym=["min","max"],xm=e=>{if(typeof e=="number")return!0;if(typeof e=="string"){const t=parseFloat(e);return isNaN(t)?!1:e.substring((""+t).length).trim().length<4}return!1},hc=(e,{min:t=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(e);if(e===""||isNaN(i))throw Error("Invalid number");const s=Nt(i,t,n);return r?s+r:s},Em=(e,{pad:t=0,suffix:n})=>{const r=parseFloat(e).toFixed(t);return n?r+n:r},pc=e=>{let{value:t}=e,n=te(e,bm);const{min:r=-1/0,max:i=1/0}=n,s=te(n,ym);let o=parseFloat(t);const a=typeof t=="string"?t.substring((""+o).length):void 0;o=Nt(o,r,i);let c=n.step;c||(Number.isFinite(r)?Number.isFinite(i)?c=+(Math.abs(i-r)/100).toPrecision(1):c=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(c=+(Math.abs(i-o)/100).toPrecision(1)));const l=c?mo(c)*10:mo(o);c=c||l/10;const u=Math.round(Nt(Math.log10(1/l),0,2));return{value:a?o+a:o,settings:z({initialValue:o,step:c,pad:u,min:r,max:i,suffix:a},s)}},mc=(e,{step:t,initialValue:n})=>{const r=Math.round((e-n)/t);return n+r*t};var gc=Object.freeze({__proto__:null,schema:xm,sanitize:hc,format:Em,normalize:pc,sanitizeStep:mc});function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}const vc=d.createContext({});function Re(){return d.useContext(vc)}const es=d.createContext(null),bc=d.createContext(null),yc=d.createContext(null);function er(){return d.useContext(bc)}function wm(){return d.useContext(yc)}const xc=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function fr(e,t){const[n,r]=e.split(" "),i={};return n!=="none"&&(i.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${n!=="default"&&n||t.borderColor}`),r&&(i.backgroundColor=r),i}const Nn={$inputStyle:()=>e=>fr(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>fr(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>fr(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>fr(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:F,css:rE,createTheme:Tm,globalCss:Sm,keyframes:iE}=ld({prefix:"leva",theme:xc(),utils:z(z({},Nn),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":Nn.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":Nn.$focusStyle()(e)}),$hover:e=>({"&:hover":Nn.$hoverStyle()(e)}),$active:e=>({"&:active":Nn.$activeStyle()(e)})})}),Am=Sm({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Rm(e){const t=xc();if(!e)return{theme:t,className:""};Object.keys(e).forEach(r=>{Object.assign(t[r],e[r])});const n=Tm(t);return{theme:t,className:n.className}}function bt(e,t){const{theme:n}=d.useContext(es);if(!(e in n)||!(t in n[e]))return gt(oe.THEME_ERROR,e,t),"";let r=t;for(;;){let i=n[e][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const Ec=F("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),wc=F("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Ec}`]:{paddingLeft:0}}),_m=F(wc,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Cm=F("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),Pm=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Om=["onUpdate"];function ts(e){let{innerLabel:t,value:n,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:c="text",rows:l=0}=e,u=te(e,Pm);const{id:f,emitOnEditStart:h,emitOnEditEnd:p,disabled:m}=Re(),g=a||f,b=d.useRef(null),v=l>0,x=v?"textarea":"input",E=d.useCallback(S=>_=>{const P=_.currentTarget.value;S(P)},[]);y.useEffect(()=>{const S=b.current,_=E(P=>{r(P),p()});return S==null||S.addEventListener("blur",_),()=>S==null?void 0:S.removeEventListener("blur",_)},[E,r,p]);const T=d.useCallback(S=>{S.key==="Enter"&&E(r)(S)},[E,r]),A=Object.assign({as:x},v?{rows:l}:{},u);return y.createElement(Cm,{textArea:v},t&&typeof t=="string"?y.createElement(wc,null,t):t,y.createElement(Ec,fe({levaType:o,ref:b,id:g,type:c,autoComplete:"off",spellCheck:"false",value:n,onChange:E(i),onFocus:()=>h(),onKeyPress:T,onKeyDown:s,disabled:m},A)))}function Mm(e){let{onUpdate:t}=e,n=te(e,Om);const r=d.useCallback(s=>t(sm(s)),[t]),i=d.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;t(c=>parseFloat(c)+o*a)}},[t]);return y.createElement(ts,fe({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const Or=F("div",{}),Ti=F("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),$m=F("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Ti}::after`]:{opacity:.6},[`${Or}:hover > & + ${Ti}::after`]:{opacity:.6},[`${Or}:hover > & > svg`]:{opacity:1}}),Tc=F("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${Or}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Sc=F("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${Tc} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),Ac=F(Sc,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Dm=F("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Im=F("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Si=F("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),km=F("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Si}`]:{pointerEvents:"auto"}}}}}),Rc=F("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),Nm=F("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Lm=F(qp,{fill:"$toolTipBackground"});function ns({children:e}){const{className:t}=d.useContext(es);return y.createElement(Mf,{className:t},e)}const Bm=["align"];function Fm(){const{id:e,disable:t,disabled:n}=Re();return y.createElement(y.Fragment,null,y.createElement(Im,{id:e+"__disable",type:"checkbox",checked:!n,onChange:()=>t(!n)}),y.createElement("label",{htmlFor:e+"__disable"}))}function zm(e){const{id:t,optional:n,hint:r}=Re(),i=e.htmlFor||(t?{htmlFor:t}:null),s=!r&&typeof e.children=="string"?{title:e.children}:null;return y.createElement(y.Fragment,null,n&&y.createElement(Fm,null),r!==void 0?y.createElement(Kp,null,y.createElement(Yp,{asChild:!0},y.createElement(Si,fe({},i,e))),y.createElement(Xp,{side:"top",sideOffset:2},y.createElement(Nm,null,r,y.createElement(Lm,null)))):y.createElement(Si,fe({},i,s,e)))}function nt(e){let{align:t}=e,n=te(e,Bm);const{value:r,label:i,key:s,disabled:o}=Re(),{hideCopyButton:a}=wm(),c=!a&&s!==void 0,[l,u]=d.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{gt(oe.CLIPBOARD_ERROR,{[s]:r})}};return y.createElement(Dm,{align:t,onPointerLeave:()=>u(!1)},y.createElement(zm,n),c&&!o&&y.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},l?y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},y.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),y.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):y.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},y.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),y.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const jm=["toggled"],Hm=F("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function rs(e){let{toggled:t}=e,n=te(e,jm);return y.createElement(Hm,fe({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},n),y.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Um=["input"];function qe(e){let{input:t}=e,n=te(e,Um);return t?y.createElement(Ac,n):y.createElement(Sc,n)}function _c({value:e,type:t,settings:n,setValue:r}){const[i,s]=d.useState(ho(t,e,n)),o=d.useRef(e),a=d.useRef(n);a.current=n;const c=d.useCallback(u=>s(ho(t,u,a.current)),[t]),l=d.useCallback(u=>{try{r(u)}catch(f){const{type:h,previousValue:p}=f;if(h!=="LEVA_ERROR")throw f;c(p)}},[c,r]);return d.useEffect(()=>{Un(e,o.current)||c(e),o.current=e},[e,c]),{displayValue:i,onChange:s,onUpdate:l}}function tr(e,t){const{emitOnEditStart:n,emitOnEditEnd:r}=Re();return nh(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const s=e(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},t)}function Gm(e){const t=d.useRef(null),n=d.useRef(null),r=d.useRef(!1);return d.useEffect(()=>{const i=fc(()=>{t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[e]),d.useEffect(()=>{n.current=t.current.getContext("2d")},[]),[t,n]}function Cc(){const e=d.useRef(null),t=d.useRef({x:0,y:0}),n=d.useCallback(r=>{Object.assign(t.current,r),e.current&&(e.current.style.transform=`translate3d(${t.current.x}px, ${t.current.y}px, 0)`)},[]);return[e,n]}const Vm=["__refCount"],Jr=(e,t)=>{if(!e[t])return null;const n=e[t];return te(n,Vm)};function Wm(e){const t=er(),[n,r]=d.useState(Jr(t.getData(),e)),i=d.useCallback(l=>t.setValueAtPath(e,l,!0),[e,t]),s=d.useCallback(l=>t.setSettingsAtPath(e,l),[e,t]),o=d.useCallback(l=>t.disableInputAtPath(e,l),[e,t]),a=d.useCallback(()=>t.emitOnEditStart(e),[e,t]),c=d.useCallback(()=>t.emitOnEditEnd(e),[e,t]);return d.useEffect(()=>{r(Jr(t.getData(),e));const l=t.useStore.subscribe(u=>Jr(u.data,e),r,{equalityFn:qn});return()=>l()},[t,e]),[n,{set:i,setSettings:s,disable:o,storeId:t.storeId,emitOnEditStart:a,emitOnEditEnd:c}]}const Km=F("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Pc=F("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Ai=F("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),Oc=F("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Mc=F("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Ym({value:e,min:t,max:n,onDrag:r,step:i,initialValue:s}){const o=d.useRef(null),a=d.useRef(null),c=d.useRef(0),l=bt("sizes","scrubberWidth"),u=tr(({event:h,first:p,xy:[m],movement:[g],memo:b})=>{if(p){const{width:x,left:E}=o.current.getBoundingClientRect();c.current=x-parseFloat(l),b=(h==null?void 0:h.target)===a.current?e:Pr((m-E)/x,t,n)}const v=b+Pr(g/c.current,0,n-t);return r(mc(v,{step:i,initialValue:s})),b}),f=Cr(e,t,n);return y.createElement(Oc,fe({ref:o},u()),y.createElement(Pc,null,y.createElement(Mc,{style:{left:0,right:`${(1-f)*100}%`}})),y.createElement(Ai,{ref:a,style:{left:`calc(${f} * (100% - ${l}))`}}))}const Xm=y.memo(({label:e,onUpdate:t,step:n,innerLabelTrim:r})=>{const[i,s]=d.useState(!1),o=tr(({active:a,delta:[c],event:l,memo:u=0})=>(s(a),u+=c/2,Math.abs(u)>=1&&(t(f=>parseFloat(f)+Math.floor(u)*n*dc(l)),u=0),u));return y.createElement(_m,fe({dragging:i,title:e.length>1?e:""},o()),e.slice(0,r))});function $c({label:e,id:t,displayValue:n,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&y.createElement(Xm,{label:e,step:s.step,onUpdate:r,innerLabelTrim:o});return y.createElement(Mm,{id:t,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function qm(){const e=Re(),{label:t,value:n,onUpdate:r,settings:i,id:s}=e,{min:o,max:a}=i,c=a!==1/0&&o!==-1/0;return y.createElement(qe,{input:!0},y.createElement(nt,null,t),y.createElement(Km,{hasRange:c},c&&y.createElement(Ym,fe({value:parseFloat(n),onDrag:r},i)),y.createElement($c,fe({},e,{id:s,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:Zm}=gc,Qm=te(gc,["sanitizeStep"]);var Jm=z({component:qm},Qm);const eg=(e,t)=>Le().schema({options:Le().passesAnyOf(Le().object(),Le().array())}).test(t),tg=(e,{values:t})=>{if(t.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},ng=(e,{values:t})=>t.indexOf(e),rg=e=>{let{value:t,options:n}=e,r,i;return Array.isArray(n)?(i=n,r=n.map(s=>String(s))):(i=Object.values(n),r=Object.keys(n)),"value"in e?i.includes(t)||(r.unshift(String(t)),i.unshift(t)):t=i[0],Object.values(n).includes(t)||(n[String(t)]=t),{value:t,settings:{keys:r,values:i}}};var ig=Object.freeze({__proto__:null,schema:eg,sanitize:tg,format:ng,normalize:rg});const sg=F("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Ri=F("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),og=F("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Ri}:focus + &`]:{$focusStyle:""},[`${Ri}:hover + &`]:{$hoverStyle:""}});function ag({displayValue:e,value:t,onUpdate:n,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,c=d.useRef();return t===a[e]&&(c.current=o[e]),y.createElement(sg,null,y.createElement(Ri,{id:r,value:e,onChange:l=>n(a[Number(l.currentTarget.value)]),disabled:s},o.map((l,u)=>y.createElement("option",{key:l,value:u},l))),y.createElement(og,null,c.current),y.createElement(rs,{toggled:!0}))}function cg(){const{label:e,value:t,displayValue:n,onUpdate:r,id:i,disabled:s,settings:o}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(ag,{id:i,value:t,displayValue:n,onUpdate:r,settings:o,disabled:s}))}var lg=z({component:cg},ig);const ug=e=>Le().string().test(e),fg=e=>{if(typeof e!="string")throw Error("Invalid string");return e},dg=({value:e,editable:t=!0,rows:n=!1})=>({value:e,settings:{editable:t,rows:typeof n=="number"?n:n?5:0}});var hg=Object.freeze({__proto__:null,schema:ug,sanitize:fg,normalize:dg});const pg=["displayValue","onUpdate","onChange","editable"],mg=F("div",{whiteSpace:"pre-wrap"});function gg(e){let{displayValue:t,onUpdate:n,onChange:r,editable:i=!0}=e,s=te(e,pg);return i?y.createElement(ts,fe({value:t,onUpdate:n,onChange:r},s)):y.createElement(mg,null,t)}function vg(){const{label:e,settings:t,displayValue:n,onUpdate:r,onChange:i}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(gg,fe({displayValue:n,onUpdate:r,onChange:i},t)))}var bg=z({component:vg},hg);const yg=e=>Le().boolean().test(e),xg=e=>{if(typeof e!="boolean")throw Error("Invalid boolean");return e};var Eg=Object.freeze({__proto__:null,schema:yg,sanitize:xg});const wg=F("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Tg({value:e,onUpdate:t,id:n,disabled:r}){return y.createElement(wg,null,y.createElement("input",{id:n,type:"checkbox",checked:e,onChange:i=>t(i.currentTarget.checked),disabled:r}),y.createElement("label",{htmlFor:n},y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Sg(){const{label:e,value:t,onUpdate:n,disabled:r,id:i}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(Tg,{value:t,onUpdate:n,id:i,disabled:r}))}var Ag=z({component:Sg},Eg);const Rg=["locked"];function _g({value:e,id:t,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:s}){const o=d.useRef(e[n]);o.current=e[n];const a=d.useCallback(l=>i({[n]:uc({type:"NUMBER",value:o.current,settings:r},l)}),[i,r,n]),c=_c({type:"NUMBER",value:e[n],settings:r,setValue:a});return y.createElement($c,{id:t,label:n,value:e[n],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:r,innerLabelTrim:s})}const Cg=F("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Pg(e){let{locked:t}=e,n=te(e,Rg);return y.createElement("svg",fe({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t?y.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):y.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function is({value:e,onUpdate:t,settings:n,innerLabelTrim:r}){const{id:i,setSettings:s}=Re(),{lock:o,locked:a}=n;return y.createElement(Cg,{withLock:o},o&&y.createElement(Pg,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(e).map((c,l)=>y.createElement(_g,{id:l===0?i:`${i}.${c}`,key:c,valueKey:c,value:e,settings:n[c],onUpdate:t,innerLabelTrim:r})))}const Dc=(e,t)=>{const n={};let r=0,i=1/0;Object.entries(e).forEach(([s,o])=>{n[s]=pc(z({value:o},t[s])).settings,r=Math.max(r,n[s].step),i=Math.min(i,n[s].pad)});for(let s in n){const{step:o,min:a,max:c}=t[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(c))&&(n[s].step=r,n[s].pad=i)}return n},Og=["lock"],Mg=["value"];function $g(e){const t=Le().array().length(e).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===e&&i.every(s=>isFinite(s))};return r=>t.test(r)||n(r)}function Dg(e){return Array.isArray(e)?"array":"object"}function zn(e,t,n){return Dg(e)===t?e:t==="array"?Object.values(e):um(e,n)}const Ig=(e,t,n)=>{const r=zn(e,"object",t.keys);for(let o in r)r[o]=hc(r[o],t[o]);const i=Object.keys(r);let s={};if(i.length===t.keys.length)s=r;else{const o=zn(n,"object",t.keys);if(i.length===1&&t.locked){const a=i[0],c=r[a],l=o[a],u=l!==0?c/l:1;for(let f in o)f===a?s[a]=c:s[f]=o[f]*u}else s=z(z({},o),r)}return zn(s,t.format,t.keys)},kg=(e,t)=>zn(e,"object",t.keys),Ng=e=>!!e&&("step"in e||"min"in e||"max"in e);function Lg(e,t,n=[]){const{lock:r=!1}=t,i=te(t,Og),s=Array.isArray(e)?"array":"object",o=s==="object"?Object.keys(e):n,a=zn(e,"object",o),c=Ng(i)?o.reduce((u,f)=>Object.assign(u,{[f]:i}),{}):i,l=Dc(a,c);return{value:s==="array"?e:a,settings:z(z({},l),{},{format:s,keys:o,lock:r,locked:!1})}}function Ic(e){return{schema:$g(e.length),normalize:t=>{let{value:n}=t,r=te(t,Mg);return Lg(n,r,e)},format:(t,n)=>kg(t,n),sanitize:(t,n,r)=>Ig(t,n,r)}}var Bg={grad:.9,turn:360,rad:360/(2*Math.PI)},pt=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},xe=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Ye=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},kc=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},To=function(e){return{r:Ye(e.r,0,255),g:Ye(e.g,0,255),b:Ye(e.b,0,255),a:Ye(e.a)}},ei=function(e){return{r:xe(e.r),g:xe(e.g),b:xe(e.b),a:xe(e.a,3)}},Fg=/^#([0-9a-f]{3,8})$/i,dr=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Nc=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),o=s-Math.min(t,n,r),a=o?s===t?(n-r)/o:s===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},Lc=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),o=r*(1-n),a=r*(1-(t-s)*n),c=r*(1-(1-t+s)*n),l=s%6;return{r:255*[r,a,o,o,c,r][l],g:255*[c,r,r,a,o,o][l],b:255*[o,o,c,r,r,a][l],a:i}},So=function(e){return{h:kc(e.h),s:Ye(e.s,0,100),l:Ye(e.l,0,100),a:Ye(e.a)}},Ao=function(e){return{h:xe(e.h),s:xe(e.s),l:xe(e.l),a:xe(e.a,3)}},Ro=function(e){return Lc((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},jn=function(e){return{h:(t=Nc(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},zg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ug=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_i={string:[[function(e){var t=Fg.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?xe(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?xe(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Hg.exec(e)||Ug.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:To({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=zg.exec(e)||jg.exec(e);if(!t)return null;var n,r,i=So({h:(n=t[1],r=t[2],r===void 0&&(r="deg"),Number(n)*(Bg[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ro(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=i===void 0?1:i;return pt(t)&&pt(n)&&pt(r)?To({r:Number(t),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,s=i===void 0?1:i;if(!pt(t)||!pt(n)||!pt(r))return null;var o=So({h:Number(t),s:Number(n),l:Number(r),a:Number(s)});return Ro(o)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,s=i===void 0?1:i;if(!pt(t)||!pt(n)||!pt(r))return null;var o=function(a){return{h:kc(a.h),s:Ye(a.s,0,100),v:Ye(a.v,0,100),a:Ye(a.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(s)});return Lc(o)},"hsv"]]},_o=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},Bc=function(e){return typeof e=="string"?_o(e.trim(),_i.string):typeof e=="object"&&e!==null?_o(e,_i.object):[null,void 0]},Gg=function(e){return Bc(e)[1]},ti=function(e,t){var n=jn(e);return{h:n.h,s:Ye(n.s+100*t,0,100),l:n.l,a:n.a}},ni=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Co=function(e,t){var n=jn(e);return{h:n.h,s:n.s,l:Ye(n.l+100*t,0,100),a:n.a}},Ci=function(){function e(t){this.parsed=Bc(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return xe(ni(this.rgba),2)},e.prototype.isDark=function(){return ni(this.rgba)<.5},e.prototype.isLight=function(){return ni(this.rgba)>=.5},e.prototype.toHex=function(){return t=ei(this.rgba),n=t.r,r=t.g,i=t.b,o=(s=t.a)<1?dr(xe(255*s)):"","#"+dr(n)+dr(r)+dr(i)+o;var t,n,r,i,s,o},e.prototype.toRgb=function(){return ei(this.rgba)},e.prototype.toRgbString=function(){return t=ei(this.rgba),n=t.r,r=t.g,i=t.b,(s=t.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var t,n,r,i,s},e.prototype.toHsl=function(){return Ao(jn(this.rgba))},e.prototype.toHslString=function(){return t=Ao(jn(this.rgba)),n=t.h,r=t.s,i=t.l,(s=t.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var t,n,r,i,s},e.prototype.toHsv=function(){return t=Nc(this.rgba),{h:xe(t.h),s:xe(t.s),v:xe(t.v),a:xe(t.a,3)};var t},e.prototype.invert=function(){return Me({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Me(ti(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Me(ti(this.rgba,-t))},e.prototype.grayscale=function(){return Me(ti(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Me(Co(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Me(Co(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Me({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):xe(this.rgba.a,3);var n},e.prototype.hue=function(t){var n=jn(this.rgba);return typeof t=="number"?Me({h:t,s:n.s,l:n.l,a:n.a}):xe(n.h)},e.prototype.isEqual=function(t){return this.toHex()===Me(t).toHex()},e}(),Me=function(e){return e instanceof Ci?e:new Ci(e)},Po=[],Vg=function(e){e.forEach(function(t){Po.indexOf(t)<0&&(t(Ci,_i),Po.push(t))})};function Wg(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=r[this.toHex()];if(l)return l;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,h="black";if(!s.length)for(var p in n)s[p]=new e(n[p]).toRgb();for(var m in n){var g=(a=u,c=s[m],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));g<f&&(f=g,h=m)}return h}},t.string.push([function(o){var a=o.toLowerCase(),c=a==="transparent"?"#0000":n[a];return c?new e(c).toRgb():null},"name"])}function An(){return(An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ss(e,t){if(e==null)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}function Pi(e){var t=d.useRef(e),n=d.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var vn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},Hn=function(e){return"touches"in e},Oi=function(e){return e&&e.ownerDocument.defaultView||self},Oo=function(e,t,n){var r=e.getBoundingClientRect(),i=Hn(t)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(t.touches,n):t;return{left:vn((i.pageX-(r.left+Oi(e).pageXOffset))/r.width),top:vn((i.pageY-(r.top+Oi(e).pageYOffset))/r.height)}},Mo=function(e){!Hn(e)&&e.preventDefault()},os=y.memo(function(e){var t=e.onMove,n=e.onKey,r=ss(e,["onMove","onKey"]),i=d.useRef(null),s=Pi(t),o=Pi(n),a=d.useRef(null),c=d.useRef(!1),l=d.useMemo(function(){var p=function(b){Mo(b),(Hn(b)?b.touches.length>0:b.buttons>0)&&i.current?s(Oo(i.current,b,a.current)):g(!1)},m=function(){return g(!1)};function g(b){var v=c.current,x=Oi(i.current),E=b?x.addEventListener:x.removeEventListener;E(v?"touchmove":"mousemove",p),E(v?"touchend":"mouseup",m)}return[function(b){var v=b.nativeEvent,x=i.current;if(x&&(Mo(v),!function(T,A){return A&&!Hn(T)}(v,c.current)&&x)){if(Hn(v)){c.current=!0;var E=v.changedTouches||[];E.length&&(a.current=E[0].identifier)}x.focus(),s(Oo(x,v,a.current)),g(!0)}},function(b){var v=b.which||b.keyCode;v<37||v>40||(b.preventDefault(),o({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},g]},[o,s]),u=l[0],f=l[1],h=l[2];return d.useEffect(function(){return h},[h]),y.createElement("div",An({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),nr=function(e){return e.filter(Boolean).join(" ")},as=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,s=nr(["react-colorful__pointer",e.className]);return y.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},y.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},$e=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},Fc=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:$e(e.h),s:$e(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:$e(i/2),a:$e(r,2)}},Mi=function(e){var t=Fc(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ri=function(e){var t=Fc(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},zc=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),o=r*(1-n),a=r*(1-(t-s)*n),c=r*(1-(1-t+s)*n),l=s%6;return{r:$e(255*[r,a,o,o,c,r][l]),g:$e(255*[c,r,r,a,o,o][l]),b:$e(255*[o,o,c,r,r,a][l]),a:$e(i,2)}},jc=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),o=s-Math.min(t,n,r),a=o?s===t?(n-r)/o:s===n?2+(r-t)/o:4+(t-n)/o:0;return{h:$e(60*(a<0?a+6:a)),s:$e(s?o/s*100:0),v:$e(s/255*100),a:i}},Hc=y.memo(function(e){var t=e.hue,n=e.onChange,r=nr(["react-colorful__hue",e.className]);return y.createElement("div",{className:r},y.createElement(os,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:vn(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":$e(t),"aria-valuemax":"360","aria-valuemin":"0"},y.createElement(as,{className:"react-colorful__hue-pointer",left:t/360,color:Mi({h:t,s:100,v:100,a:1})})))}),Uc=y.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:Mi({h:t.h,s:100,v:100,a:1})};return y.createElement("div",{className:"react-colorful__saturation",style:r},y.createElement(os,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:vn(t.s+100*i.left,0,100),v:vn(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+$e(t.s)+"%, Brightness "+$e(t.v)+"%"},y.createElement(as,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Mi(t)})))}),cs=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function Gc(e,t,n){var r=Pi(n),i=d.useState(function(){return e.toHsva(t)}),s=i[0],o=i[1],a=d.useRef({color:t,hsva:s});d.useEffect(function(){if(!e.equal(t,a.current.color)){var l=e.toHsva(t);a.current={hsva:l,color:t},o(l)}},[t,e]),d.useEffect(function(){var l;cs(s,a.current.hsva)||e.equal(l=e.fromHsva(s),a.current.color)||(a.current={hsva:s,color:l},r(l))},[s,e,r]);var c=d.useCallback(function(l){o(function(u){return Object.assign({},u,l)})},[]);return[s,c]}var Kg=typeof window<"u"?d.useLayoutEffect:d.useEffect,Yg=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},$o=new Map,Vc=function(e){Kg(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!$o.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,$o.set(t,n);var r=Yg();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},Xg=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,s=e.onChange,o=ss(e,["className","colorModel","color","onChange"]),a=d.useRef(null);Vc(a);var c=Gc(n,i,s),l=c[0],u=c[1],f=nr(["react-colorful",t]);return y.createElement("div",An({},o,{ref:a,className:f}),y.createElement(Uc,{hsva:l,onChange:u}),y.createElement(Hc,{hue:l.h,onChange:u,className:"react-colorful__last-control"}))},qg=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+ri(Object.assign({},n,{a:0}))+", "+ri(Object.assign({},n,{a:1}))+")"},s=nr(["react-colorful__alpha",t]),o=$e(100*n.a);return y.createElement("div",{className:s},y.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),y.createElement(os,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:vn(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},y.createElement(as,{className:"react-colorful__alpha-pointer",left:n.a,color:ri(n)})))},Zg=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,s=e.onChange,o=ss(e,["className","colorModel","color","onChange"]),a=d.useRef(null);Vc(a);var c=Gc(n,i,s),l=c[0],u=c[1],f=nr(["react-colorful",t]);return y.createElement("div",An({},o,{ref:a,className:f}),y.createElement(Uc,{hsva:l,onChange:u}),y.createElement(Hc,{hue:l.h,onChange:u}),y.createElement(qg,{hsva:l,onChange:u,className:"react-colorful__last-control"}))},Qg={defaultColor:{r:0,g:0,b:0,a:1},toHsva:jc,fromHsva:zc,equal:cs},Jg=function(e){return y.createElement(Zg,An({},e,{colorModel:Qg}))},ev={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return jc({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=zc(e)).r,g:t.g,b:t.b};var t},equal:cs},tv=function(e){return y.createElement(Xg,An({},e,{colorModel:ev}))},Wc={exports:{}},nv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rv=nv,iv=rv;function Kc(){}function Yc(){}Yc.resetWarningCache=Kc;var sv=function(){function e(r,i,s,o,a,c){if(c!==iv){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Yc,resetWarningCache:Kc};return n.PropTypes=n,n};Wc.exports=sv();var ov=Wc.exports;const ne=ba(ov);function Rn(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function _n(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function av(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function cv(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(av(arguments[t]));return e}var lv=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function rr(e,t){var n=uv(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function uv(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=lv.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var fv=[".DS_Store","Thumbs.db"];function dv(e){return Rn(this,void 0,void 0,function(){return _n(this,function(t){return Mr(e)&&hv(e)?[2,vv(e.dataTransfer,e.type)]:pv(e)?[2,mv(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,gv(e)]:[2,[]]})})}function hv(e){return Mr(e.dataTransfer)}function pv(e){return Mr(e)&&Mr(e.target)}function Mr(e){return typeof e=="object"&&e!==null}function mv(e){return $i(e.target.files).map(function(t){return rr(t)})}function gv(e){return Rn(this,void 0,void 0,function(){var t;return _n(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return rr(r)})]}})})}function vv(e,t){return Rn(this,void 0,void 0,function(){var n,r;return _n(this,function(i){switch(i.label){case 0:return e===null?[2,[]]:e.items?(n=$i(e.items).filter(function(s){return s.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(bv))]):[3,2];case 1:return r=i.sent(),[2,Do(Xc(r))];case 2:return[2,Do($i(e.files).map(function(s){return rr(s)}))]}})})}function Do(e){return e.filter(function(t){return fv.indexOf(t.name)===-1})}function $i(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function bv(e){if(typeof e.webkitGetAsEntry!="function")return Io(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?qc(t):Io(e)}function Xc(e){return e.reduce(function(t,n){return cv(t,Array.isArray(n)?Xc(n):[n])},[])}function Io(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=rr(t);return Promise.resolve(n)}function yv(e){return Rn(this,void 0,void 0,function(){return _n(this,function(t){return[2,e.isDirectory?qc(e):xv(e)]})})}function qc(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;t.readEntries(function(a){return Rn(o,void 0,void 0,function(){var c,l,u;return _n(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return c=f.sent(),n(c),[3,4];case 3:return l=f.sent(),r(l),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(yv)),i.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function xv(e){return Rn(this,void 0,void 0,function(){return _n(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var s=rr(i,e.fullPath);n(s)},function(i){r(i)})})]})})}var Ev=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ko(Object(n),!0).forEach(function(r){Zc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e,t){return Av(e)||Sv(e,t)||Tv(e,t)||wv()}function wv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tv(e,t){if(e){if(typeof e=="string")return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bo(e,t)}}function Bo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(c){s=!0,a=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Av(e){if(Array.isArray(e))return e}var Rv="file-invalid-type",_v="file-too-large",Cv="file-too-small",Pv="too-many-files",Ov=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Rv,message:"File type must be ".concat(n)}},Fo=function(t){return{code:_v,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},zo=function(t){return{code:Cv,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Mv={code:Pv,message:"Too many files"};function Qc(e,t){var n=e.type==="application/x-moz-file"||Ev(e,t);return[n,n?null:Ov(t)]}function Jc(e,t,n){if(Ln(e.size))if(Ln(t)&&Ln(n)){if(e.size>n)return[!1,Fo(n)];if(e.size<t)return[!1,zo(t)]}else{if(Ln(t)&&e.size<t)return[!1,zo(t)];if(Ln(n)&&e.size>n)return[!1,Fo(n)]}return[!0,null]}function Ln(e){return e!=null}function $v(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,s=e.multiple,o=e.maxFiles;return!s&&t.length>1||s&&o>=1&&t.length>o?!1:t.every(function(a){var c=Qc(a,n),l=Lo(c,1),u=l[0],f=Jc(a,r,i),h=Lo(f,1),p=h[0];return u&&p})}function $r(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function hr(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function jo(e){e.preventDefault()}function Dv(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Iv(e){return e.indexOf("Edge/")!==-1}function kv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Dv(e)||Iv(e)}function rt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return t.some(function(a){return!$r(r)&&a&&a.apply(void 0,[r].concat(s)),$r(r)})}}function Nv(){return"showOpenFilePicker"in window}function Lv(e){return e=typeof e=="string"?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter(function(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}).reduce(function(t,n){return No(No({},t),{},Zc({},n,[]))},{}):{}}]}function Bv(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Fv(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}var zv=["children"],jv=["open"],Hv=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Uv=["refKey","onChange","onClick"];function Gv(e){return Kv(e)||Wv(e)||el(e)||Vv()}function Vv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kv(e){if(Array.isArray(e))return Di(e)}function ii(e,t){return qv(e)||Xv(e,t)||el(e,t)||Yv()}function Yv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function el(e,t){if(e){if(typeof e=="string")return Di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Di(e,t)}}function Di(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(c){s=!0,a=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function qv(e){if(Array.isArray(e))return e}function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ho(Object(n),!0).forEach(function(r){Ii(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e,t){if(e==null)return{};var n=Zv(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zv(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var ls=d.forwardRef(function(e,t){var n=e.children,r=Dr(e,zv),i=nl(r),s=i.open,o=Dr(i,jv);return d.useImperativeHandle(t,function(){return{open:s}},[s]),y.createElement(d.Fragment,null,n(ie(ie({},o),{},{open:s})))});ls.displayName="Dropzone";var tl={disabled:!1,getFilesFromEvent:dv,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};ls.defaultProps=tl;ls.propTypes={children:ne.func,accept:ne.oneOfType([ne.string,ne.arrayOf(ne.string)]),multiple:ne.bool,preventDropOnDocument:ne.bool,noClick:ne.bool,noKeyboard:ne.bool,noDrag:ne.bool,noDragEventsBubbling:ne.bool,minSize:ne.number,maxSize:ne.number,maxFiles:ne.number,disabled:ne.bool,getFilesFromEvent:ne.func,onFileDialogCancel:ne.func,onFileDialogOpen:ne.func,useFsAccessApi:ne.bool,onDragEnter:ne.func,onDragLeave:ne.func,onDragOver:ne.func,onDrop:ne.func,onDropAccepted:ne.func,onDropRejected:ne.func,validator:ne.func};var ki={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function nl(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ie(ie({},tl),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,s=t.maxSize,o=t.minSize,a=t.multiple,c=t.maxFiles,l=t.onDragEnter,u=t.onDragLeave,f=t.onDragOver,h=t.onDrop,p=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,b=t.onFileDialogOpen,v=t.useFsAccessApi,x=t.preventDropOnDocument,E=t.noClick,T=t.noKeyboard,A=t.noDrag,S=t.noDragEventsBubbling,_=t.validator,P=d.useMemo(function(){return typeof b=="function"?b:Uo},[b]),M=d.useMemo(function(){return typeof g=="function"?g:Uo},[g]),R=d.useRef(null),C=d.useRef(null),O=d.useReducer(Qv,ki),N=ii(O,2),L=N[0],D=N[1],H=L.isFocused,B=L.isFileDialogActive,K=L.draggedFiles,Q=d.useRef(typeof window<"u"&&window.isSecureContext&&v&&Nv()),ve=function(){!Q.current&&B&&setTimeout(function(){if(C.current){var U=C.current.files;U.length||(D({type:"closeDialog"}),M())}},300)};d.useEffect(function(){return window.addEventListener("focus",ve,!1),function(){window.removeEventListener("focus",ve,!1)}},[C,B,M,Q]);var de=d.useRef([]),_e=function(U){R.current&&R.current.contains(U.target)||(U.preventDefault(),de.current=[])};d.useEffect(function(){return x&&(document.addEventListener("dragover",jo,!1),document.addEventListener("drop",_e,!1)),function(){x&&(document.removeEventListener("dragover",jo),document.removeEventListener("drop",_e))}},[R,x]);var Ee=d.useCallback(function(I){I.preventDefault(),I.persist(),Ue(I),de.current=[].concat(Gv(de.current),[I.target]),hr(I)&&Promise.resolve(i(I)).then(function(U){$r(I)&&!S||(D({draggedFiles:U,isDragActive:!0,type:"setDraggedFiles"}),l&&l(I))})},[i,l,S]),Ze=d.useCallback(function(I){I.preventDefault(),I.persist(),Ue(I);var U=hr(I);if(U&&I.dataTransfer)try{I.dataTransfer.dropEffect="copy"}catch{}return U&&f&&f(I),!1},[f,S]),Ce=d.useCallback(function(I){I.preventDefault(),I.persist(),Ue(I);var U=de.current.filter(function(be){return R.current&&R.current.contains(be)}),pe=U.indexOf(I.target);pe!==-1&&U.splice(pe,1),de.current=U,!(U.length>0)&&(D({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),hr(I)&&u&&u(I))},[R,u,S]),Se=d.useCallback(function(I,U){var pe=[],be=[];I.forEach(function(le){var ut=Qc(le,n),Rt=ii(ut,2),Cn=Rt[0],en=Rt[1],Pn=Jc(le,o,s),Ft=ii(Pn,2),tn=Ft[0],zt=Ft[1],w=_?_(le):null;if(Cn&&tn&&!w)pe.push(le);else{var $=[en,zt];w&&($=$.concat(w)),be.push({file:le,errors:$.filter(function(j){return j})})}}),(!a&&pe.length>1||a&&c>=1&&pe.length>c)&&(pe.forEach(function(le){be.push({file:le,errors:[Mv]})}),pe.splice(0)),D({acceptedFiles:pe,fileRejections:be,type:"setFiles"}),h&&h(pe,be,U),be.length>0&&m&&m(be,U),pe.length>0&&p&&p(pe,U)},[D,a,n,o,s,c,h,p,m,_]),Qe=d.useCallback(function(I){I.preventDefault(),I.persist(),Ue(I),de.current=[],hr(I)&&Promise.resolve(i(I)).then(function(U){$r(I)&&!S||Se(U,I)}),D({type:"reset"})},[i,Se,S]),we=d.useCallback(function(){if(Q.current){D({type:"openDialog"}),P();var I={multiple:a,types:Lv(n)};window.showOpenFilePicker(I).then(function(U){return i(U)}).then(function(U){Se(U,null),D({type:"closeDialog"})}).catch(function(U){Bv(U)?(M(U),D({type:"closeDialog"})):Fv(U)&&(Q.current=!1,C.current&&(C.current.value=null,C.current.click()))});return}C.current&&(D({type:"openDialog"}),P(),C.current.value=null,C.current.click())},[D,P,M,v,Se,n,a]),He=d.useCallback(function(I){!R.current||!R.current.isEqualNode(I.target)||(I.key===" "||I.key==="Enter"||I.keyCode===32||I.keyCode===13)&&(I.preventDefault(),we())},[R,we]),me=d.useCallback(function(){D({type:"focus"})},[]),Y=d.useCallback(function(){D({type:"blur"})},[]),Pe=d.useCallback(function(){E||(kv()?setTimeout(we,0):we())},[E,we]),he=function(U){return r?null:U},Be=function(U){return T?null:he(U)},Te=function(U){return A?null:he(U)},Ue=function(U){S&&U.stopPropagation()},Ie=d.useMemo(function(){return function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=I.refKey,pe=U===void 0?"ref":U,be=I.role,le=I.onKeyDown,ut=I.onFocus,Rt=I.onBlur,Cn=I.onClick,en=I.onDragEnter,Pn=I.onDragOver,Ft=I.onDragLeave,tn=I.onDrop,zt=Dr(I,Hv);return ie(ie(Ii({onKeyDown:Be(rt(le,He)),onFocus:Be(rt(ut,me)),onBlur:Be(rt(Rt,Y)),onClick:he(rt(Cn,Pe)),onDragEnter:Te(rt(en,Ee)),onDragOver:Te(rt(Pn,Ze)),onDragLeave:Te(rt(Ft,Ce)),onDrop:Te(rt(tn,Qe)),role:typeof be=="string"&&be!==""?be:"button"},pe,R),!r&&!T?{tabIndex:0}:{}),zt)}},[R,He,me,Y,Pe,Ee,Ze,Ce,Qe,T,A,r]),at=d.useCallback(function(I){I.stopPropagation()},[]),ct=d.useMemo(function(){return function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=I.refKey,pe=U===void 0?"ref":U,be=I.onChange,le=I.onClick,ut=Dr(I,Uv),Rt=Ii({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:he(rt(be,Qe)),onClick:he(rt(le,at)),tabIndex:-1},pe,C);return ie(ie({},Rt),ut)}},[C,n,a,Qe,r]),lt=K.length,Ge=lt>0&&$v({files:K,accept:n,minSize:o,maxSize:s,multiple:a,maxFiles:c}),Bt=lt>0&&!Ge;return ie(ie({},L),{},{isDragAccept:Ge,isDragReject:Bt,isFocused:H&&!r,getRootProps:Ie,getInputProps:ct,rootRef:R,inputRef:C,open:he(we)})}function Qv(e,t){switch(t.type){case"focus":return ie(ie({},e),{},{isFocused:!0});case"blur":return ie(ie({},e),{},{isFocused:!1});case"openDialog":return ie(ie({},ki),{},{isFileDialogActive:!0});case"closeDialog":return ie(ie({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return ie(ie({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return ie(ie({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return ie({},ki);default:return e}}function Uo(){}const Jv=e=>(t,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let f=o(r.getState());l=h=>{const p=o(h);if(!u(f,p)){const m=f;a(f=p,m)}},c!=null&&c.fireImmediately&&a(f,f)}return i(l)},e(t,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var e0=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t0=e0;function Go(e){return t0(e)===!0&&Object.prototype.toString.call(e)==="[object Object]"}var rl=function(t){var n,r;return!(Go(t)===!1||(n=t.constructor,typeof n!="function")||(r=n.prototype,Go(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n0=rl,us=function(t){return n0(t)||typeof t=="function"||Array.isArray(t)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r0=function(t,n,r){for(var i in t)if(n.call(r,t[i],i,t)===!1)break},i0=us,s0=r0;function il(e,t){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];Ni(i)&&s0(i,o0,e)}return e}function o0(e,t){if(a0(t)){var n=this[t];Ni(e)&&Ni(n)?il(n,e):this[t]=e}}function Ni(e){return i0(e)&&!Array.isArray(e)}function a0(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"}var c0=il;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var l0=function(e,t,n,r,i){if(!u0(e)||!t)return e;if(t=pr(t),n&&(t+="."+pr(n)),r&&(t+="."+pr(r)),i&&(t+="."+pr(i)),t in e)return e[t];for(var s=t.split("."),o=s.length,a=-1;e&&++a<o;){for(var c=s[a];c[c.length-1]==="\\";)c=c.slice(0,-1)+"."+s[++a];e=e[c]}return e};function u0(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function pr(e){return e?Array.isArray(e)?e.join("."):e:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var f0=function(e,t){if(e===null||typeof e>"u")throw new TypeError("expected first argument to be an object.");if(typeof t>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),c=0;c<a.length;c++){var l=a[c];n.call(o,l)&&(r[l]=o[l])}return r},d0=us,h0=f0,p0=Object.assign||function(e){if(e===null||typeof e>"u")throw new TypeError("Cannot convert undefined or null to object");Vo(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];g0(n)&&(n=v0(n)),Vo(n)&&(m0(e,n),h0(e,n))}return e};function m0(e,t){for(var n in t)b0(t,n)&&(e[n]=t[n])}function g0(e){return e&&typeof e=="string"}function v0(e){var t={};for(var n in e)t[n]=e[n];return t}function Vo(e){return e&&typeof e=="object"||d0(e)}function b0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var y0=p0,x0=function(e,t,n){if(typeof e!="string")throw new TypeError("expected a string");typeof t=="function"&&(n=t,t=null),typeof t=="string"&&(t={sep:t});var r=y0({sep:"."},t),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],c=[""],l=r.sep,u=e.length,f=-1,h;function p(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<u;){var m=e[f],g=e[f+1],b={val:m,idx:f,arr:c,str:e};if(o.push(b),m==="\\"){b.val=w0(r,e,f)===!0?m+g:g,b.escaped=!0,typeof n=="function"&&n(b),c[c.length-1]+=b.val,f++;continue}if(s&&s[m]){a.push(m);var v=p(),x=f+1;if(e.indexOf(v,x+1)!==-1)for(;a.length&&x<u;){var E=e[++x];if(E==="\\"){E++;continue}if(i.indexOf(E)!==-1){x=Li(e,E,x+1);continue}if(v=p(),a.length&&e.indexOf(v,x+1)===-1)break;if(s[E]){a.push(E);continue}v===E&&a.pop()}if(h=x,h===-1){c[c.length-1]+=m;continue}m=e.slice(f,h+1),b.val=m,b.idx=f=h}if(i.indexOf(m)!==-1){if(h=Li(e,m,f+1),h===-1){c[c.length-1]+=m;continue}E0(m,r)===!0?m=e.slice(f,h+1):m=e.slice(f+1,h),b.val=m,b.idx=f=h}if(typeof n=="function"&&(n(b,o),m=b.val,f=b.idx),b.val===l&&b.split!==!1){c.push("");continue}c[c.length-1]+=b.val}return c};function Li(e,t,n,r){var i=e.indexOf(t,n);return e.charAt(i-1)==="\\"?Li(e,t,i+1):i}function E0(e,t){return t.keepDoubleQuotes===!0&&e==='"'||t.keepSingleQuotes===!0&&e==="'"?!0:t.keepQuotes}function w0(e,t,n){return typeof e.keepEscaping=="function"?e.keepEscaping(t,n):e.keepEscaping===!0||t[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var T0=function(t){return typeof t<"u"&&t!==null&&(typeof t=="object"||typeof t=="function")},Wo=T0,S0=function(t){Wo(t)||(t={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];Wo(i)&&A0(t,i)}return t};function A0(e,t){for(var n in t)R0(t,n)&&(e[n]=t[n])}function R0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var _0=function(t){return typeof t<"u"&&t!==null&&(typeof t=="object"||typeof t=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var C0=x0,P0=S0,Ko=rl,Yo=_0,O0=function(e,t,n){if(!Yo(e)||(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),typeof t!="string"))return e;for(var r=C0(t,{sep:".",brackets:!0}).filter(M0),i=r.length,s=-1,o=e;++s<i;){var a=r[s];if(s!==i-1){Yo(o[a])||(o[a]={}),o=o[a];continue}Ko(o[a])&&Ko(n)?o[a]=P0({},o[a],n):o[a]=n}return e};function M0(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"}var si=us,Xo=c0,$0=l0,qo=O0,D0=function(t,n,r){if(!si(t))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return Xo.apply(null,arguments);if(typeof r=="string")return qo(t,n,r),t;var i=$0(t,n);return si(r)&&si(i)&&(r=Xo({},i,r)),qo(t,n,r),t};const I0=ba(D0),fs=(...e)=>e.filter(Boolean).join(".");function k0(e){const t=e.split(".");return[t.pop(),t.join(".")||void 0]}function N0(e,t){return Object.entries(cm(e,t)).reduce((n,[,{value:r,disabled:i,key:s}])=>(n[s]=i?void 0:r,n),{})}function L0(e,t){const n=d.useRef();return(t?Un:qn)(e,n.current)||(n.current=e),n.current}function sl(e,t){return d.useMemo(e,L0(t,!0))}function B0(e){const t=d.useRef(null),n=d.useRef(null),r=d.useRef(!0);return d.useLayoutEffect(()=>{e||(t.current.style.height="0px",t.current.style.overflow="hidden")},[]),d.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=t.current,o=()=>{e&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=n.current.getBoundingClientRect();return s.style.height=a+"px",e||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[e]),{wrapperRef:t,contentRef:n}}const F0=e=>{const[t,n]=d.useState(e.getVisiblePaths());return d.useEffect(()=>{n(e.getVisiblePaths());const r=e.useStore.subscribe(e.getVisiblePaths,n,{equalityFn:qn});return()=>r()},[e]),t};function z0(e,t,n){return e.useStore(i=>{const s=z(z({},n),i.data);return N0(s,t)},qn)}function ol(e=3){const t=d.useRef(null),n=d.useRef(null),[r,i]=d.useState(!1),s=d.useCallback(()=>i(!0),[]),o=d.useCallback(()=>i(!1),[]);return d.useLayoutEffect(()=>{if(r){const{bottom:a,top:c,left:l}=t.current.getBoundingClientRect(),{height:u}=n.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=l+"px",f==="down"?n.current.style.top=a+e+"px":n.current.style.bottom=window.innerHeight-c+e+"px"}},[e,r]),{popinRef:t,wrapperRef:n,shown:r,show:s,hide:o}}Vg([Wg]);const j0={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Le.extend({color:()=>e=>Me(e).isValid()});const H0=e=>Le().color().test(e);function al(e,{format:t,hasAlpha:n,isString:r}){const i=j0[t]+(r&&t!=="hex"?"String":""),s=e[i]();return typeof s=="object"&&!n?lm(s,["a"]):s}const cl=(e,t)=>{const n=Me(e);if(!n.isValid())throw Error("Invalid color");return al(n,t)},U0=(e,t)=>al(Me(e),z(z({},t),{},{isString:!0,format:"hex"})),G0=({value:e})=>{const t=Gg(e),n=t==="name"?"hex":t,r=typeof e=="object"?"a"in e:t==="hex"&&e.length===8||/^(rgba)|(hsla)|(hsva)/.test(e),i={format:n,hasAlpha:r,isString:typeof e=="string"};return{value:cl(e,i),settings:i}};var V0=Object.freeze({__proto__:null,schema:H0,sanitize:cl,format:U0,normalize:G0});const W0=F("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),K0=F("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Y0=F("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function Zo(e,t){return t!=="rgb"?Me(e).toRgb():e}function X0({value:e,displayValue:t,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Re(),{format:o,hasAlpha:a}=n,{popinRef:c,wrapperRef:l,shown:u,show:f,hide:h}=ol(),p=d.useRef(0),[m,g]=d.useState(()=>Zo(e,o)),b=a?Jg:tv,v=()=>{g(Zo(e,o)),f(),i()},x=()=>{h(),s(),window.clearTimeout(p.current)},E=()=>{p.current=window.setTimeout(x,500)};return d.useEffect(()=>()=>window.clearTimeout(p.current),[]),y.createElement(y.Fragment,null,y.createElement(W0,{ref:c,active:u,onClick:()=>v(),style:{color:t}}),u&&y.createElement(ns,null,y.createElement(Rc,{onPointerUp:x}),y.createElement(Y0,{ref:l,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:T=>T.buttons===0&&E()},y.createElement(b,{color:m,onChange:r}))))}function q0(){const{value:e,displayValue:t,label:n,onChange:r,onUpdate:i,settings:s}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,n),y.createElement(K0,null,y.createElement(X0,{value:e,displayValue:t,onChange:r,onUpdate:i,settings:s}),y.createElement(ts,{value:t,onChange:r,onUpdate:i})))}var Z0=z({component:q0},V0);function Q0(){const{label:e,displayValue:t,onUpdate:n,settings:r}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(is,{value:t,settings:r,onUpdate:n}))}var J0=z({component:Q0},Ic(["x","y","z"]));const eb=F("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),tb=F("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function nb({value:e,settings:t,onUpdate:n}){const r=d.useRef(),i=d.useRef(0),s=d.useRef(0),o=d.useRef(1),[a,c]=d.useState(!1),[l,u]=d.useState(!1),[f,h]=Cc(),p=d.useRef(null),m=d.useRef(null);d.useLayoutEffect(()=>{if(a){const{top:O,left:N,width:L,height:D}=p.current.getBoundingClientRect();m.current.style.left=N+L/2+"px",m.current.style.top=O+D/2+"px"}},[a]);const{keys:[g,b],joystick:v}=t,x=v==="invertY"?1:-1,{[g]:{step:E},[b]:{step:T}}=t,A=bt("sizes","joystickWidth"),S=bt("sizes","joystickHeight"),_=parseFloat(A)*.8/2,P=parseFloat(S)*.8/2,M=d.useCallback(()=>{r.current||(u(!0),i.current&&h({x:i.current*_}),s.current&&h({y:s.current*-P}),r.current=window.setInterval(()=>{n(O=>{const N=E*i.current*o.current,L=x*T*s.current*o.current;return Array.isArray(O)?{[g]:O[0]+N,[b]:O[1]+L}:{[g]:O[g]+N,[b]:O[b]+L}})},16))},[_,P,n,h,E,T,g,b,x]),R=d.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);d.useEffect(()=>{function O(N){o.current=dc(N)}return window.addEventListener("keydown",O),window.addEventListener("keyup",O),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",O),window.removeEventListener("keyup",O)}},[]);const C=tr(({first:O,active:N,delta:[L,D],movement:[H,B]})=>{O&&c(!0);const K=Nt(H,-_,_),Q=Nt(B,-P,P);i.current=Math.abs(H)>Math.abs(K)?Math.sign(H-K):0,s.current=Math.abs(B)>Math.abs(Q)?Math.sign(Q-B):0;let ve=e[g],de=e[b];N?(i.current||(ve+=L*E*o.current,h({x:K})),s.current||(de-=x*D*T*o.current,h({y:Q})),i.current||s.current?M():R(),n({[g]:ve,[b]:de})):(c(!1),i.current=0,s.current=0,h({x:0,y:0}),R())});return y.createElement(eb,fe({ref:p},C()),a&&y.createElement(ns,null,y.createElement(tb,{ref:m,isOutOfBounds:l},y.createElement("div",null),y.createElement("span",{ref:f}))))}const rb=F("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ib(){const{label:e,displayValue:t,onUpdate:n,settings:r}=Re();return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(rb,{withJoystick:!!r.joystick},r.joystick&&y.createElement(nb,{value:t,settings:r,onUpdate:n}),y.createElement(is,{value:t,settings:r,onUpdate:n})))}const sb=["joystick"],ll=Ic(["x","y"]),ob=e=>{let{joystick:t=!0}=e,n=te(e,sb);const{value:r,settings:i}=ll.normalize(n);return{value:r,settings:z(z({},i),{},{joystick:t})}};var ab=z(z({component:ib},ll),{},{normalize:ob});const cb=e=>{if(e!==void 0){if(e instanceof File)try{return URL.createObjectURL(e)}catch{return}if(typeof e=="string"&&e.indexOf("blob:")===0)return e;throw Error("Invalid image format [undefined | blob | File].")}},lb=(e,t)=>typeof t=="object"&&"image"in t,ub=({image:e})=>({value:e});var fb=Object.freeze({__proto__:null,sanitize:cb,schema:lb,normalize:ub});const db=F("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),hb=F("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),pb=F("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),mb=F("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),gb=F("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),vb=F("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function bb(){const{label:e,value:t,onUpdate:n,disabled:r}=Re(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:c}=ol(),l=d.useCallback(m=>{m.length&&n(m[0])},[n]),u=d.useCallback(m=>{m.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:h,isDragAccept:p}=nl({maxFiles:1,accept:"image/*",onDrop:l,disabled:r});return y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(db,null,y.createElement(pb,{ref:i,hasImage:!!t,onPointerDown:()=>!!t&&a(),onPointerUp:c,style:{backgroundImage:t?`url(${t})`:"none"}}),o&&!!t&&y.createElement(ns,null,y.createElement(Rc,{onPointerUp:c,style:{cursor:"pointer"}}),y.createElement(mb,{ref:s,style:{backgroundImage:`url(${t})`}})),y.createElement(hb,f({isDragAccept:p}),y.createElement("input",h()),y.createElement(gb,null,p?"drop image":"click or drop")),y.createElement(vb,{onClick:u,disabled:!t})))}var yb=z({component:bb},fb);const Qo=Le().number(),xb=(e,t)=>Le().array().length(2).every.number().test(e)&&Le().schema({min:Qo,max:Qo}).test(t),Ir=e=>({min:e[0],max:e[1]}),ul=(e,{bounds:[t,n]},r)=>{const i=Array.isArray(e)?Ir(e):e,s={min:r[0],max:r[1]},{min:o,max:a}=z(z({},s),i);return[Nt(Number(o),t,Math.max(t,a)),Nt(Number(a),Math.min(n,o),n)]},Eb=({value:e,min:t,max:n})=>{const r={min:t,max:n},i=Dc(Ir(e),{min:r,max:r}),s=[t,n],o=z(z({},i),{},{bounds:s});return{value:ul(Ir(e),o,e),settings:o}};var wb=Object.freeze({__proto__:null,schema:xb,format:Ir,sanitize:ul,normalize:Eb});const Tb=["value","bounds","onDrag"],Sb=["bounds"],Ab=F("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Rb(e){let{value:t,bounds:[n,r],onDrag:i}=e,s=te(e,Tb);const o=d.useRef(null),a=d.useRef(null),c=d.useRef(null),l=d.useRef(0),u=bt("sizes","scrubberWidth"),f=tr(({event:m,first:g,xy:[b],movement:[v],memo:x={}})=>{if(g){const{width:T,left:A}=o.current.getBoundingClientRect();l.current=T-parseFloat(u);const S=(m==null?void 0:m.target)===a.current||(m==null?void 0:m.target)===c.current;x.pos=Pr((b-A)/T,n,r);const _=Math.abs(x.pos-t.min)-Math.abs(x.pos-t.max);x.key=_<0||_===0&&x.pos<=t.min?"min":"max",S&&(x.pos=t[x.key])}const E=x.pos+Pr(v/l.current,0,r-n);return i({[x.key]:Zm(E,s[x.key])}),x}),h=`calc(${Cr(t.min,n,r)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-Cr(t.max,n,r)} * (100% - ${u} - 8px) + 4px)`;return y.createElement(Oc,fe({ref:o},f()),y.createElement(Pc,null,y.createElement(Mc,{style:{left:h,right:p}})),y.createElement(Ai,{position:"left",ref:a,style:{left:h}}),y.createElement(Ai,{position:"right",ref:c,style:{right:p}}))}function _b(){const{label:e,displayValue:t,onUpdate:n,settings:r}=Re(),i=te(r,Sb);return y.createElement(y.Fragment,null,y.createElement(qe,{input:!0},y.createElement(nt,null,e),y.createElement(Ab,null,y.createElement(Rb,fe({value:t},r,{onDrag:n})),y.createElement(is,{value:t,settings:i,onUpdate:n,innerLabelTrim:0}))))}var Cb=z({component:_b},wb);const Pb=()=>{const e=new Map;return{on:(t,n)=>{let r=e.get(t);r===void 0&&(r=new Set,e.set(t,r)),r.add(n)},off:(t,n)=>{const r=e.get(t);r!==void 0&&(r.delete(n),r.size===0&&e.delete(t))},emit:(t,...n)=>{const r=e.get(t);if(r!==void 0)for(const i of r)i(...n)}}},Ob=["type","value"],Mb=["onChange","transient","onEditStart","onEditEnd"],$b=function(){const t=nu(Jv(()=>({data:{}}))),n=Pb();this.storeId=am(),this.useStore=t;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),c=[];Object.entries(r).forEach(([u,f])=>{f.render&&a.some(h=>h.indexOf(u)===0)&&!f.render(this.get)&&c.push(u+".")});const l=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&c.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{t.setState(a=>{const c=a.data;return o.forEach(l=>{if(l in c){const u=c[l];u.__refCount--,u.__refCount===0&&u.type in et&&delete c[l]}}),{data:c}})},this.dispose=()=>{t.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>t.getState().data,this.addData=(o,a)=>{t.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,f])=>{let h=l[u];if(h){const{type:p,value:m}=f,g=te(f,Ob);p!==h.type?gt(oe.INPUT_TYPE_OVERRIDE,p):((h.__refCount===0||a)&&Object.assign(h,g),h.__refCount++)}else l[u]=z(z({},f),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(o,a,c)=>{t.setState(l=>{const u=l.data;return wo(u[o],a,o,this,c),{data:u}})},this.setSettingsAtPath=(o,a)=>{t.setState(c=>{const l=c.data;return l[o].settings=z(z({},l[o].settings),a),{data:l}})},this.disableInputAtPath=(o,a)=>{t.setState(c=>{const l=c.data;return l[o].disabled=a,{data:l}})},this.set=(o,a)=>{t.setState(c=>{const l=c.data;return Object.entries(o).forEach(([u,f])=>{try{wo(l[u],f,void 0,void 0,a)}catch{}}),{data:l}})},this.getInput=o=>{try{return this.getData()[o]}catch{gt(oe.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{n.emit(`onEditStart:${o}`,this.get(o),o,z(z({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{n.emit(`onEditEnd:${o}`,this.get(o),o,z(z({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const c=`onEditStart:${o}`;return n.on(c,a),()=>n.off(c,a)},this.subscribeToEditEnd=(o,a)=>{const c=`onEditEnd:${o}`;return n.on(c,a),()=>n.off(c,a)};const s=(o,a,c)=>{const l={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return gt(oe.EMPTY_KEY);let h=fs(a,u);if(f.type===et.FOLDER){const p=s(f.schema,h,c);Object.assign(l,p),h in r||(r[h]=f.settings)}else if(u in c)gt(oe.DUPLICATE_KEYS,u,h,c[u].path);else{const p=mm(f,u,h,l);if(p){const{type:m,options:g,input:b}=p,{onChange:v,transient:x,onEditStart:E,onEditEnd:T}=g,A=te(g,Mb);l[h]=z(z(z({type:m},A),b),{},{fromPanel:!0}),c[u]={path:h,onChange:v,transient:x,onEditStart:E,onEditEnd:T}}else gt(oe.UNKNOWN_INPUT,h,f)}}),l};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},fl=new $b,Db={collapsed:!1};function Ib(e,t){return{type:et.FOLDER,schema:e,settings:z(z({},Db),t)}}const Jo=e=>"__levaInput"in e,kb=(e,t)=>{const n={},r=t?t.toLowerCase():null;return e.forEach(i=>{const[s,o]=k0(i);(!r||s.toLowerCase().indexOf(r)>-1)&&I0(n,o,{[s]:{__levaInput:!0,path:i}})}),n},Nb=["type","label","path","valueKey","value","settings","setValue","disabled"];function Lb(e){let{type:t,label:n,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:c}=e,l=te(e,Nb);const{displayValue:u,onChange:f,onUpdate:h}=_c({type:t,value:s,settings:o,setValue:a}),p=Zt[t].component;return p?y.createElement(vc.Provider,{value:z({key:i,path:r,id:""+r,label:n,displayValue:u,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:c},l)},y.createElement(km,{disabled:c},y.createElement(p,null))):(gt(oe.NO_COMPONENT_FOR_TYPE,t,r),null)}const Bb=F("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Fb({onClick:e,settings:t,label:n}){const r=er();return y.createElement(qe,null,y.createElement(Bb,{disabled:t.disabled,onClick:()=>e(r.get)},n))}const zb=F("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),jb=F("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Hb=({label:e,opts:t})=>{let n=typeof e=="string"&&e.trim()===""?null:e,r=t;return typeof t.opts=="object"&&(r.label!==void 0&&(n=t.label),r=t.opts),{label:n,opts:r}};function Ub(e){const{label:t,opts:n}=Hb(e),r=er();return y.createElement(qe,{input:!!t},t&&y.createElement(nt,null,t),y.createElement(zb,null,Object.entries(n).map(([i,s])=>y.createElement(jb,{key:i,onClick:()=>s(r.get)},i))))}const Gb=F("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),dl=100;function Vb(e,t){e.push(t),e.length>dl&&e.shift()}const Wb=d.forwardRef(function({initialValue:e},t){const n=bt("colors","highlight3"),r=bt("colors","elevation2"),i=bt("colors","highlight1"),[s,o]=d.useMemo(()=>[Me(i).alpha(.4).toRgbString(),Me(i).alpha(.1).toRgbString()],[i]),a=d.useRef([e]),c=d.useRef(e),l=d.useRef(e),u=d.useRef(),f=d.useCallback((m,g)=>{if(!m)return;const{width:b,height:v}=m,x=new Path2D,E=b/dl,T=v*.05;for(let _=0;_<a.current.length;_++){const P=Cr(a.current[_],c.current,l.current),M=E*_,R=v-P*(v-T*2)-T;x.lineTo(M,R)}g.clearRect(0,0,b,v);const A=new Path2D(x);A.lineTo(E*(a.current.length+1),v),A.lineTo(0,v),A.lineTo(0,0);const S=g.createLinearGradient(0,0,0,v);S.addColorStop(0,s),S.addColorStop(1,o),g.fillStyle=S,g.fill(A),g.strokeStyle=r,g.lineJoin="round",g.lineWidth=14,g.stroke(x),g.strokeStyle=n,g.lineWidth=2,g.stroke(x)},[n,r,s,o]),[h,p]=Gm(f);return d.useImperativeHandle(t,()=>({frame:m=>{(c.current===void 0||m<c.current)&&(c.current=m),(l.current===void 0||m>l.current)&&(l.current=m),Vb(a.current,m),u.current=requestAnimationFrame(()=>f(h.current,p.current))}}),[h,p,f]),d.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),y.createElement(Gb,{ref:h})}),ea=e=>Number.isFinite(e)?e.toPrecision(2):e.toString(),Kb=d.forwardRef(function({initialValue:e},t){const[n,r]=d.useState(ea(e));return d.useImperativeHandle(t,()=>({frame:i=>r(ea(i))}),[]),y.createElement("div",null,n)});function ta(e){return typeof e=="function"?e():e.current}function Yb({label:e,objectOrFn:t,settings:n}){const r=d.useRef(),i=d.useRef(ta(t));return d.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(ta(t))},n.interval);return()=>window.clearInterval(s)},[t,n.interval]),y.createElement(qe,{input:!0},y.createElement(nt,{align:"top"},e),n.graph?y.createElement(Wb,{ref:r,initialValue:i.current}):y.createElement(Kb,{ref:r,initialValue:i.current}))}const Xb=["type","label","key"],qb={[et.BUTTON]:Fb,[et.BUTTON_GROUP]:Ub,[et.MONITOR]:Yb},Zb=y.memo(({path:e})=>{const[t,{set:n,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=Wm(e);if(!t)return null;const{type:c,label:l,key:u}=t,f=te(t,Xb);if(c in et){const h=qb[c];return y.createElement(h,fe({label:l,path:e},f))}return c in Zt?y.createElement(Lb,fe({key:s+e,type:c,label:l,storeId:s,path:e,valueKey:u,setValue:n,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(Jp(oe.UNSUPPORTED_INPUT,c,e),null)});function Qb({toggle:e,toggled:t,name:n}){return y.createElement($m,{onClick:()=>e()},y.createElement(rs,{toggled:t}),y.createElement("div",null,n))}const Jb=({name:e,path:t,tree:n})=>{const r=er(),i=fs(t,e),{collapsed:s,color:o}=r.getFolderSettings(i),[a,c]=d.useState(!s),l=d.useRef(null),u=bt("colors","folderWidgetColor"),f=bt("colors","folderTextColor");return d.useLayoutEffect(()=>{l.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),l.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),y.createElement(Or,{ref:l},y.createElement(Qb,{name:e,toggled:a,toggle:()=>c(h=>!h)}),y.createElement(hl,{parent:i,tree:n,toggled:a}))},hl=y.memo(({isRoot:e=!1,fill:t=!1,flat:n=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=B0(s),c=er(),l=([f,h])=>{var p;return(Jo(h)?(p=c.getInput(h.path))===null||p===void 0?void 0:p.order:c.getFolderSettings(fs(r,f)).order)||0},u=Object.entries(i).sort((f,h)=>l(f)-l(h));return y.createElement(Ti,{ref:o,isRoot:e,fill:t,flat:n},y.createElement(Tc,{ref:a,isRoot:e,toggled:s},u.map(([f,h])=>Jo(h)?y.createElement(Zb,{key:h.path,valueKey:h.valueKey,path:h.path}):y.createElement(Jb,{key:f,name:f,path:r,tree:h}))))}),ey=F("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${Ac}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),pl=40,kr=F("i",{$flexCenter:"",width:pl,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),ty=F("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),ny=F("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${kr}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),ry=F("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),iy=F("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:pl}}}}),sy=y.forwardRef(({setFilter:e,toggle:t},n)=>{const[r,i]=d.useState(""),s=d.useMemo(()=>fc(e,250),[e]),o=()=>{e(""),i("")},a=c=>{const l=c.currentTarget.value;t(!0),i(l)};return d.useEffect(()=>{s(r)},[r,s]),y.createElement(y.Fragment,null,y.createElement(ry,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:a}),y.createElement(kr,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function oy({setFilter:e,onDrag:t,onDragStart:n,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:c,from:l}){const[u,f]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{var m,g;u?(m=h.current)===null||m===void 0||m.focus():(g=h.current)===null||g===void 0||g.blur()},[u]);const p=tr(({offset:[m,g],first:b,last:v})=>{t({x:m,y:g}),b&&n({x:m,y:g}),v&&r({x:m,y:g})},{filterTaps:!0,from:({offset:[m,g]})=>[(l==null?void 0:l.x)||m,(l==null?void 0:l.y)||g]});return d.useEffect(()=>{const m=g=>{g.key==="L"&&g.shiftKey&&g.metaKey&&f(b=>!b)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),y.createElement(y.Fragment,null,y.createElement(ty,{mode:a?"drag":void 0},y.createElement(kr,{active:!s,onClick:()=>i()},y.createElement(rs,{toggled:s,width:12,height:8})),y.createElement(iy,fe({},a?p():{},{drag:a,filterEnabled:c}),o===void 0&&a?y.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},y.createElement("circle",{cx:"2",cy:"2",r:"2"}),y.createElement("circle",{cx:"14",cy:"2",r:"2"}),y.createElement("circle",{cx:"26",cy:"2",r:"2"}),y.createElement("circle",{cx:"2",cy:"12",r:"2"}),y.createElement("circle",{cx:"14",cy:"12",r:"2"}),y.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),c&&y.createElement(kr,{active:u,onClick:()=>f(m=>!m)},y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},y.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),y.createElement(ny,{toggled:u},y.createElement(sy,{ref:h,setFilter:e,toggle:i})))}const ay=["store","hidden","theme","collapsed"];function cy(e){let{store:t,hidden:n=!1,theme:r,collapsed:i=!1}=e,s=te(e,ay);const o=sl(()=>Rm(r),[r]),[a,c]=d.useState(!i),l=typeof i=="object"?!i.collapsed:a,u=d.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:c,[i]);return!t||n?null:y.createElement(es.Provider,{value:o},y.createElement(ly,fe({store:t},s,{toggled:l,setToggle:u,rootClass:o.className})))}const ly=y.memo(({store:e,rootClass:t,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:c,setToggle:l})=>{var u,f;const h=F0(e),[p,m]=d.useState(""),g=d.useMemo(()=>kb(h,p),[h,p]),[b,v]=Cc(),x=i||h.length>0,E=typeof o=="object"&&o.title||void 0,T=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,A=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,S=typeof o=="object"&&o.position||void 0,_=typeof o=="object"&&o.onDrag||void 0,P=typeof o=="object"&&o.onDragStart||void 0,M=typeof o=="object"&&o.onDragEnd||void 0;return y.useEffect(()=>{v({x:S==null?void 0:S.x,y:S==null?void 0:S.y})},[S,v]),Am(),y.createElement(yc.Provider,{value:{hideCopyButton:a}},y.createElement(ey,{ref:b,className:t,fill:n,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&y.createElement(oy,{onDrag:R=>{v(R),_==null||_(R)},onDragStart:R=>P==null?void 0:P(R),onDragEnd:R=>M==null?void 0:M(R),setFilter:m,toggle:R=>l(C=>R??!C),toggled:c,title:E,drag:T,filterEnabled:A,from:S}),x&&y.createElement(bc.Provider,{value:e},y.createElement(hl,{isRoot:!0,fill:n,flat:r,tree:g,toggled:c}))))}),uy=["isRoot"];let Nr=!1,Gt=null;function fy(e){let{isRoot:t=!1}=e,n=te(e,uy);return d.useEffect(()=>(Nr=!0,!t&&Gt&&(Gt.remove(),Gt=null),()=>{t||(Nr=!1)}),[t]),y.createElement(cy,fe({store:fl},n))}function dy(e){d.useEffect(()=>{e&&!Nr&&(Gt||(Gt=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Gt),vm(y.createElement(fy,{isRoot:!0}),Gt))),Nr=!0)},[e])}function hy(e,t,n,r,i){let s,o,a,c,l;return typeof e=="string"?(o=e,s=t,Array.isArray(n)?l=n:n&&("store"in n?(c=n,l=r):(a=n,Array.isArray(r)?l=r:(c=r,l=i)))):(s=e,Array.isArray(t)?l=t:(c=t,l=n)),{schema:s,folderName:o,folderSettings:a,hookSettings:c,deps:l||[]}}function na(e,t,n,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:c,deps:l}=hy(e,t,n,r,i),u=typeof o=="function",f=d.useRef(!1),h=d.useRef(!0),p=sl(()=>{f.current=!0;const C=typeof o=="function"?o():o;return s?{[s]:Ib(C,a)}:C},l),m=!(c!=null&&c.store);dy(m);const[g]=d.useState(()=>(c==null?void 0:c.store)||fl),[b,v]=d.useMemo(()=>g.getDataFromSchema(p),[g,p]),[x,E,T,A,S]=d.useMemo(()=>{const C=[],O=[],N={},L={},D={};return Object.values(v).forEach(({path:H,onChange:B,onEditStart:K,onEditEnd:Q,transient:ve})=>{C.push(H),B?(N[H]=B,ve||O.push(H)):O.push(H),K&&(L[H]=K),Q&&(D[H]=Q)}),[C,O,N,L,D]},[v]),_=d.useMemo(()=>g.orderPaths(x),[x,g]),P=z0(g,E,b),M=d.useCallback(C=>{const O=Object.entries(C).reduce((N,[L,D])=>Object.assign(N,{[v[L].path]:D}),{});g.set(O,!1)},[g,v]),R=d.useCallback(C=>g.get(v[C].path),[g,v]);return d.useEffect(()=>{const C=!h.current&&f.current;return g.addData(b,C),h.current=!1,f.current=!1,()=>g.disposePaths(_)},[g,_,b]),d.useEffect(()=>{const C=[];return Object.entries(T).forEach(([O,N])=>{N(g.get(O),O,z({initial:!0,get:g.get},g.getInput(O)));const L=g.useStore.subscribe(D=>{const H=D.data[O];return[H.disabled?void 0:H.value,H]},([D,H])=>N(D,O,z({initial:!1,get:g.get},H)),{equalityFn:qn});C.push(L)}),()=>C.forEach(O=>O())},[g,T]),d.useEffect(()=>{const C=[];return Object.entries(A).forEach(([O,N])=>C.push(g.subscribeToEditStart(O,N))),Object.entries(S).forEach(([O,N])=>C.push(g.subscribeToEditEnd(O,N))),()=>C.forEach(O=>O())},[A,S,g]),u?[P,M,R]:P}At(tt.SELECT,lg);At(tt.IMAGE,yb);At(tt.NUMBER,Jm);At(tt.COLOR,Z0);At(tt.STRING,bg);At(tt.BOOLEAN,Ag);At(tt.INTERVAL,Cb);At(tt.VECTOR3D,J0);At(tt.VECTOR2D,ab);const ir=new se,ds=new se,py=new se,ra=new ee;function my(e,t,n){const r=ir.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function gy(e,t){const n=ir.setFromMatrixPosition(e.matrixWorld),r=ds.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),s=t.getWorldDirection(py);return i.angleTo(s)>Math.PI/2}function vy(e,t,n,r){const i=ir.setFromMatrixPosition(e.matrixWorld),s=i.clone();s.project(t),ra.set(s.x,s.y),n.setFromCamera(ra,t);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function by(e,t){if(t instanceof Ht)return t.zoom;if(t instanceof vt){const n=ir.setFromMatrixPosition(e.matrixWorld),r=ds.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function yy(e,t,n){if(t instanceof vt||t instanceof Ht){const r=ir.setFromMatrixPosition(e.matrixWorld),i=ds.setFromMatrixPosition(t.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(t.far-t.near),a=n[1]-o*t.far;return Math.round(o*s+a)}}const Bi=e=>Math.abs(e)<1e-10?0:e;function ml(e,t,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Bi(t[i]*e.elements[i])+(i!==15?",":")");return n+r}const xy=(e=>t=>ml(t,e))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Ey=(e=>(t,n)=>ml(t,e(n),"translate(-50%,-50%)"))(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]);function wy(e){return e&&typeof e=="object"&&"current"in e}const Ty=d.forwardRef(({children:e,eps:t=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:c,sprite:l=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:p,receiveShadow:m,material:g,geometry:b,zIndexRange:v=[16777271,0],calculatePosition:x=my,as:E="div",wrapperClass:T,pointerEvents:A="auto",...S},_)=>{const{gl:P,camera:M,scene:R,size:C,raycaster:O,events:N,viewport:L}=Je(),[D]=d.useState(()=>document.createElement(E)),H=d.useRef(),B=d.useRef(null),K=d.useRef(0),Q=d.useRef([0,0]),ve=d.useRef(null),de=d.useRef(null),_e=(a==null?void 0:a.current)||N.connected||P.domElement.parentNode,Ee=d.useRef(null),Ze=d.useRef(!1),Ce=d.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&wy(f[0]),[f]);d.useLayoutEffect(()=>{const me=P.domElement;f&&f==="blending"?(me.style.zIndex=`${Math.floor(v[0]/2)}`,me.style.position="absolute",me.style.pointerEvents="none"):(me.style.zIndex=null,me.style.position=null,me.style.pointerEvents=null)},[f]),d.useLayoutEffect(()=>{if(B.current){const me=H.current=ru(D);if(R.updateMatrixWorld(),u)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Y=x(B.current,M,C);D.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Y[0]}px,${Y[1]}px,0);transform-origin:0 0;`}return _e&&(i?_e.prepend(D):_e.appendChild(D)),()=>{_e&&_e.removeChild(D),me.unmount()}}},[_e,u]),d.useLayoutEffect(()=>{T&&(D.className=T)},[T]);const Se=d.useMemo(()=>u?{position:"absolute",top:0,left:0,width:C.width,height:C.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-C.height/2,left:-C.width/2,width:C.width,height:C.height},...n},[n,s,o,C,u]),Qe=d.useMemo(()=>({position:"absolute",pointerEvents:A}),[A]);d.useLayoutEffect(()=>{if(Ze.current=!1,u){var me;(me=H.current)==null||me.render(d.createElement("div",{ref:ve,style:Se},d.createElement("div",{ref:de,style:Qe},d.createElement("div",{ref:_,className:r,style:n,children:e}))))}else{var Y;(Y=H.current)==null||Y.render(d.createElement("div",{ref:_,style:Se,className:r,children:e}))}});const we=d.useRef(!0);Xn(me=>{if(B.current){M.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);const Y=u?Q.current:x(B.current,M,C);if(u||Math.abs(K.current-M.zoom)>t||Math.abs(Q.current[0]-Y[0])>t||Math.abs(Q.current[1]-Y[1])>t){const Pe=gy(B.current,M);let he=!1;Ce&&(Array.isArray(f)?he=f.map(Ie=>Ie.current):f!=="blending"&&(he=[R]));const Be=we.current;if(he){const Ie=vy(B.current,M,O,he);we.current=Ie&&!Pe}else we.current=!Pe;Be!==we.current&&(h?h(!we.current):D.style.display=we.current?"block":"none");const Te=Math.floor(v[0]/2),Ue=f?Ce?[v[0],Te]:[Te-1,0]:v;if(D.style.zIndex=`${yy(B.current,M,Ue)}`,u){const[Ie,at]=[C.width/2,C.height/2],ct=M.projectionMatrix.elements[5]*at,{isOrthographicCamera:lt,top:Ge,left:Bt,bottom:I,right:U}=M,pe=xy(M.matrixWorldInverse),be=lt?`scale(${ct})translate(${Bi(-(U+Bt)/2)}px,${Bi((Ge+I)/2)}px)`:`translateZ(${ct}px)`;let le=B.current.matrixWorld;l&&(le=M.matrixWorldInverse.clone().transpose().copyPosition(le).scale(B.current.scale),le.elements[3]=le.elements[7]=le.elements[11]=0,le.elements[15]=1),D.style.width=C.width+"px",D.style.height=C.height+"px",D.style.perspective=lt?"":`${ct}px`,ve.current&&de.current&&(ve.current.style.transform=`${be}${pe}translate(${Ie}px,${at}px)`,de.current.style.transform=Ey(le,1/((c||10)/400)))}else{const Ie=c===void 0?1:by(B.current,M)*c;D.style.transform=`translate3d(${Y[0]}px,${Y[1]}px,0) scale(${Ie})`}Q.current=Y,K.current=M.zoom}}if(!Ce&&Ee.current&&!Ze.current)if(u){if(ve.current){const Y=ve.current.children[0];if(Y!=null&&Y.clientWidth&&Y!=null&&Y.clientHeight){const{isOrthographicCamera:Pe}=M;if(Pe||b)S.scale&&(Array.isArray(S.scale)?S.scale instanceof se?Ee.current.scale.copy(S.scale.clone().divideScalar(1)):Ee.current.scale.set(1/S.scale[0],1/S.scale[1],1/S.scale[2]):Ee.current.scale.setScalar(1/S.scale));else{const he=(c||10)/400,Be=Y.clientWidth*he,Te=Y.clientHeight*he;Ee.current.scale.set(Be,Te,1)}Ze.current=!0}}}else{const Y=D.children[0];if(Y!=null&&Y.clientWidth&&Y!=null&&Y.clientHeight){const Pe=1/L.factor,he=Y.clientWidth*Pe,Be=Y.clientHeight*Pe;Ee.current.scale.set(he,Be,1),Ze.current=!0}Ee.current.lookAt(me.camera.position)}});const He=d.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return d.createElement("group",ge({},S,{ref:B}),f&&!Ce&&d.createElement("mesh",{castShadow:p,receiveShadow:m,ref:Ee},b||d.createElement("planeGeometry",null),g||d.createElement("shaderMaterial",{side:ln,vertexShader:He.vertexShader,fragmentShader:He.fragmentShader})))}),Sy=d.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:c,...l},u)=>{const f=Je(S=>S.invalidate),h=Je(S=>S.camera),p=Je(S=>S.gl),m=Je(S=>S.events),g=Je(S=>S.setEvents),b=Je(S=>S.set),v=Je(S=>S.get),x=Je(S=>S.performance),E=t||h,T=r||m.connected||p.domElement,A=d.useMemo(()=>new Au(E),[E]);return Xn(()=>{A.enabled&&A.update()},-1),d.useEffect(()=>(s&&A.connect(s===!0?T:s),A.connect(T),()=>void A.dispose()),[s,T,n,A,f]),d.useEffect(()=>{const S=M=>{f(),n&&x.regress(),o&&o(M)},_=M=>{a&&a(M)},P=M=>{c&&c(M)};return A.addEventListener("change",S),A.addEventListener("start",_),A.addEventListener("end",P),()=>{A.removeEventListener("start",_),A.removeEventListener("end",P),A.removeEventListener("change",S)}},[o,a,c,A,f,g]),d.useEffect(()=>{if(e){const S=v().controls;return b({controls:A}),()=>b({controls:S})}},[e,A]),d.createElement("primitive",ge({ref:u,object:A,enableDamping:i},l))}),hs=d.createContext(null);function Ay({children:e,enabled:t=!0}){const[n,r]=d.useState([]),i=d.useMemo(()=>({selected:n,select:r,enabled:t}),[n,r,t]);return re(hs.Provider,{value:i,children:e})}function Ry({enabled:e=!1,children:t,...n}){const r=d.useRef(null),i=d.useContext(hs);return d.useEffect(()=>{if(i&&e){let s=!1;const o=[];if(r.current.traverse(a=>{a.type==="Mesh"&&o.push(a),i.selected.indexOf(a)===-1&&(s=!0)}),s)return i.select(a=>[...a,...o]),()=>{i.select(a=>a.filter(c=>!o.includes(c)))}}},[e,t,i]),re("group",{ref:r,...n,children:t})}/**
 * postprocessing v6.35.2 build Sun Mar 10 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rüschen
 * @license Zlib
 */var oi=1/1e3,_y=1e3,Cy=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*oi}get fixedDelta(){return this._fixedDelta*oi}set fixedDelta(e){this._fixedDelta=e*_y}get elapsed(){return this._elapsed*oi}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Py=new fu,Pt=null;function Oy(){if(Pt===null){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Pt=new ji,Pt.setAttribute!==void 0?(Pt.setAttribute("position",new Ut(e,3)),Pt.setAttribute("uv",new Ut(t,2))):(Pt.addAttribute("position",new Ut(e,3)),Pt.addAttribute("uv",new Ut(t,2)))}return Pt}var je=class gl{constructor(t="Pass",n=new Es,r=Py){this.name=t,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let n=this.screen;n!==null?n.material=t:(n=new Yn(Oy(),t),n.frustumCulled=!1,this.scene===null&&(this.scene=new Es),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,n=bn){}render(t,n,r,i,s){throw new Error("Render method not implemented!")}setSize(t,n){}initialize(t,n,r){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof it||n instanceof Fn||n instanceof Er||n instanceof gl)&&this[t].dispose()}}},My=class extends je{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},$y=Number(zi.replace(/\D+/g,""));function ps(e){return $y<154?e.replace("colorspace_fragment","encodings_fragment"):e}var Dy=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Iy="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",vl=class extends Qt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Z(null),opacity:new Z(1)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Dy,vertexShader:Iy}),this.fragmentShader=ps(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},ky=class extends je{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new vl,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new it(1,1,{minFilter:pn,magFilter:pn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Xt?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===Ke&&(this.renderTarget.texture.colorSpace=Ke))}},ia=new Ne,ms=class extends je{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=e.getClearAlpha(),c=s!==null,l=o>=0;c?(e.getClearColor(ia),e.setClearColor(s,l?o:a)):l&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(ia,a):l&&e.setClearAlpha(a)}},Ny=class extends je{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new ms(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){const s=e.getContext(),o=e.state.buffers,a=this.scene,c=this.camera,l=this.clearPass,u=this.inverted?0:1,f=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,u,4294967295),o.stencil.setClear(f),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?l.render(e,null):(l.render(e,t),l.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,c)):(e.setRenderTarget(t),e.render(a,c),e.setRenderTarget(n),e.render(a,c)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Ly=class{constructor(t=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ky,this.depthTexture=null,this.passes=[],this.timer=new Cy,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const n=this.inputBuffer,r=this.multisampling;r>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const n=t.getSize(new ee),r=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Xt&&t.outputColorSpace===Ke&&(this.inputBuffer.texture.colorSpace=Ke,this.outputBuffer.texture.colorSpace=Ke,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(n.width,n.height);for(const s of this.passes)s.initialize(t,r,i)}}replaceRenderer(t,n=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(t),n&&i!==null&&(i.removeChild(r.domElement),i.appendChild(t.domElement)),r}createDepthTexture(){const t=this.depthTexture=new iu;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=su,t.type=ou):t.type=au,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,n,r,i){const s=this.renderer,o=s===null?new ee:s.getDrawingBufferSize(new ee),a={minFilter:pn,magFilter:pn,stencilBuffer:n,depthBuffer:t,type:r},c=new it(o.width,o.height,a);return i>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=i),r===Xt&&s!==null&&s.outputColorSpace===Ke&&(c.texture.colorSpace=Ke),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(t){for(const n of this.passes)n.mainScene=t}setMainCamera(t){for(const n of this.passes)n.mainCamera=t}addPass(t,n){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new ee),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(s.width,s.height),t.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,t):r.push(t),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(t of r)t.setDepthTexture(c)}else t.setDepthTexture(this.depthTexture)}removePass(t){const n=this.passes,r=n.indexOf(t);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const o=(c,l)=>c||l.needsDepthTexture;n.reduce(o,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(t.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const n=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,c,l;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(n,i,s,t,o),u.needsSwap&&(o&&(r.renderToScreen=u.renderToScreen,a=n.getContext(),c=n.state.buffers.stencil,c.setFunc(a.NOTEQUAL,1,4294967295),r.render(n,i,s,t,o),c.setFunc(a.EQUAL,1,4294967295)),l=i,i=s,s=l),u instanceof Ny?o=!0:u instanceof My&&(o=!1))}setSize(t,n,r){const i=this.renderer,s=i.getSize(new ee);(t===void 0||n===void 0)&&(t=s.width,n=s.height),(s.width!==t||s.height!==n)&&i.setSize(t,n,r);const o=i.getDrawingBufferSize(new ee);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},yt={NONE:0,DEPTH:1,CONVOLUTION:2},X={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},By=class{constructor(){this.shaderParts=new Map([[X.FRAGMENT_HEAD,null],[X.FRAGMENT_MAIN_UV,null],[X.FRAGMENT_MAIN_IMAGE,null],[X.VERTEX_HEAD,null],[X.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=yt.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ya}},ai=!1,sa=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let n;if(t.material.flatShading)switch(t.material.side){case ln:n=this.materialsFlatShadedDoubleSide;break;case or:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(t.material.side){case ln:n=this.materialsDoubleSide;break;case or:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=n[2]:t.isInstancedMesh?t.material=n[1]:t.material=n[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Qt))return e.clone();const t=e.uniforms,n=new Map;for(const i in t){const s=t[i].value;s.isRenderTargetTexture&&(t[i].value=null,n.set(i,s))}const r=e.clone();for(const i of n)t[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=ma;t[2].skinning=!0,this.materialsBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=or,r}),this.materialsDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=ln,r}),this.materialsFlatShaded=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=or,r}),this.materialsFlatShadedDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=ln,r})}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,ai){const i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=i}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ai}static set workaroundEnabled(e){ai=e}},Ot=-1,De=class extends Lr{constructor(e,t=Ot,n=Ot,r=1){super(),this.resizable=e,this.baseSize=new ee(1,1),this.preferredSize=new ee(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new ee,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==Ot?n.width=t.width:t.height!==Ot?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),t.height!==Ot?n.height=t.height:t.width!==Ot?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Ot),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ot}},Fy=class extends Set{constructor(e,t=10){super(),this.l=t,this.exclusive=!1,e!==void 0&&this.set(e)}get layer(){return this.l}set layer(e){const t=this.l;for(const n of this)n.layers.disable(t),n.layers.enable(e);this.l=e}getLayer(){return this.layer}setLayer(e){this.layer=e}isExclusive(){return this.exclusive}setExclusive(e){this.exclusive=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return this.exclusive?e.layers.set(this.layer):e.layers.enable(this.layer),super.add(e)}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}toggle(e){let t;return this.has(e)?(this.delete(e),t=!1):(this.add(e),t=!0),t}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}},V={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},zy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",jy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Hy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Uy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Gy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Vy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Wy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Ky="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Yy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Xy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",qy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Zy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Qy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Jy="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ex="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",tx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",nx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",rx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ix="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",sx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ox="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",ax="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",cx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",lx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",ux="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",fx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",dx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",hx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",px="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",mx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",gx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",vx="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",bx=new Map([[V.ADD,zy],[V.ALPHA,jy],[V.AVERAGE,Hy],[V.COLOR,Uy],[V.COLOR_BURN,Gy],[V.COLOR_DODGE,Vy],[V.DARKEN,Wy],[V.DIFFERENCE,Ky],[V.DIVIDE,Yy],[V.DST,null],[V.EXCLUSION,Xy],[V.HARD_LIGHT,qy],[V.HARD_MIX,Zy],[V.HUE,Qy],[V.INVERT,Jy],[V.INVERT_RGB,ex],[V.LIGHTEN,tx],[V.LINEAR_BURN,nx],[V.LINEAR_DODGE,rx],[V.LINEAR_LIGHT,ix],[V.LUMINOSITY,sx],[V.MULTIPLY,ox],[V.NEGATION,ax],[V.NORMAL,cx],[V.OVERLAY,lx],[V.PIN_LIGHT,ux],[V.REFLECT,fx],[V.SATURATION,dx],[V.SCREEN,hx],[V.SOFT_LIGHT,px],[V.SRC,mx],[V.SUBTRACT,gx],[V.VIVID_LIGHT,vx]]),yx=class extends Lr{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new Z(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return bx.get(this.blendFunction)}},gs={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},xx=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Ex="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",wx=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Tx=class extends Qt{constructor(e=new ws){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Z(null),texelSize:new Z(new ws),scale:new Z(1),kernel:new Z(0)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xx,vertexShader:Ex}),this.fragmentShader=ps(this.fragmentShader),this.setTexelSize(e.x,e.y),this.kernelSize=gs.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return wx[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Sx=class extends je{constructor({kernelSize:e=gs.MEDIUM,resolutionScale:t=.5,width:n=De.AUTO_SIZE,height:r=De.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new it(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new De(this,i,s,t);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new Tx,this._blurMaterial.kernelSize=e,this.copyMaterial=new vl}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,c=this.renderTargetB,l=this.blurMaterial,u=l.kernelSequence;let f=t;this.fullscreenMaterial=l;for(let h=0,p=u.length;h<p;++h){const m=h&1?c:a;l.kernel=u[h],l.inputBuffer=f.texture,e.setRenderTarget(m),e.render(s,o),f=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,o)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}initialize(e,t,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Xt?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===Ke&&(this.renderTargetA.texture.colorSpace=Ke,this.renderTargetB.texture.colorSpace=Ke))}static get AUTO_SIZE(){return De.AUTO_SIZE}},Fi=class extends Lr{constructor(e,t,{attributes:n=yt.NONE,blendFunction:r=V.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new yx(r),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=ya,this._outputColorSpace=xa}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=bn){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof it||t instanceof Fn||t instanceof Er||t instanceof je)&&this[e].dispose()}}},Ax=class extends je{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,n,r,i){const s=this.fullscreenMaterial.uniforms;t!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){n!==void 0&&n!==Xt&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Vr=class extends je{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new ms,this.overrideMaterialManager=n===null?null:new sa(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new sa(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const s=this.scene,o=this.camera,a=this.selection,c=o.layers.mask,l=s.background,u=e.shadowMap.autoUpdate,f=this.renderToScreen?null:t;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,o):e.render(s,o),o.layers.mask=c,s.background=l,e.shadowMap.autoUpdate=u}},Rx=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,_x=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,Cx=class extends Qt{constructor(e=null,t){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Z(null),cameraNear:new Z(.3),cameraFar:new Z(1e3)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Rx,vertexShader:_x}),this.depthBuffer=e,this.depthPacking=ui,this.copyCameraSettings(t)}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=ui){this.depthBuffer=e,this.depthPacking=t}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof vt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Px="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",Ox="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",Mx=class extends Qt{constructor(e=new ee){super({name:"OutlineMaterial",uniforms:{inputBuffer:new Z(null),texelSize:new Z(new ee)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Px,vertexShader:Ox}),this.uniforms.texelSize.value.set(e.x,e.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},$x=class extends je{constructor(e,t,{renderTarget:n,resolutionScale:r=1,width:i=De.AUTO_SIZE,height:s=De.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Vr(e,t,new uu({depthPacking:ui}));const c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0;const l=c.clearPass;l.overrideClearColor=new Ne(16777215),l.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new it(1,1,{minFilter:Yt,magFilter:Yt}),this.renderTarget.texture.name="DepthPass.Target");const u=this.resolution=new De(this,o,a,r);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},Dx=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,Ix="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",kx=class extends Fi{constructor(e,t,{blendFunction:n=V.SCREEN,patternTexture:r=null,patternScale:i=1,edgeStrength:s=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:c=2230538,kernelSize:l=gs.VERY_SMALL,blur:u=!1,xRay:f=!0,multisampling:h=0,resolutionScale:p=.5,width:m=De.AUTO_SIZE,height:g=De.AUTO_SIZE,resolutionX:b=m,resolutionY:v=g}={}){super("OutlineEffect",Dx,{uniforms:new Map([["maskTexture",new Z(null)],["edgeTexture",new Z(null)],["edgeStrength",new Z(s)],["visibleEdgeColor",new Z(new Ne(a))],["hiddenEdgeColor",new Z(new Ne(c))],["pulse",new Z(1)],["patternScale",new Z(i)],["patternTexture",new Z(null)]])}),this.blendMode.addEventListener("change",A=>{this.blendMode.blendFunction===V.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=n,this.patternTexture=r,this.xRay=f,this.scene=e,this.camera=t,this.renderTargetMask=new it(1,1),this.renderTargetMask.samples=h,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new it(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new ms,this.clearPass.overrideClearColor=new Ne(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new $x(e,t),this.maskPass=new Vr(e,t,new Cx(this.depthPass.texture,t));const x=this.maskPass.clearPass;x.overrideClearColor=new Ne(16777215),x.overrideClearAlpha=1,this.blurPass=new Sx({resolutionScale:p,resolutionX:b,resolutionY:v,kernelSize:l}),this.blurPass.enabled=u;const E=this.blurPass.resolution;E.addEventListener("change",A=>this.setSize(E.baseWidth,E.baseHeight)),this.outlinePass=new Ax(new Mx);const T=this.outlinePass.fullscreenMaterial;T.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new Fy,this.selection.layer=10,this.pulseSpeed=o}set mainScene(e){this.scene=e,this.depthPass.mainScene=e,this.maskPass.mainScene=e}set mainCamera(e){this.camera=e,this.depthPass.mainCamera=e,this.maskPass.mainCamera=e,this.maskPass.overrideMaterial.copyCameraSettings(e)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(e){this.renderTargetMask.samples=e,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(e){this.uniforms.get("patternScale").value=e}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(e){this.uniforms.get("edgeStrength").value=e}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(e){this.uniforms.get("visibleEdgeColor").value=e}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(e){this.uniforms.get("hiddenEdgeColor").value=e}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(e){this.pulseSpeed=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get selectionLayer(){return this.selection.layer}set selectionLayer(e){this.selection.layer=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e}get xRay(){return this.defines.has("X_RAY")}set xRay(e){this.xRay!==e&&(e?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(e){this.xRay=e}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(e){e!==null?(e.wrapS=e.wrapT=xr,this.defines.set("USE_PATTERN","1"),this.setVertexShader(Ix)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=e,this.setChanged()}setPatternTexture(e){this.patternTexture=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}setSelection(e){return this.selection.set(e),this}clearSelection(){return this.selection.clear(),this}selectObject(e){return this.selection.add(e),this}deselectObject(e){return this.selection.delete(e),this}update(e,t,n){const r=this.scene,i=this.camera,s=this.selection,a=this.uniforms.get("pulse"),c=r.background,l=i.layers.mask;(this.forceUpdate||s.size>0)&&(r.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=n,s.setVisible(!1),this.depthPass.render(e),s.setVisible(!0),i.layers.set(s.layer),this.maskPass.render(e,this.renderTargetMask),i.layers.mask=l,r.background=c,this.outlinePass.render(e,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(e,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(e,t){this.blurPass.setSize(e,t),this.renderTargetMask.setSize(e,t);const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.depthPass.setSize(r,i),this.renderTargetOutline.setSize(r,i),this.outlinePass.fullscreenMaterial.setSize(r,i)}initialize(e,t,n){this.blurPass.initialize(e,t,Xt),n!==void 0&&(this.depthPass.initialize(e,t,n),this.maskPass.initialize(e,t,n),this.outlinePass.initialize(e,t,n))}},Nx=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Lx="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Bx=class extends Qt{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Z(null),normalBuffer:new Z(null),texelSize:new Z(new ee)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Nx,vertexShader:Lx})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=bn){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,e!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Fx=class extends je{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:n=De.AUTO_SIZE,height:r=De.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new Bx;o.normalBuffer=e,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new it(1,1,{minFilter:Yt,magFilter:Yt,depthBuffer:!1,type:cu}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new De(this,i,s,t);a.addEventListener("change",c=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=bn){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){const r=e.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},zx=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,jx="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Hx=class extends Qt{constructor(e,t,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:zi.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Z(null),depthBuffer:new Z(null),resolution:new Z(new ee),texelSize:new Z(new ee),cameraNear:new Z(.3),cameraFar:new Z(1e3),aspect:new Z(1),time:new Z(0)},blending:yn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=bn){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=zx.replace(X.FRAGMENT_HEAD,e.get(X.FRAGMENT_HEAD)||"").replace(X.FRAGMENT_MAIN_UV,e.get(X.FRAGMENT_MAIN_UV)||"").replace(X.FRAGMENT_MAIN_IMAGE,e.get(X.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=jx.replace(X.VERTEX_HEAD,e.get(X.VERTEX_HEAD)||"").replace(X.VERTEX_MAIN_SUPPORT,e.get(X.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=ps(this.fragmentShader),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof vt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return X}};function oa(e,t,n){for(const r of t){const i="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,i))}}function Ux(e,t,n){let r=t.getFragmentShader(),i=t.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(o&&n.attributes&yt.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=n.shaderParts;let l=c.get(X.FRAGMENT_HEAD)||"",u=c.get(X.FRAGMENT_MAIN_UV)||"",f=c.get(X.FRAGMENT_MAIN_IMAGE)||"",h=c.get(X.VERTEX_HEAD)||"",p=c.get(X.VERTEX_MAIN_SUPPORT)||"";const m=new Set,g=new Set;if(o&&(u+=`	${e}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);p+=`	${e}MainSupport(`,p+=x?`vUv);
`:`);
`;for(const E of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of E[1].split(/\s*,\s*/))n.varyings.add(T),m.add(T),g.add(T);for(const E of i.matchAll(a))g.add(E[1])}for(const x of r.matchAll(a))g.add(x[1]);for(const x of t.defines.keys())g.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of t.uniforms.keys())g.add(x);g.delete("while"),g.delete("for"),g.delete("if"),t.uniforms.forEach((x,E)=>n.uniforms.set(e+E.charAt(0).toUpperCase()+E.slice(1),x)),t.defines.forEach((x,E)=>n.defines.set(e+E.charAt(0).toUpperCase()+E.slice(1),x));const b=new Map([["fragment",r],["vertex",i]]);oa(e,g,n.defines),oa(e,g,b),r=b.get("fragment"),i=b.get("vertex");const v=t.blendMode;if(n.blendModes.set(v.blendFunction,v),s){t.inputColorSpace!==null&&t.inputColorSpace!==n.colorSpace&&(f+=t.inputColorSpace===Ke?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==xa?n.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(n.colorSpace=t.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;f+=`${e}MainImage(color0, UV, `,n.attributes&yt.DEPTH&&x.test(r)&&(f+="depth, ",n.readDepth=!0),f+=`color1);
	`;const E=e+"BlendOpacity";n.uniforms.set(E,v.opacity),f+=`color0 = blend${v.blendFunction}(color0, color1, ${E});

	`,l+=`uniform float ${E};

`}if(l+=r+`
`,i!==null&&(h+=i+`
`),c.set(X.FRAGMENT_HEAD,l),c.set(X.FRAGMENT_MAIN_UV,u),c.set(X.FRAGMENT_MAIN_IMAGE,f),c.set(X.VERTEX_HEAD,h),c.set(X.VERTEX_MAIN_SUPPORT,p),t.extensions!==null)for(const x of t.extensions)n.extensions.add(x)}}var Gx=class extends je{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Hx(null,null,null,e),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,n)=>n.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new By;let t=0;for(const o of this.effects)if(o.blendMode.blendFunction===V.DST)e.attributes|=o.getAttributes()&yt.DEPTH;else{if(e.attributes&o.getAttributes()&yt.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);Ux("e"+t++,o,e)}let n=e.shaderParts.get(X.FRAGMENT_HEAD),r=e.shaderParts.get(X.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(X.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of e.blendModes.values())n+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;e.attributes&yt.DEPTH?(e.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===Ke&&(r+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(X.FRAGMENT_HEAD,n),e.shaderParts.set(X.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(X.FRAGMENT_MAIN_UV,i);for(const[o,a]of e.shaderParts)a!==null&&e.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=bn){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(const s of this.effects)s.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),n!==void 0&&n!==Xt&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Vx=class extends je{constructor(e,t,{renderTarget:n,resolutionScale:r=1,width:i=De.AUTO_SIZE,height:s=De.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Vr(e,t,new lu);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const l=c.getClearPass();l.overrideClearColor=new Ne(7829503),l.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new it(1,1,{minFilter:Yt,magFilter:Yt}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new De(this,o,a,r);u.addEventListener("change",f=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s,s)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}};const bl=d.createContext(null),aa=e=>(e.getAttributes()&yt.CONVOLUTION)===yt.CONVOLUTION,Wx=y.memo(d.forwardRef(({children:e,camera:t,scene:n,resolutionScale:r,enabled:i=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,enableNormalPass:c,stencilBuffer:l,multisampling:u=8,frameBufferType:f=pu},h)=>{const{gl:p,scene:m,camera:g,size:b}=Je(),v=n||m,x=t||g,[E,T,A]=d.useMemo(()=>{const M=xu(),R=new Ly(p,{depthBuffer:a,stencilBuffer:l,multisampling:u>0&&M?u:0,frameBufferType:f});R.addPass(new Vr(v,x));let C=null,O=null;return c&&(O=new Vx(v,x),O.enabled=!1,R.addPass(O),r!==void 0&&M&&(C=new Fx({normalBuffer:O.texture,resolutionScale:r}),C.enabled=!1,R.addPass(C))),[R,O,C]},[x,p,a,l,u,f,v,c,r]);d.useEffect(()=>E==null?void 0:E.setSize(b.width,b.height),[E,b]),Xn((M,R)=>{if(i){const C=p.autoClear;p.autoClear=o,l&&!o&&p.clearStencil(),E.render(R),p.autoClear=C}},i?s:0);const S=d.useRef(null),_=du(S);d.useLayoutEffect(()=>{const M=[];if(S.current&&_.current&&E){const R=_.current.objects;for(let C=0;C<R.length;C++){const O=R[C];if(O instanceof Fi){const N=[O];if(!aa(O)){let D=null;for(;(D=R[C+1])instanceof Fi&&!aa(D);)N.push(D),C++}const L=new Gx(x,...N);M.push(L)}else O instanceof je&&M.push(O)}for(const C of M)E==null||E.addPass(C);T&&(T.enabled=!0),A&&(A.enabled=!0)}return()=>{for(const R of M)E==null||E.removePass(R);T&&(T.enabled=!1),A&&(A.enabled=!1)}},[E,e,x,T,A,_]),d.useEffect(()=>{const M=p.toneMapping;return p.toneMapping=hu,()=>{p.toneMapping=M}},[]);const P=d.useMemo(()=>({composer:E,normalPass:T,downSamplingPass:A,resolutionScale:r,camera:x,scene:v}),[E,T,A,r,x,v]);return d.useImperativeHandle(h,()=>E,[E]),re(bl.Provider,{value:P,children:re("group",{ref:S,children:e})})})),ca=e=>typeof e=="object"&&e!=null&&"current"in e?e.current:e,Kx=d.forwardRef(function({selection:t=[],selectionLayer:n=10,blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:c,width:l,height:u,kernelSize:f,blur:h,xRay:p,...m},g){const b=Je(A=>A.invalidate),{scene:v,camera:x}=d.useContext(bl),E=d.useMemo(()=>new kx(v,x,{blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:c,width:l,height:u,kernelSize:f,blur:h,xRay:p,...m}),[r,h,x,s,u,c,f,i,o,v,a,l,p]),T=d.useContext(hs);return d.useEffect(()=>{if(!T&&t)return E.selection.set(Array.isArray(t)?t.map(ca):[ca(t)]),b(),()=>{E.selection.clear(),b()}},[E,t,T,b]),d.useEffect(()=>{E.selectionLayer=n,b()},[E,b,n]),d.useRef(),d.useEffect(()=>{var A;if(T&&T.enabled&&(A=T.selected)!=null&&A.length)return E.selection.set(T.selected),b(),()=>{E.selection.clear(),b()}},[T,E.selection,b]),d.useEffect(()=>()=>{E.dispose()},[E]),re("primitive",{ref:g,object:E})});function Yx(e){const t=d.useRef(null),[n,r]=d.useState(!1),[i,s]=d.useState(!1);return Xn(()=>{const o=t.current;o&&(o.rotation.y+=.001)}),re(Ry,{enabled:n,children:re(mu,{onHover:()=>r(!0),onBlur:()=>r(!1),onSelect:()=>s(!i),children:Ui("mesh",{ref:t,onClick:o=>s(!i),scale:i?1.5:1,onPointerOver:o=>r(!0),onPointerOut:o=>r(!1),position:e.position,children:[re("boxGeometry",{args:[1,1,1]}),re("meshPhongMaterial",{color:n?"orange":"aqua",transparent:!0,opacity:.7}),re(Ty,{occlude:!0,distanceFactor:5,position:[0,0,.51],transform:!0,children:re("span",{children:"hello"})})]})})})}function Xx(e){return Ui(Ay,{children:[re(Wx,{multisampling:8,autoClear:!1,children:re(Kx,{blur:!0,edgeStrength:100,width:1e3})}),re(Yx,{position:e.position})]})}function qx({polyhedron:e,color:t,...n}){const r=d.useRef(null),[i,s]=d.useState(2);return re("mesh",{...n,ref:r,geometry:e[i],onClick:()=>s((i+1)%e.length),children:re("meshStandardMaterial",{color:t,wireframe:!0})})}function oE(){const e=d.useMemo(()=>[new gu,new ga(.785398),new vu(.785398)],[]),t=d.useMemo(()=>({x:{value:0,min:0,max:Math.PI*2,step:.01},y:{value:0,min:0,max:Math.PI*2,step:.01},z:{value:0,min:0,max:Math.PI*2,step:.01},visible:!0,color:{value:"lime"}}),[]),n=d.useMemo(()=>({posX:{value:1,min:-5,max:5,step:.1},posY:{value:2,min:-5,max:5,step:.1},posZ:{value:1,min:-5,max:5,step:.1}}),[]),r=na("Polyhedron B",t),i=na("Cube A",n);return re(bu,{children:Ui(yu,{referenceSpace:"local",frameRate:72,children:[re(Sf,{}),re("ambientLight",{}),re(qx,{position:[1,1,0],rotation:[r.x,r.y,r.z],visible:r.visible,color:r.color,polyhedron:e}),re(Sy,{"target-y":1}),re(Xx,{position:[i.posX,i.posY,i.posZ]}),re("axesHelper",{args:[5]}),re("gridHelper",{})]})})}export{oE as default};
